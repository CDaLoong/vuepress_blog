import{_ as l,r as e,o as i,c as u,b as n,d as s,e as a,a as p}from"./app-168a97af.js";const r="/vuepress_blog/assets/1-70f02bdc.png",k="/vuepress_blog/assets/2-664f2acd.png",d="/vuepress_blog/assets/3-bd2fe745.png",v="/vuepress_blog/assets/4-40343f1f.png",m="/vuepress_blog/assets/5-3718a7a3.png",g="/vuepress_blog/assets/6-049c14e8.png",b="/vuepress_blog/assets/7-daefe109.png",h="/vuepress_blog/assets/8-c4733cd4.png",y="/vuepress_blog/assets/9-dbef0e4d.png",f="/vuepress_blog/assets/10-0d6c1687.png",x="/vuepress_blog/assets/11-9453114d.png",w="/vuepress_blog/assets/12-bb196fc0.png",R="/vuepress_blog/assets/13-d34a910c.png",j="/vuepress_blog/assets/14-ad482fd7.png",q="/vuepress_blog/assets/15-615c1fd0.png",C={},S=n("h1",{id:"react",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#react","aria-hidden":"true"},"#"),s(" React")],-1),_={href:"https://react.docschina.org/",target:"_blank",rel:"noopener noreferrer"},P=p('<h2 id="ä»€ä¹ˆæ˜¯react" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯react" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯Reactï¼Ÿ</h2><ul><li>Reactæ˜¯ç”±<strong>Facebook</strong>ç ”å‘çš„ã€ç”¨äº<strong>è§£å†³UIå¤æ‚åº¦</strong>çš„å¼€æº<strong>JavaScriptåº“</strong>ï¼Œç›®å‰ç”±Reactè”åˆç¤¾åŒºç»´æŠ¤</li><li>å®ƒä¸æ˜¯æ¡†æ¶ï¼Œåªæ˜¯ä¸ºäº†è§£å†³UIå¤æ‚åº¦è€Œè¯ç”Ÿçš„ä¸€ä¸ªåº“</li></ul><h2 id="reactçš„ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#reactçš„ç‰¹ç‚¹" aria-hidden="true">#</a> Reactçš„ç‰¹ç‚¹</h2><ul><li>è½»é‡ï¼šReactçš„å¼€å‘ç‰ˆæ‰€æœ‰æºç ï¼ˆåŒ…å«æ³¨é‡Šï¼‰ä»…3000å¤šè¡Œ</li><li>åŸç”Ÿï¼šæ‰€æœ‰çš„Reactçš„ä»£ç éƒ½æ˜¯ç”¨åŸç”ŸJSä¹¦å†™è€Œæˆçš„ï¼Œä¸ä¾èµ–å…¶ä»–ä»»ä½•åº“</li><li>æ˜“æ‰©å±•ï¼šReactå¯¹ä»£ç çš„å°è£…ç¨‹åº¦è¾ƒä½ï¼Œä¹Ÿæ²¡æœ‰è¿‡å¤šçš„ä½¿ç”¨é­”æ³•ï¼Œæ‰€ä»¥Reactä¸­çš„å¾ˆå¤šåŠŸèƒ½éƒ½å¯ä»¥æ‰©å±•</li><li>ä¸ä¾èµ–å®¿ä¸»ç¯å¢ƒï¼šReactåªä¾èµ–åŸç”ŸJSè¯­è¨€ï¼Œä¸ä¾èµ–ä»»ä½•å…¶ä»–ä¸œè¥¿ï¼ŒåŒ…æ‹¬è¿è¡Œç¯å¢ƒã€‚å› æ­¤ï¼Œå®ƒå¯ä»¥è¢«è½»æ¾çš„ç§»æ¤åˆ°æµè§ˆå™¨ã€æ¡Œé¢åº”ç”¨ã€ç§»åŠ¨ç«¯</li><li>æ¸è¿‘å¼ï¼šReactå¹¶éæ¡†æ¶ï¼Œå¯¹æ•´ä¸ªå·¥ç¨‹æ²¡æœ‰å¼ºåˆ¶çº¦æŸåŠ›ã€‚è¿™å¯¹ä¸é‚£äº›å·²å­˜åœ¨çš„å·¥ç¨‹ï¼Œå¯ä»¥é€æ­¥çš„å°†å…¶æ”¹é€ ä¸ºReactï¼Œè€Œä¸éœ€è¦å…¨ç›˜é‡å†™</li><li>å•å‘æ•°æ®æµï¼šæ‰€æœ‰çš„æ•°æ®è‡ªé¡¶è€Œä¸‹çš„æµåŠ¨</li><li>ç”¨JSä»£ç å£°æ˜ç•Œé¢</li><li>ç»„ä»¶åŒ–</li></ul><h2 id="å¯¹æ¯”vue" tabindex="-1"><a class="header-anchor" href="#å¯¹æ¯”vue" aria-hidden="true">#</a> å¯¹æ¯”Vue</h2><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>Vue</th><th>React</th></tr></thead><tbody><tr><td>å…¨çƒä½¿ç”¨é‡</td><td></td><td></td></tr><tr><td>âœ”</td><td></td><td></td></tr><tr><td>å›½å†…ä½¿ç”¨é‡</td><td>âœ”</td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td>æ€§èƒ½</td><td>âœ”</td><td>âœ”</td></tr><tr><td>æ˜“ä¸Šæ‰‹</td><td>âœ”</td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td>çµæ´»åº¦</td><td></td><td></td></tr><tr><td>âœ”</td><td></td><td></td></tr><tr><td>å¤§å‹ä¼ä¸š</td><td></td><td></td></tr><tr><td>âœ”</td><td></td><td></td></tr><tr><td>ä¸­å°å‹ä¼ä¸š</td><td>âœ”</td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td>ç”Ÿæ€</td><td></td><td></td></tr><tr><td>âœ”</td><td></td><td></td></tr></tbody></table><h2 id="å­¦ä¹ è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#å­¦ä¹ è·¯å¾„" aria-hidden="true">#</a> å­¦ä¹ è·¯å¾„</h2><p>æ•´ä½“åŸåˆ™ï¼šç†Ÿæ‚‰API --&gt; æ·±å…¥ç†è§£åŸç†</p>',8),T=n("li",null,[s("React "),n("ol",null,[n("li",null,"åŸºç¡€ï¼šæŒæ¡Reactçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œæœ‰èƒ½åŠ›åˆ¶ä½œå„ç§ç»„ä»¶ï¼Œå¹¶ç†è§£å…¶åŸºæœ¬è¿ä½œåŸç†"),n("li",null,"è¿›é˜¶ï¼šæŒæ¡Reactä¸­çš„ä¸€äº›é«˜çº§ç”¨æ³•ï¼Œæé«˜ä»£ç è´¨é‡")])],-1),D={href:"https://react-guide.github.io/react-router-cn/",target:"_blank",rel:"noopener noreferrer"},M={href:"http://cn.redux.js.org/",target:"_blank",rel:"noopener noreferrer"},O=n("ol",null,[n("li",null,"Reduxæœ¬èº«"),n("li",null,"å„ç§ä¸­é—´ä»¶")],-1),F={href:"https://umijs.org/zh-CN/docs",target:"_blank",rel:"noopener noreferrer"},H={href:"https://ant.design/index-cn",target:"_blank",rel:"noopener noreferrer"},A=n("li",null,[s("æºç éƒ¨åˆ† "),n("ol",null,[n("li",null,"Reactæºç åˆ†æ"),n("li",null,"Reduxæºç åˆ†æ")])],-1),E={id:"jsx",tabindex:"-1"},U=n("a",{class:"header-anchor",href:"#jsx","aria-hidden":"true"},"#",-1),I={href:"https://zh-hans.reactjs.org/docs/introducing-jsx.html",target:"_blank",rel:"noopener noreferrer"},N=p(`<h3 id="ä»€ä¹ˆæ˜¯jsx" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯jsx" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯JSX</h3><ul><li>Facebookèµ·è‰çš„JSæ‰©å±•è¯­æ³•</li><li>æœ¬è´¨æ˜¯ä¸€ä¸ªJSå¯¹è±¡ï¼Œä¼šè¢«babelç¼–è¯‘ï¼Œæœ€ç»ˆä¼šè¢«è½¬æ¢ä¸ºReact.createElement <ul><li>**&lt;<strong>script type=&quot;text/babel&quot;</strong>&gt;&lt;/<strong>script</strong>&gt; **å‘Šè¯‰æµè§ˆå™¨äº¤ç»™babelè½¬è¯‘</li><li>ç›´æ¥ä¹¦å†™htmlæ ¼å¼çš„è¡¨è¾¾å¼<code>const span = &lt;span&gt;ä¸€ä¸ªspanå…ƒç´ &lt;/span&gt;</code></li></ul></li><li>æ¯ä¸ªJSXè¡¨è¾¾å¼ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ <ul><li>React.Fragment ç©ºèŠ‚ç‚¹ &lt;React.Fragment&gt;&lt;/React.Fragment&gt; å¯ä»¥çœç•¥ä¸º&lt;&gt;&lt;/&gt;</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// åˆ›å»ºç©ºçš„æ ¹ç»“ç‚¹</span>
<span class="token keyword">const</span> h1 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> // è¯­æ³•ç³–ï¼ŒçœŸå®çš„å†™æ³•æ˜¯ &lt;React.Fragment&gt;&lt;/React.Fragment&gt;
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hellow world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hi</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ¯ä¸ªJSXå…ƒç´ å¿…é¡»æœ‰ç»“æŸâ€˜/â€™ï¼ˆXMLè§„èŒƒï¼‰</li><li>åœ¨ React ä¸­é…åˆä½¿ç”¨ï¼Œ å¯ä»¥å¾ˆå¥½åœ°æè¿° UI åº”è¯¥å‘ˆç°å‡ºå®ƒåº”æœ‰äº¤äº’çš„æœ¬è´¨å½¢å¼ï¼Œå…·æœ‰ JavaScript çš„å…¨éƒ¨åŠŸèƒ½</li><li><strong>å‡¡æ˜¯ä½¿ç”¨JSXçš„æ–‡ä»¶ï¼Œå¿…é¡»å¯¼å…¥React</strong></li><li>JSXä¸­å¯ä»¥åµŒå…¥jsè¡¨è¾¾å¼ï¼ŒåŠ å¤§æ‹¬å·å°±è¡Œ</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">5678</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> div <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>a<span class="token punctuation">}</span><span class="token plain-text"> * </span><span class="token punctuation">{</span>b<span class="token punctuation">}</span><span class="token plain-text"> = </span><span class="token punctuation">{</span>a <span class="token operator">*</span> b<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
<span class="token keyword">const</span> div <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> * </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>a<span class="token operator">*</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åœ¨jsxä¸­åµŒå…¥è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#åœ¨jsxä¸­åµŒå…¥è¡¨è¾¾å¼" aria-hidden="true">#</a> åœ¨JSXä¸­åµŒå…¥è¡¨è¾¾å¼</h3><ul><li>å˜é‡å’Œè¡¨è¾¾å¼ä½¿ç”¨{}åŒ…ä½</li><li>åœ¨JSXä¸­ä½¿ç”¨æ³¨é‡Šï¼Œä½¿ç”¨<code>{/*æ³¨é‡Šå†…å®¹*/}</code></li><li>è¡¨è¾¾å¼å¯ä»¥ä½œä¸ºå†…å®¹çš„ä¸€éƒ¨åˆ† <ul><li>nullã€undefinedã€falseä¸ä¼šæ˜¾ç¤º</li><li>æ™®é€šå¯¹è±¡ï¼Œä¸å¯ä»¥ä½œä¸ºå­å…ƒç´ </li><li>å¯ä»¥æ”¾ç½®Reactå…ƒç´ å¯¹è±¡</li><li>å¯ä»¥æ”¾ç½®æ•°ç»„ï¼Œä½†æ˜¯æ•°ç»„ä¸­ä¸èƒ½æœ‰æ™®é€šå¯¹è±¡</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
numbers<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> lis <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// éœ€è¦åŠ key</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¡¨è¾¾å¼å¯ä»¥ä½œä¸ºå…ƒç´ å±æ€§</li><li>å±æ€§ä½¿ç”¨å°é©¼å³°å‘½åæ³•</li><li>é˜²æ­¢æ³¨å…¥æ”»å‡» <ul><li>è‡ªåŠ¨ç¼–ç </li><li>dangerouslySetInnerHTML // ä½¿ç”¨è¯¥ç§æ–¹å¼ä¸å®‰å…¨ï¼Œä»£ç å±‚é¢æ•…æ„æ¯”è¾ƒå¤æ‚</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token string">&#39;&lt;h1&gt;ä¸€çº§æ ‡é¢˜&lt;/h1&gt;&#39;</span>
<span class="token keyword">const</span> div <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">dangerouslySetInnerHTML</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
    <span class="token literal-property property">__html</span><span class="token operator">:</span> content
<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å…ƒç´ çš„ä¸å¯å˜æ€§" tabindex="-1"><a class="header-anchor" href="#å…ƒç´ çš„ä¸å¯å˜æ€§" aria-hidden="true">#</a> å…ƒç´ çš„ä¸å¯å˜æ€§</h3><ul><li>è™½ç„¶JSXå…ƒç´ æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¯¥å¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ä¸å¯æ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯JSXå…ƒç´ ä¸€æ—¦åˆ›å»ºä¸å¯ä¿®æ”¹</li><li>å¦‚æœç¡®å®éœ€è¦æ›´æ”¹å…ƒç´ çš„å±æ€§ï¼Œéœ€è¦é‡æ–°åˆ›å»ºJSXå…ƒç´ </li></ul><h2 id="ä½¿ç”¨reactè„šæ‰‹æ¶æ­å»ºå·¥ç¨‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨reactè„šæ‰‹æ¶æ­å»ºå·¥ç¨‹" aria-hidden="true">#</a> ä½¿ç”¨Reactè„šæ‰‹æ¶æ­å»ºå·¥ç¨‹</h2><p>å®˜æ–¹ï¼šcreate-react-app ç¬¬ä¸‰æ–¹ï¼šnext.jsã€umijs</p><ul><li>create-react-appï¼š yarn create react-app &#39;æ–‡ä»¶name&#39;</li></ul><h2 id="vscodeæ’ä»¶å®‰è£…" tabindex="-1"><a class="header-anchor" href="#vscodeæ’ä»¶å®‰è£…" aria-hidden="true">#</a> VSCodeæ’ä»¶å®‰è£…</h2><ul><li>ESLintï¼šä»£ç é£æ ¼æ£€æŸ¥</li><li>ES7 React/Redux/GraphQL/React-Native snippetsï¼šå¿«é€Ÿä»£ç ç¼–å†™</li></ul><h2 id="chromeæ’ä»¶å®‰è£…" tabindex="-1"><a class="header-anchor" href="#chromeæ’ä»¶å®‰è£…" aria-hidden="true">#</a> Chromeæ’ä»¶å®‰è£…</h2><ul><li>React Developer Tools</li></ul><h2 id="react-çš„-api" tabindex="-1"><a class="header-anchor" href="#react-çš„-api" aria-hidden="true">#</a> React çš„ API</h2><p>ç›´æ¥åœ¨é¡µé¢ä¸Šä½¿ç”¨Reactï¼Œå¼•ç”¨ä¸‹é¢çš„JS</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">crossorigin</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/react@16/umd/react.development.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">crossorigin</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/react-dom@16/umd/react-dom.development.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">crossorigin</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/babel-standalone@6/babel.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
// crossorigin çš„ä½œç”¨æ˜¯æŠ¥é”™æ—¶ç²¾å‡†å®šä½æ˜¯é“¾æ¥çš„jsçš„é—®é¢˜
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="react-createelement" tabindex="-1"><a class="header-anchor" href="#react-createelement" aria-hidden="true">#</a> React.createElement</h3><p>åˆ›å»ºä¸€ä¸ªReactå…ƒç´ ï¼Œç§°ä½œè™šæ‹ŸDOMï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡</p><ul><li>å‚æ•°1ï¼šå…ƒç´ ç±»å‹ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ™®é€šçš„HTMLå…ƒç´ </li><li>å‚æ•°2ï¼šå…ƒç´ çš„å±æ€§ï¼Œä¸€ä¸ªå¯¹è±¡</li><li>åç»­å‚æ•°ï¼šå…ƒç´ çš„å­èŠ‚ç‚¹</li></ul><h3 id="reactdom-render" tabindex="-1"><a class="header-anchor" href="#reactdom-render" aria-hidden="true">#</a> ReactDOM.render</h3><ul><li>æ¸²æŸ“dom <ul><li>å‚æ•°1æ˜¯è™šæ‹Ÿå…ƒç´ </li><li>å‚æ•°2æ˜¯ç»‘å®šçš„æ ¹ç»“ç‚¹</li></ul></li><li>å†…éƒ¨åšäº†ä¼˜åŒ–ï¼Œæ¯æ¬¡æ¸²æŸ“çš„è™šæ‹Ÿdomå¯¹è±¡æ•°æ®å˜åŒ–éƒ½æ˜¯æ›´æ”¹ä¿®æ”¹çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯å°½å¯èƒ½çš„ä¸åˆ é™¤é‡æ–°åˆ›å»ºdom</li></ul><h2 id="reactä¸­çš„å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#reactä¸­çš„å…ƒç´ " aria-hidden="true">#</a> Reactä¸­çš„å…ƒç´ </h2><ul><li>React å…ƒç´ ï¼šReact å°è£…å¥½çš„å†…éƒ¨å…ƒç´  divã€spanã€pã€h1 ç­‰ç­‰</li><li>ç»„ä»¶å…ƒç´ </li></ul><h2 id="ç»„ä»¶å’Œç»„ä»¶å±æ€§" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶å’Œç»„ä»¶å±æ€§" aria-hidden="true">#</a> ç»„ä»¶å’Œç»„ä»¶å±æ€§</h2><p>ç»„ä»¶ï¼šåŒ…å«å†…å®¹ã€æ ·å¼å’ŒåŠŸèƒ½çš„UIå•å…ƒ <strong>ç‰¹åˆ«æ³¨æ„ï¼šç»„ä»¶çš„åç§°é¦–å­—æ¯å¿…é¡»å¤§å†™</strong></p><ul><li><strong>é¦–å­—æ¯å°å†™ä¼šè¢«å½“ä½œæ™®é€šå…ƒç´ </strong></li><li><strong>ç»„ä»¶çš„ç±»å‹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œtypeå€¼ä¼šå˜åŒ–</strong></li></ul><h3 id="å‡½æ•°ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°ç»„ä»¶" aria-hidden="true">#</a> å‡½æ•°ç»„ä»¶</h3><ul><li>è¿”å›ä¸€ä¸ªReactå…ƒç´ ï¼Œè¿”å›ä¸€ä¸ª React.createElement æˆ–JSX</li><li>å¯ä»¥è¿”å›nullï¼Œç»„ä»¶ç»“æ„æ¸²æŸ“ä½†ä¸æ˜¾ç¤ºå†…å®¹</li></ul><h3 id="ç±»ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#ç±»ç»„ä»¶" aria-hidden="true">#</a> ç±»ç»„ä»¶</h3><ul><li>å¿…é¡»ç»§æ‰¿React.Component</li><li>å¿…é¡»æä¾›renderå‡½æ•°ï¼Œç”¨äºæ¸²æŸ“ç»„ä»¶</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">myClassComp</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * è¯¥æ–¹æ³•å¿…é¡»è¿”å›Reactå…ƒç´ 
     * */</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ç±»ç»„ä»¶çš„å†…å®¹</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç»„ä»¶çš„å±æ€§-props" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶çš„å±æ€§-props" aria-hidden="true">#</a> ç»„ä»¶çš„å±æ€§ props</h3><ul><li>å¯¹äºå‡½æ•°ç»„ä»¶ï¼Œå±æ€§ä¼šä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¼ é€’ç»™å‡½æ•°çš„å‚æ•°</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>ui<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ç”¨æˆ·ä¼ å…¥çš„å±æ€§</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>numbers<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>ui<span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å‡½æ•°ç»„ä»¶å†…å®¹: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>numbers<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
<span class="token comment">// =============================</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyTestOne</span></span> <span class="token attr-name">numbers</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>20<span class="token punctuation">&#39;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyTestOne</span></span> <span class="token attr-name">numbers</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">40</span><span class="token punctuation">}</span></span> <span class="token attr-name">ui</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">è¿™æ˜¯æˆ‘ä¼ é€’çš„å±æ€§</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¯¹äºç±»ç»„ä»¶ï¼Œå±æ€§ä¼šä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¼ é€’ç»™æ„é€ å‡½æ•°çš„å‚æ•°</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">myClassComp</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * å¿…é¡»æä¾›renderæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¿…é¡»è¿”å›Reactå…ƒç´ 
     * */</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ç±»ç»„ä»¶çš„å†…å®¹: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// =================</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyClassComp</span></span> <span class="token attr-name">enable</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span> <span class="token attr-name">obj</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³¨æ„ï¼šç»„ä»¶çš„å±æ€§ï¼Œåº”è¯¥ä½¿ç”¨å°é©¼å³°å‘½åæ³•</li><li><strong>ç»„ä»¶æ— æ³•æ”¹å˜è‡ªèº«çš„å±æ€§</strong></li><li>ä¹‹å‰å­¦ä¹ çš„Reactå…ƒç´ ï¼Œæœ¬è´¨ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼ˆå†…ç½®ç»„ä»¶ï¼‰</li></ul><p><strong>Reactä¸­çš„æ ¹æœ¬å“²å­¦ï¼šæ•°æ®å±äºè°ï¼Œè°æ‰æœ‰æƒåŠ›æ”¹åŠ¨ï¼Œä¹Ÿå°±æ˜¯ä¼ å…¥ç»„ä»¶å†…çš„æ•°æ®ä¸å…è®¸ä¿®æ”¹ï¼Œè™½ç„¶å¯¹è±¡å†…çš„æ•°æ®å¯ä»¥ä¿®æ”¹ï¼ˆReactç›‘æ§ä¸åˆ°ï¼‰ï¼Œä½†æ˜¯å»ºè®®ä¸è¦è¿™æ ·åšï¼Œå¾ˆéš¾ç»´æŠ¤</strong><strong>Reactä¸­çš„æ•°æ®ï¼Œè‡ªé¡¶è€Œä¸‹æµåŠ¨ï¼Œå•å‘æ•°æ®æµï¼Œç»“æ„ååˆ†æ¸…æ™°</strong></p><h2 id="ç»„ä»¶çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶çŠ¶æ€" aria-hidden="true">#</a> ç»„ä»¶çŠ¶æ€</h2><ul><li>ç»„ä»¶çŠ¶æ€ï¼šå°±æ˜¯ç»„ä»¶å¯ä»¥è‡ªè¡Œç»´æŠ¤çš„æ•°æ®ï¼Œç»„ä»¶è‡ªå·±çš„æ•°æ®</li><li>ç»„ä»¶çŠ¶æ€ä»…åœ¨ç±»ç»„ä»¶ä¸­æœ‰æ•ˆï¼Œå‡½æ•°ç»„ä»¶ä¹Ÿèƒ½ç”¨ï¼Œéœ€è¦é’©å­ï¼Œåè¾¹å­¦</li></ul><h3 id="çŠ¶æ€-state" tabindex="-1"><a class="header-anchor" href="#çŠ¶æ€-state" aria-hidden="true">#</a> çŠ¶æ€ï¼ˆstateï¼‰</h3><p>æœ¬è´¨ä¸Šæ˜¯ç±»ç»„ä»¶çš„ä¸€ä¸ªå±æ€§ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡</p><h4 id="çŠ¶æ€åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#çŠ¶æ€åˆå§‹åŒ–" aria-hidden="true">#</a> çŠ¶æ€åˆå§‹åŒ–</h4><ul><li>æ„é€ å‡½æ•°ä¸­è¿›è¡Œåˆå§‹åŒ–<code>this.state= { data: this.props.data }</code></li></ul><h4 id="çŠ¶æ€çš„å˜åŒ–" tabindex="-1"><a class="header-anchor" href="#çŠ¶æ€çš„å˜åŒ–" aria-hidden="true">#</a> çŠ¶æ€çš„å˜åŒ–</h4><ul><li><strong>ä¸èƒ½ç›´æ¥æ”¹å˜çŠ¶æ€ï¼šå› ä¸ºReactæ— æ³•ç›‘æ§åˆ°çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–</strong></li><li><strong>å¿…é¡»ä½¿ç”¨ this.setState({}) æ”¹å˜çŠ¶æ€</strong><ul><li><strong>this.setState({}) ä¼šé‡æ–°è®¾ç½®ç»„ä»¶çŠ¶æ€ï¼Œå¹¶è‡ªåŠ¨è§¦å‘é‡æ–°æ¸²æŸ“</strong></li><li><strong>æœ¬è´¨ä¸Šæ˜¯å¯¹ç»„ä»¶çŠ¶æ€çš„æ•°æ®æ··åˆï¼ŒçŠ¶æ€ä¸­æœ‰çš„æ•°æ®è¿›è¡Œè¦†ç›–ï¼Œæ²¡æœ‰çš„è¿›è¡Œå¢åŠ </strong><ul><li><code>this.setState({ data: this.state.data - 1, newData: newData })</code></li></ul></li></ul></li><li><strong>ä¸€æ—¦è°ƒç”¨äº† this.setStateï¼Œå°±ä¼šå¯¼è‡´å½“å‰ç»„ä»¶é‡æ–°æ¸²æŸ“</strong></li></ul><h2 id="ç»„ä»¶ä¸­çš„æ•°æ®" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶ä¸­çš„æ•°æ®" aria-hidden="true">#</a> ç»„ä»¶ä¸­çš„æ•°æ®</h2><ul><li>propsï¼šè¯¥æ•°æ®æ˜¯ç”±ç»„ä»¶çš„ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®ï¼Œæ‰€æœ‰æƒä¸å±äºç»„ä»¶è‡ªèº«ï¼Œå› æ­¤ç»„ä»¶æ— æ³•æ”¹å˜è¯¥æ•°æ®</li><li>stateï¼šè¯¥æ•°ç»„æ˜¯ç”±ç»„ä»¶è‡ªèº«åˆ›å»ºçš„ï¼Œæ‰€æœ‰æƒå±äºç»„ä»¶è‡ªèº«ï¼Œå› æ­¤ç»„ä»¶æœ‰æƒæ”¹å˜è¯¥æ•°æ®</li></ul><h2 id="äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#äº‹ä»¶" aria-hidden="true">#</a> äº‹ä»¶</h2><ul><li>åœ¨Reactä¸­ï¼Œç»„ä»¶çš„äº‹ä»¶ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå±æ€§ï¼Œç»„ä»¶å†…é€šè¿‡propsæ‹¿åˆ°åè°ƒç”¨</li><li>æŒ‰ç…§ä¹‹å‰Reactå¯¹ç»„ä»¶çš„çº¦å®šï¼Œ<strong>ç”±äºäº‹ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå±æ€§ï¼Œå› æ­¤ä¹Ÿéœ€è¦ä½¿ç”¨å°é©¼å³°å‘½åæ³•</strong></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ç‚¹å‡»äº†&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æŒ‰é’®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">// ================</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ç‚¹å‡»äº†&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æŒ‰é’®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>å¦‚æœæ²¡æœ‰ç‰¹æ®Šå¤„ç†ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼ŒthisæŒ‡å‘undefined</strong><ul><li>ä½¿ç”¨bindå‡½æ•°ï¼Œç»‘å®šthis</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ç‚¹å‡»äº†&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯¹è±¡ä¸Šæœ‰å½“å‰å‡½æ•°ï¼ŒåŸå‹ä¸Šä¹Ÿæœ‰å½“å‰å‡½æ•°</span>
<span class="token comment">// or</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æŒ‰é’®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">// ä¸å»ºè®®è¿™æ ·åšï¼Œä¼šæœ‰æ•ˆç‡é—®é¢˜ï¼Œå› ä¸ºæ¯æ¬¡ç»‘å®šthiséƒ½æ˜¯åˆ›å»ºæ–°å‡½æ•°çš„ä¸€æ¬¡è¿‡ç¨‹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå»ºè®®ä½¿ç”¨</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// js next è¯­æ³•ï¼Œå¯ä»¥ä½¿ç”¨ï¼Œbabelä¼šç¼–è¯‘ï¼Œæ•ˆç‡æ›´é«˜ï¼Œåªæœ‰å¯¹è±¡ä¸Šæœ‰å½“å‰å‡½æ•°ï¼ŒåŸå‹ä¸Šæ²¡æœ‰</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ç‚¹å‡»äº†&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// or</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// ä¸å»ºè®®è¿™æ ·åšï¼Œä¼šå¯¼è‡´ render ä¸­çš„ä»£ç å¤ªå¤æ‚ï¼Œä¸æ–¹ä¾¿é˜…è¯»ç»´æŠ¤</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ç‚¹å‡»äº†&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æŒ‰é’®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ·±å…¥è®¤è¯†setstate" tabindex="-1"><a class="header-anchor" href="#æ·±å…¥è®¤è¯†setstate" aria-hidden="true">#</a> æ·±å…¥è®¤è¯†setState</h2><ul><li>setStateï¼Œæ¥è‡ªäºçˆ¶ç±»ï¼Œå®ƒå¯¹çŠ¶æ€çš„æ”¹å˜ï¼Œ<strong>å¯èƒ½</strong>æ˜¯å¼‚æ­¥çš„ <ul><li><strong>å¦‚æœæ”¹å˜çŠ¶æ€çš„ä»£ç å¤„äºæŸä¸ªHTMLå…ƒç´ çš„äº‹ä»¶ä¸­ï¼Œåˆ™å…¶æ˜¯å¼‚æ­¥çš„ï¼Œå¦åˆ™æ˜¯åŒæ­¥</strong></li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">20</span>
  <span class="token punctuation">}</span>
<span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// å›è°ƒå‡½æ•°ï¼ŒçŠ¶æ€å®Œæˆæ”¹å˜ä¹‹åè§¦å‘ï¼Œè¿è¡Œåœ¨å›è°ƒä¹‹å</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span> <span class="token comment">// å…ˆæ‰“å°è¿™ä¸ª</span>
<span class="token punctuation">}</span>
<span class="token comment">// HTMLå…ƒç´ äº‹ä»¶</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;é‡æ–°æ¸²æŸ“&#39;</span><span class="token punctuation">)</span> <span class="token comment">// å†æ‰“å°è¿™ä¸ªï¼Œæ­¤æ—¶stateä¸­çš„çŠ¶æ€è¿˜æœªæ”¹å˜</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                æŒ‰é’®
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">20</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// éHTMLå…ƒç´ äº‹ä»¶</span>
        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span> <span class="token comment">// å†æ‰“å°è¿™ä¸ªï¼Œä¸ä¿¡ä½ è‡ªå·±è¯•è¯•ï¼ŒğŸ¤¨ï¼Œå±å®ğŸ®</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;é‡æ–°æ¸²æŸ“&#39;</span><span class="token punctuation">)</span> <span class="token comment">// æ­¤æ—¶stateä¸­çš„çŠ¶æ€å·²ç»æ”¹å˜ï¼Œå…ˆæ‰“å°è¿™ä¸ª</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    æŒ‰é’®
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¦‚æœé‡åˆ°æŸä¸ªäº‹ä»¶ä¸­ï¼Œéœ€è¦åŒæ­¥è°ƒç”¨å¤šæ¬¡ï¼Œéœ€è¦ä½¿ç”¨å‡½æ•°çš„æ–¹å¼å¾—åˆ°æœ€æ–°çŠ¶æ€</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prev</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// å‚æ•° prev è¡¨ç¤ºå½“å‰çš„çŠ¶æ€</span>
  <span class="token comment">// è¯¥å‡½æ•°çš„è¿”å›ç»“æœï¼Œä¼šæ··åˆï¼ˆè¦†ç›–ï¼‰æ‰ä¹‹å‰çš„çŠ¶æ€</span>
  <span class="token comment">// è¯¥å‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œæ”¾åœ¨äº†ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œæ‰§è¡Œå®Œä¸€ä¸ªå†æ‰§è¡Œä¸€ä¸ª</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">number</span><span class="token operator">:</span> prev<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prev</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">number</span><span class="token operator">:</span> prev<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prev</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">number</span><span class="token operator">:</span> prev<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ä»¥ä¸Šä»£ç  runder å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³å®è·µ" aria-hidden="true">#</a> æœ€ä½³å®è·µ</h3><ul><li>æŠŠæ‰€æœ‰çš„ setState å½“ä½œæ˜¯å¼‚æ­¥çš„</li><li>æ°¸è¿œä¸è¦ä¿¡ä»» setState è°ƒç”¨ä¹‹åçš„çŠ¶æ€</li><li>å¦‚æœè¦ä½¿ç”¨æ”¹å˜ä¹‹åçš„çŠ¶æ€ï¼Œéœ€è¦ä½¿ç”¨å›è°ƒå‡½æ•°ï¼ˆsetStateçš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰</li><li>å¦‚æœæ–°çš„çŠ¶æ€è¦æ ¹æ®ä¹‹å‰çš„çŠ¶æ€è¿›è¡Œè¿ç®—ï¼Œä½¿ç”¨å‡½æ•°çš„æ–¹å¼æ”¹å˜çŠ¶æ€ï¼ˆsetStateçš„ç¬¬ä¸€ä¸ªå‡½æ•°ï¼‰</li><li>React ä¼šå¯¹å¼‚æ­¥çš„ setState è¿›è¡Œä¼˜åŒ–ï¼Œå°†å¤šæ¬¡ setState è¿›è¡Œåˆå¹¶ï¼ˆå°†å¤šæ¬¡çŠ¶æ€æ”¹å˜å®Œæˆåï¼Œå†ç»Ÿä¸€å¯¹ state è¿›è¡Œæ”¹å˜ï¼Œç„¶åè§¦å‘ renderï¼‰</li></ul><h2 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> ç”Ÿå‘½å‘¨æœŸ</h2><p>ç”Ÿå‘½å‘¨æœŸï¼šç»„ä»¶ä»è¯ç”Ÿåˆ°é”€æ¯ä¼šç»å†ä¸€ç³»åˆ—çš„è¿‡ç¨‹ï¼Œè¯¥è¿‡ç¨‹å°±å«åšç”Ÿå‘½å‘¨æœŸã€‚Reactåœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­æä¾›äº†ä¸€ç³»åˆ—çš„é’©å­å‡½æ•°ï¼ˆç±»ä¼¼äºäº‹ä»¶ï¼‰ï¼Œå¯ä»¥è®©å¼€å‘è€…åœ¨å‡½æ•°ä¸­æ³¨å…¥ä»£ç ï¼Œè¿™äº›ä»£ç ä¼šåœ¨é€‚å½“çš„æ—¶å€™è¿è¡Œã€‚ <strong>ç”Ÿå‘½å‘¨æœŸä»…å­˜åœ¨äºç±»ç»„ä»¶ä¸­ï¼Œå‡½æ•°ç»„ä»¶æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯é‡æ–°è¿è¡Œå‡½æ•°ï¼Œæ—§çš„ç»„ä»¶å³åˆ»è¢«é”€æ¯ï¼Œç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ã€‚</strong></p><h3 id="æ—§ç‰ˆç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#æ—§ç‰ˆç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> æ—§ç‰ˆç”Ÿå‘½å‘¨æœŸ</h3><p><strong>React &lt; 16.0.0</strong><img src="`+r+`" alt="image.png"></p><ol><li>constructor æ„é€ å‡½æ•° åˆå§‹åŒ–é˜¶æ®µ <ol><li>åŒä¸€ä¸ªç»„ä»¶å¯¹è±¡åªä¼šåˆ›å»ºä¸€æ¬¡</li><li>ä¸èƒ½åœ¨ç¬¬ä¸€æ¬¡æŒ‚è½½åˆ°é¡µé¢ä¹‹å‰ï¼Œè°ƒç”¨setStateï¼Œä¸ºäº†é¿å…é—®é¢˜ï¼Œæ„é€ å‡½æ•°ä¸­ä¸¥ç¦ä½¿ç”¨setState</li></ol></li><li>componentWillMount åˆå§‹åŒ–æŒ‚è½½å®Œæˆ <ol><li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå’Œæ„é€ å‡½æ•°ä¸€æ ·ï¼Œå®ƒåªä¼šè¿è¡Œä¸€æ¬¡</li><li>å¯ä»¥ä½¿ç”¨setStateï¼Œä½†æ˜¯ä¸ºäº†é¿å…bugï¼Œä¸å…è®¸ä½¿ç”¨ï¼Œå› ä¸ºåœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œè¯¥å‡½æ•°å¯èƒ½è¢«è°ƒç”¨å¤šæ¬¡ï¼Œå¯èƒ½ä¼šåœ¨æ²¡æœ‰æŒ‚è½½å®Œçš„æ—¶å€™è¢«æ‰“æ–­é‡æ–°æŒ‚è½½</li></ol></li><li><strong>render</strong><ol><li>è¿”å›ä¸€ä¸ªè™šæ‹ŸDOMï¼Œä¼šè¢«æŒ‚è½½åˆ°è™šæ‹ŸDOMæ ‘ä¸­ï¼Œæœ€ç»ˆæ¸²æŸ“åˆ°é¡µé¢çš„çœŸå®DOMä¸­</li><li>renderå¯èƒ½ä¸åªè¿è¡Œä¸€æ¬¡ï¼Œåªè¦éœ€è¦é‡æ–°æ¸²æŸ“ï¼Œå°±ä¼šé‡æ–°è¿è¡Œ</li><li>å¯ä»¥ä½¿ç”¨setStateï¼Œä½†æ˜¯ä¸ºäº†é¿å…bugï¼Œä¸¥ç¦ä½¿ç”¨setStateï¼Œå› ä¸ºå¯èƒ½ä¼šå¯¼è‡´æ— é™é€’å½’æ¸²æŸ“</li></ol></li><li><strong>componentDidMount æ›´æ–°æŒ‚è½½å®Œæˆï¼Œè¿›å…¥æ›´æ–°é˜¶æ®µï¼Œè¶…çº§å¸¸ç”¨</strong><ol><li>åªä¼šæ‰§è¡Œä¸€æ¬¡</li><li>å¯ä»¥ä½¿ç”¨setState</li><li>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¼šå°†ç½‘ç»œè¯·æ±‚ã€å¯åŠ¨è®¡æ—¶å™¨ç­‰ä¸€å¼€å§‹éœ€è¦çš„æ“ä½œï¼Œä¹¦å†™åˆ°è¯¥å‡½æ•°ä¸­</li></ol></li><li>ç»„ä»¶è¿›å…¥æ´»è·ƒçŠ¶æ€</li><li>componentWillReceiveProps <ol><li>å³å°†æ¥æ”¶æ–°çš„å±æ€§å€¼</li><li>å‚æ•°ä¸ºæ–°çš„å±æ€§å¯¹è±¡</li><li>è¯¥å‡½æ•°å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›bugï¼Œæ‰€ä»¥ä¸æ¨èä½¿ç”¨</li></ol></li><li><strong>shouldComponentUpdate</strong><ol><li>å¯ä»¥åšæ€§èƒ½ä¼˜åŒ–ï¼ŒæŒ‡ç¤ºReactæ˜¯å¦è¦é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶ï¼Œé€šè¿‡è¿”å›trueå’Œfalseæ¥æŒ‡å®š</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šç›´æ¥è¿”å›true</li></ol></li><li>componentWillUpdate <ol><li>ç»„ä»¶å³å°†è¢«é‡æ–°æ¸²æŸ“ï¼Œæ²¡å•¥ç”¨çš„æ„Ÿè§‰</li></ol></li><li>componentDidUpdate <ol><li>å·²ç»å®Œæˆç»„ä»¶æ¸²æŸ“</li><li>å¾€å¾€åœ¨è¯¥å‡½æ•°ä¸­ä½¿ç”¨domæ“ä½œï¼Œæ”¹å˜å…ƒç´ </li></ol></li><li><strong>componentWillUnmount é”€æ¯é˜¶æ®µ</strong></li><li>é€šå¸¸åœ¨è¯¥å‡½æ•°ä¸­é”€æ¯ä¸€äº›ç»„ä»¶ä¾èµ–çš„èµ„æºï¼Œæ¯”å¦‚è®¡æ—¶å™¨</li></ol><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åˆå§‹åŒ–é˜¶æ®µ</span>
  <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;constructor&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸€ä¸ªæ–°çš„ç»„ä»¶è¯ç”Ÿäº†ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å³å°†æŒ‚è½½</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;componentWillMount&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç»„ä»¶å³å°†è¢«æŒ‚è½½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æŒ‚è½½å®Œæˆ</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;componentDidMount&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æŒ‚è½½å®Œæˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ¥æ”¶åˆ°æ–°çš„å±æ€§å€¼</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;componentWillReceiveProps&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ¥æ”¶åˆ°æ–°çš„å±æ€§å€¼&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> nextProps<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ€§èƒ½ä¼˜åŒ–ï¼Œæ˜¯å¦é‡æ–°æ¸²æŸ“</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;shouldComponentUpdate&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ˜¯å¦åº”è¯¥é‡æ–°æ¸²æŸ“&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> nextProps<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> nextState<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>n <span class="token operator">===</span> nextProps<span class="token punctuation">.</span>n <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>n <span class="token operator">===</span> nextState<span class="token punctuation">.</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token comment">// return false;</span>
<span class="token punctuation">}</span>
<span class="token function">componentWillUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å³å°†é‡æ–°æ¸²æŸ“ï¼Œæ²¡å•¥ç”¨çš„æ„Ÿè§‰</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;componentWillUpdate&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç»„ä»¶å³å°†è¢«é‡æ–°æ¸²æŸ“&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// é‡æ–°æ¸²æŸ“å®Œæˆ</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;componentDidUpdate&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç»„ä»¶å·²å®Œæˆé‡æ–°æ¸²æŸ“&quot;</span><span class="token punctuation">,</span> prevProps<span class="token punctuation">,</span> prevState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ç»„ä»¶é”€æ¯</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;componentWillUnmount&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç»„ä»¶è¢«é”€æ¯&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ¸²æŸ“</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ¸²æŸ“ï¼Œè¿”å›çš„Reactå…ƒç´ ä¼šè¢«æŒ‚è½½åˆ°è™šæ‹ŸDOMæ ‘ä¸­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ—§ç‰ˆç”Ÿå‘½å‘¨æœŸç»„ä»¶</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å±æ€§n: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>n<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">çŠ¶æ€nï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>n<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>n <span class="token operator">+</span> <span class="token number">1</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">çŠ¶æ€n+1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–°ç‰ˆç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#æ–°ç‰ˆç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> æ–°ç‰ˆç”Ÿå‘½å‘¨æœŸ</h3><p><strong>React &gt;= 16.0.0</strong><img src="`+k+`" alt="image.png"> ä¸»è¦å˜åŒ–åœ¨æŒ‚è½½é˜¶æ®µå’Œæ›´æ–°é˜¶æ®µ</p><ul><li>æŒ‚è½½é˜¶æ®µå˜åŒ– <ul><li>ç§»é™¤å¯èƒ½ä¼šå¤šæ¬¡è¿è¡Œçš„ componentWillMount å‡½æ•°</li><li>å¢åŠ  getDerivedStateFromProps å‡½æ•°</li></ul></li><li>æ›´æ–°é˜¶æ®µå˜åŒ– <ul><li>ç§»é™¤å®¹æ˜“å‡ºé—®é¢˜çš„ componentWillReceiveProps å‡½æ•° <ul><li>åæ¨¡å¼è¡Œä¸º <ul><li>å­ç»„ä»¶çŠ¶æ€åˆå§‹å€¼æ˜¯çˆ¶ç»„ä»¶ä¼ é€’çš„å±æ€§å€¼</li><li>æ”¿æ­£å¸¸æ¥è¯´å­ç»„ä»¶çŠ¶æ€çš„å€¼åªèƒ½åœ¨å­ç»„ä»¶ä¿®æ”¹</li><li>ä½†æ˜¯çˆ¶ç»„ä»¶ä¸­ä¿®æ”¹å±æ€§å€¼åï¼Œå¯ä»¥é€šè¿‡ componentWillReceiveProps å‡½æ•°ï¼Œåœ¨å­ç»„ä»¶å†…ç›‘æ§å±æ€§å€¼çš„å˜åŒ–ï¼Œç„¶åè°ƒç”¨ setState ä¿®æ”¹çŠ¶æ€å€¼</li><li>éå¸¸å®¹æ˜“é€ æˆ bug</li><li>æ•°æ®åº”è¯¥å’ŒçŠ¶æ€æˆ–å±æ€§ä¿æŒä¸€è‡´ï¼Œæ•°æ®æ¥æºå¿…é¡»æ˜¯å•ä¸€çš„ï¼Œè¿™æ ·ä¸ React çš„æ¨¡å¼ç›¸å</li></ul></li></ul></li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">number</span><span class="token operator">:</span> nextProps<span class="token punctuation">.</span>number
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¢åŠ  getDerivedStateFromProps å‡½æ•°</li><li>å±æ€§å’ŒçŠ¶æ€å˜åŒ–åéƒ½æ˜¯ç›´æ¥è¿è¡Œ getDerivedStateFromProps å‡½æ•°</li><li>ç§»é™¤æ²¡å•¥ç”¨çš„ componentWillUpdate å‡½æ•°</li><li>å¢åŠ  getSnapshotBeforeUpdate å‡½æ•°ï¼Œåœ¨ render ä¹‹åæŒ‚è½½å®Œæˆä¹‹å‰è¿è¡Œ</li></ul><p>Reactå®˜æ–¹è®¤ä¸ºï¼ŒæŸä¸ªæ•°æ®çš„æ¥æºå¿…é¡»æ˜¯å•ä¸€çš„</p><ol><li>getDerivedStateFromProps è·å–æ›´æ–°çš„å±æ€§å’ŒçŠ¶æ€ <ol><li>ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å±æ€§ propsï¼Œç¬¬äºŒä¸ªæ˜¯çŠ¶æ€ state</li><li>é€šè¿‡å‚æ•°å¯ä»¥è·å–æ–°çš„å±æ€§å’ŒçŠ¶æ€</li><li>è¯¥å‡½æ•°æ˜¯é™æ€çš„ï¼Œä¿®æ”¹äº† this æŒ‡å‘ï¼ŒæŒ‡å‘ constructor æ„é€ å‡½æ•°</li><li>è¯¥å‡½æ•°çš„å¿…é¡»å¾—æœ‰è¿”å›å€¼ï¼Œä¸”è¿”å›å€¼ä¼šè¦†ç›–æ‰ç»„ä»¶çŠ¶æ€</li><li>è¯¥å‡½æ•°å‡ ä¹æ²¡æœ‰ä»€ä¹ˆç”¨</li></ol></li><li>getSnapshotBeforeUpdate è·å–æŒ‚è½½æ›´æ–°å‰çš„å¿«ç…§ï¼ˆå±æ€§å’ŒçŠ¶æ€ï¼‰ <ol><li>çœŸå®çš„DOMæ„å»ºå®Œæˆï¼Œä½†è¿˜æœªå®é™…æ¸²æŸ“åˆ°é¡µé¢ä¸­</li><li>åœ¨è¯¥å‡½æ•°ä¸­ï¼Œé€šå¸¸ç”¨äºå®ç°ä¸€äº›é™„åŠ çš„domæ“ä½œï¼Œæ¯”å¦‚æ·»åŠ ä¸€äº›åŠ¨ç”»æˆ–è€…æ§åˆ¶ä»€ä¹ˆçš„</li><li>è¯¥å‡½æ•°å¿…é¡»å¾—æœ‰è¿”å›å€¼ï¼Œä¸”è¿”å›å€¼ä¼šä½œä¸º componentDidUpdate çš„ç¬¬ä¸‰ä¸ªå‚æ•°</li><li>ä¸€èˆ¬ä¸ componentDidUpdate å‡½æ•°è”åˆä½¿ç”¨</li></ol></li></ol><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// è·å–æ›´æ–°çš„å±æ€§å’ŒçŠ¶æ€</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;getDerivedStateFromProps&quot;</span><span class="token punctuation">,</span> props<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token function-variable function">getSnapshotBeforeUpdate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// è·å–å³å°†æŒ‚è½½çš„domçš„å±æ€§å’ŒçŠ¶æ€</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;getSnapshotBeforeUpdate&quot;</span><span class="token punctuation">,</span> prevProps<span class="token punctuation">,</span> prevState<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">132</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState<span class="token punctuation">,</span> snap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;componentDidUpdate&quot;</span><span class="token punctuation">,</span> prevProps<span class="token punctuation">,</span> prevState<span class="token punctuation">,</span> snap<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¼ é€’å…ƒç´ å†…å®¹" tabindex="-1"><a class="header-anchor" href="#ä¼ é€’å…ƒç´ å†…å®¹" aria-hidden="true">#</a> ä¼ é€’å…ƒç´ å†…å®¹</h2><p>å†…ç½®ç»„ä»¶ï¼šReactå®šä¹‰å¥½çš„ç»„ä»¶ï¼Œå¦‚ï¼šdivã€h1ã€p <code>&lt;div&gt;è¿™æ˜¯ä¸€ä¸ªå†…ç½®ç»„ä»¶&lt;/div&gt;</code></p><ul><li>å¦‚æœç»™è‡ªå®šä¹‰ç»„ä»¶ä¼ é€’å…ƒç´ å†…å®¹ï¼Œå¯ä»¥å½“ä½œå±æ€§ä¼ é€’</li><li>ä¹Ÿå¯ä»¥æ”¾åœ¨æ ‡ç­¾å†…ï¼ŒReactä¼šå°†å…ƒç´ å†…å®¹ä½œä¸ºchildrenå±æ€§ä¼ é€’è¿‡å»ï¼Œä¼šå¿½ç•¥ç©ºç™½å­—ç¬¦ï¼Œå¦‚æœåªæ˜¯ç©ºæ ¼æˆ–æ¢è¡Œï¼Œæ²¡æœ‰å…¶å®ƒå†…å®¹ï¼Œä¼šè¢«å¿½ç•¥ï¼Œä¸ä¼šç”Ÿæˆchildrenå±æ€§</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token attr-name">html</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ä¸€æ®µå†…å®¹</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">App</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">// å½“ä½œå±æ€§ä¼ é€’</span>
<span class="token comment">// ==================</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> ä¸€æ®µå†…å®¹ </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">App</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">// åœ¨æ ‡ç­¾å†…ä¼ é€’</span>
<span class="token comment">// å†…å®¹åœ¨ç»„ä»¶å†… props.children å±æ€§é‡Œ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è¡¨å•" tabindex="-1"><a class="header-anchor" href="#è¡¨å•" aria-hidden="true">#</a> è¡¨å•</h2><h3 id="å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶" aria-hidden="true">#</a> å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶</h3><ul><li>å—æ§ç»„ä»¶ï¼šç»„ä»¶çš„ä½¿ç”¨è€…ï¼Œæœ‰æƒåŠ›å®Œå…¨æ§åˆ¶è¯¥ç»„ä»¶çš„è¡Œä¸ºå’Œå†…å®¹ <ul><li>é€šå¸¸æƒ…å†µä¸‹ï¼Œå—æ§ç»„ä»¶å¾€å¾€æ²¡æœ‰è‡ªèº«çš„çŠ¶æ€ï¼Œå…¶å†…å®¹å®Œå…¨æ”¶åˆ°å±æ€§çš„æ§åˆ¶ï¼Œæ¯”å¦‚å‡½æ•°ç»„ä»¶</li></ul></li><li>éå—æ§ç»„ä»¶ï¼šç»„ä»¶çš„ä½¿ç”¨è€…ï¼Œæ²¡æœ‰èƒ½åŠ›æ§åˆ¶è¯¥ç»„ä»¶çš„è¡Œä¸ºå’Œå†…å®¹ï¼Œç»„ä»¶çš„è¡Œä¸ºå’Œå†…å®¹å®Œå…¨è‡ªè¡Œæ§åˆ¶ <ul><li>æ¯”å¦‚å®Œå…¨å—çŠ¶æ€æ§åˆ¶çš„ç±»ç»„ä»¶ã€‚</li></ul></li></ul><p><strong>è¡¨å•ç»„ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯éå—æ§ç»„ä»¶ï¼Œä¸€æ—¦è®¾ç½®äº†è¡¨å•ç»„ä»¶çš„ value å±æ€§ï¼Œåˆ™å…¶å˜ä¸ºå—æ§ç»„ä»¶(å•é€‰å’Œå¤šé€‰æ¡†éœ€è¦è®¾ç½®checked)</strong></p><ul><li>é€šè¿‡ onChange äº‹ä»¶è¿›è¡Œæ•°æ®æ§åˆ¶</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">NumberInput</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span> <span class="token comment">// åªå¯ä»¥è¾“å…¥æ•°å­—</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">val</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">checkChangeValue</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> val <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        val <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\D</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">val</span><span class="token operator">:</span> val<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">}</span></span>
                    <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>checkChangeValue<span class="token punctuation">}</span></span>
                <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å±æ€§é»˜è®¤å€¼å’Œç±»å‹æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#å±æ€§é»˜è®¤å€¼å’Œç±»å‹æ£€æŸ¥" aria-hidden="true">#</a> å±æ€§é»˜è®¤å€¼å’Œç±»å‹æ£€æŸ¥</h2><h3 id="å±æ€§é»˜è®¤å€¼" tabindex="-1"><a class="header-anchor" href="#å±æ€§é»˜è®¤å€¼" aria-hidden="true">#</a> å±æ€§é»˜è®¤å€¼</h3><p>é€šè¿‡ä¸€ä¸ªé™æ€å±æ€§ <strong>defaultProps</strong> å‘ŠçŸ¥ React å±æ€§é»˜è®¤å€¼</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">FuncDefault</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            a: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token plain-text">, b: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>b<span class="token punctuation">}</span><span class="token plain-text">, c: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>c<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
FuncDefault<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// å¦‚æœä¼ é€’å±æ€§å€¼ä¼šè¿›è¡Œæ··åˆ Object.assign</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> FuncDefault
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">ClassDefault</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åœ¨æ­¤é˜¶æ®µä¹‹å‰å°±ä¼šå®Œæˆå¯¹é»˜è®¤å±æ€§çš„æ··åˆ</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                a: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token plain-text">, b: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>b<span class="token punctuation">}</span><span class="token plain-text">, c: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>c<span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
ClassDefault<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> ClassDefault<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å±æ€§ç±»å‹æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#å±æ€§ç±»å‹æ£€æŸ¥" aria-hidden="true">#</a> å±æ€§ç±»å‹æ£€æŸ¥</h3><p>ä½¿ç”¨åº“ï¼šprop-types React å®˜æ–¹å‡ºå“çš„åº“ å¯¹ç»„ä»¶ä½¿ç”¨é™æ€å±æ€§ propTypes å‘ŠçŸ¥ React å¦‚ä½•æ£€æŸ¥å±æ€§</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>PropTypes<span class="token punctuation">.</span>anyï¼š<span class="token comment">// ä»»æ„ç±»å‹ï¼Œå¸¸ç”¨æ¥è®¾ç½®å¿…å¡« PropTypes.any.isRequired</span>
PropTypes<span class="token punctuation">.</span>arrayï¼š<span class="token comment">// æ•°ç»„ç±»å‹</span>
PropTypes<span class="token punctuation">.</span>boolï¼š<span class="token comment">// å¸ƒå°”ç±»å‹</span>
PropTypes<span class="token punctuation">.</span>funcï¼š<span class="token comment">// å‡½æ•°ç±»å‹</span>
PropTypes<span class="token punctuation">.</span>numberï¼š<span class="token comment">// æ•°å­—ç±»å‹</span>
PropTypes<span class="token punctuation">.</span>objectï¼š<span class="token comment">// å¯¹è±¡ç±»å‹</span>
PropTypes<span class="token punctuation">.</span>stringï¼š<span class="token comment">// å­—ç¬¦ä¸²ç±»å‹</span>
PropTypes<span class="token punctuation">.</span>symbolï¼š<span class="token comment">// ç¬¦å·ç±»å‹</span>

PropTypes<span class="token punctuation">.</span>nodeï¼š<span class="token comment">// ä»»ä½•å¯ä»¥è¢«æ¸²æŸ“çš„å†…å®¹ï¼Œå­—ç¬¦ä¸²ã€æ•°å­—ã€Reactå…ƒç´ </span>
PropTypes<span class="token punctuation">.</span>elementï¼š<span class="token comment">// reactå…ƒç´ </span>
PropTypes<span class="token punctuation">.</span>elementTypeï¼š<span class="token comment">// reactå…ƒç´ ç±»å‹ï¼Œå¯ä»¥ç”¨æ¥ä¼ é€’ç»„ä»¶ï¼Œä½†æ˜¯ä¼ é€’è¿‡æ¥çš„ç»„ä»¶éœ€è¦å…ˆç”¨ä¸€ä¸ªå˜é‡æ¥æ”¶ï¼Œç„¶åå†ä½¿ç”¨ï¼Œå¦‚ï¼šconst comp = this.props.comp, &lt;comp /&gt;</span>
PropTypes<span class="token punctuation">.</span><span class="token function">instanceOf</span><span class="token punctuation">(</span>æŒ‡å®šæ„é€ å‡½æ•°<span class="token punctuation">)</span>ï¼š<span class="token comment">// å¿…é¡»æ˜¯æŒ‡å®šæ„é€ å‡½æ•°çš„å®ä¾‹</span>
PropTypes<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span>xxx<span class="token punctuation">,</span> xxx<span class="token punctuation">]</span><span class="token punctuation">)</span>ï¼š<span class="token comment">// æšä¸¾ï¼Œä¼ é€’çš„å‚æ•°å€¼å¿…é¡»çš„æšä¸¾å€¼ä¸­çš„æŸä¸€ä¸ª</span>
PropTypes<span class="token punctuation">.</span><span class="token function">oneOfType</span><span class="token punctuation">(</span><span class="token punctuation">[</span>xxx<span class="token punctuation">,</span> xxx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å±æ€§ç±»å‹å¿…é¡»æ˜¯æ•°ç»„ä¸­çš„å…¶ä¸­ä¸€ä¸ª</span>
PropTypes<span class="token punctuation">.</span><span class="token function">arrayOf</span><span class="token punctuation">(</span>PropTypes<span class="token punctuation">.</span><span class="token constant">XXX</span><span class="token punctuation">)</span>ï¼š<span class="token comment">// å¿…é¡»æ˜¯æŸä¸€ç±»å‹æ•°æ®ç»„æˆçš„æ•°ç»„</span>
PropTypes<span class="token punctuation">.</span><span class="token function">objectOf</span><span class="token punctuation">(</span>PropTypes<span class="token punctuation">.</span><span class="token constant">XXX</span><span class="token punctuation">)</span>ï¼š<span class="token comment">// å¯¹è±¡ç”±æŸä¸€ç±»å‹çš„å€¼ç»„æˆ</span>
PropTypes<span class="token punctuation">.</span><span class="token function">shape</span><span class="token punctuation">(</span>å¯¹è±¡<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token comment">// å±æ€§å¿…é¡»æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”æ»¡è¶³æŒ‡å®šçš„å¯¹è±¡è¦æ±‚ï¼Œé’ˆå¯¹å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå±æ€§è¿›è¡Œæ£€æŸ¥ï¼Œä¸”åœ¨å¯¹è±¡ä¸­å¯ä»¥åµŒå¥—ä½¿ç”¨</span>
PropTypes<span class="token punctuation">.</span><span class="token function">exact</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>ï¼š<span class="token comment">// å¯¹è±¡å¿…é¡»ç²¾ç¡®åŒ¹é…ä¼ é€’çš„æ•°æ®ï¼Œå®Œå…¨ç²¾ç¡®åŒ¹é…ï¼Œå±æ€§ä¸èƒ½å¤š</span>

<span class="token comment">// è‡ªå®šä¹‰å±æ€§æ£€æŸ¥ï¼Œå¦‚æœæœ‰é”™è¯¯ï¼Œè¿”å›é”™è¯¯å¯¹è±¡å³å¯</span>
<span class="token function-variable function">å±æ€§</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> propName<span class="token punctuation">,</span> componentName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&#39;prop-types&#39;</span>
<span class="token keyword">class</span> <span class="token class-name">ValidationComp</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// ç±»ç»„ä»¶ç”¨æ³•</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> <span class="token comment">// aå±æ€§å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ç±»å‹ä¸”å¿…å¡«</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> ValidationComp<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&#39;prop-types&#39;</span>
<span class="token keyword">const</span> <span class="token function-variable function">FuncDefault</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            a: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token plain-text">, b: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>b<span class="token punctuation">}</span><span class="token plain-text">, c: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>c<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
FuncDefault<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// å‡½æ•°ç»„ä»¶ç”¨æ³•</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
    <span class="token literal-property property">c</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> FuncDefault
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="hoc-é«˜é˜¶ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#hoc-é«˜é˜¶ç»„ä»¶" aria-hidden="true">#</a> HOC é«˜é˜¶ç»„ä»¶</h2><ul><li>HOFï¼šHigher-Order Functionï¼Œé«˜é˜¶å‡½æ•°ï¼Œ <ul><li>ç‹­ä¹‰ä¸Šï¼šä»¥å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡½æ•°</li></ul></li><li>HOC: Higher-Order Componentï¼Œé«˜é˜¶ç»„ä»¶ <ul><li>æœ¬è´¨ä¸Šå°±æ˜¯é«˜é˜¶å‡½æ•°ï¼Œä»¥ç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªç»„ä»¶</li></ul></li></ul><p><strong>é€šå¸¸ï¼Œå¯ä»¥åˆ©ç”¨HOCå®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹</strong> ä¸¾ä¾‹ï¼š</p><ul><li>20ä¸ªç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶åœ¨åˆ›å»ºç»„ä»¶å’Œé”€æ¯ç»„ä»¶æ—¶ï¼Œéœ€è¦ä½œæ—¥å¿—è®°å½•</li><li>20ä¸ªç»„ä»¶ï¼Œå®ƒä»¬éœ€è¦æ˜¾ç¤ºä¸€äº›å†…å®¹ï¼Œå¾—åˆ°çš„æ•°æ®ç»“æ„å®Œå…¨ä¸€è‡´</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">WithLog</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Comp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">LogWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
        <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ—¥å¿—ç»„ä»¶åˆ›å»º&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Comp</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> WithLog<span class="token punctuation">;</span>
<span class="token comment">// ========== ä½¿ç”¨</span>
<span class="token keyword">import</span> Comp <span class="token keyword">from</span> <span class="token string">&quot;./component/Comp&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> withLog <span class="token keyword">from</span> <span class="token string">&quot;./HOC/withLog&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> VComp <span class="token operator">=</span> <span class="token function">withLog</span><span class="token punctuation">(</span>Comp<span class="token punctuation">)</span><span class="token punctuation">;</span>
VComp <span class="token operator">=</span> <span class="token function">withLog</span><span class="token punctuation">(</span>VComp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½ ç”šè‡³å¯ä»¥é‡å¤ä½¿ç”¨æˆ–è€…ä½¿ç”¨å…¶ä»–çš„é«˜é˜¶ç»„ä»¶ï¼Œä½†è¯·ä¸è¦æ— æ„ä¹‰çš„é‡å¤ä½¿ç”¨ï¼Œåœ¨æ­¤ä»…ä½œä¸ºæ¼”ç¤º</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">VComp</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„</strong></p><ul><li>å‘½åé€šå¸¸ä»¥ with å¼€å¤´<code>withTest.jsx</code></li><li>ä¸è¦åœ¨renderä¸­ä½¿ç”¨é«˜é˜¶ç»„ä»¶ï¼Œä¼šé”€æ¯é‡å»ºï¼Œæµªè´¹æ•ˆç‡</li><li>ä¸è¦åœ¨é«˜é˜¶ç»„ä»¶å†…éƒ¨æ›´æ”¹ä¼ å…¥çš„ç»„ä»¶ï¼Œå®¹æ˜“å‡ºç°é—®é¢˜å¹¶ä¸æ–¹ä¾¿ç»´æŠ¤</li></ul><h2 id="ref" tabindex="-1"><a class="header-anchor" href="#ref" aria-hidden="true">#</a> ref</h2><h3 id="reference-å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#reference-å¼•ç”¨" aria-hidden="true">#</a> reference: å¼•ç”¨</h3><p>å’Œvueä¸­çš„refç±»ä¼¼</p><ul><li>åœºæ™¯ï¼šå¸Œæœ›ç›´æ¥ä½¿ç”¨domå…ƒç´ ä¸­çš„æŸä¸ªæ–¹æ³•ï¼Œæˆ–è€…å¸Œæœ›ç›´æ¥ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶ä¸­çš„æŸä¸ªæ–¹æ³• <ul><li>refä½œç”¨äºå†…ç½®çš„htmlç»„ä»¶ï¼Œå¾—åˆ°çš„å°†æ˜¯çœŸå®çš„domå¯¹è±¡</li><li>refä½œç”¨äºç±»ç»„ä»¶ï¼Œå¾—åˆ°çš„å°†æ˜¯ç±»çš„å®ä¾‹ï¼Œä½œç”¨äºå‡½æ•°ç»„ä»¶ï¼Œå°†æŠ¥é”™</li><li>refä¸èƒ½ä½œç”¨äºå‡½æ•°ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶é‡Œå¯ä»¥ä½¿ç”¨refï¼Œä½†åªèƒ½åœ¨ç»„ä»¶å†…éƒ¨ç”¨</li></ul></li><li>refä¸å†æ¨èä½¿ç”¨å­—ç¬¦ä¸²èµ‹å€¼ï¼Œå­—ç¬¦ä¸²èµ‹å€¼çš„æ–¹å¼å°†æ¥å¯èƒ½ä¼šè¢«ç§»å‡º</li><li>ç›®å‰ï¼Œrefæ¨èä½¿ç”¨å¯¹è±¡æˆ–è€…æ˜¯å‡½æ•°èµ‹å€¼ <ul><li>ä½¿ç”¨å¯¹è±¡ <ul><li>é€šè¿‡ React.createRef å‡½æ•°åˆ›å»ºï¼Œä¸€èˆ¬ä¼šåœ¨æ„é€ å‡½æ•°ä¸­å…ˆåˆ›å»ºå¥½ï¼Œåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡æ˜¯<code>{ current: null }</code>ï¼Œå¯ä»¥ç›´æ¥å°†è¯¥å¯¹è±¡èµ‹å€¼ç»™refï¼Œèµ·ä½œç”¨ï¼ŒçœŸå®çš„ dom ä¼šä¿å­˜åˆ° current ä¸Š <ul><li><code>this.txtRef = React.createRef() &lt;input ref = {this.txtRef} type = &#39;text&#39; /&gt;</code></li><li>è°ƒç”¨æ–¹æ³•ï¼š<code>this.txt.current.focus()</code>ä½¿ç”¨å†…ç½®çš„ current å±æ€§è°ƒç”¨</li></ul></li></ul></li><li>ä½¿ç”¨å‡½æ•° <ul><li>åˆ›å»ºæ–¹æ³•ï¼š<code>&lt;input ref = {el =&gt; { this.txt = el }} type = &#39;text&#39; /&gt;</code></li><li>ä½¿ç”¨æ–¹æ³•ï¼š<code>this.txt.focus()</code></li><li>ref å‡½æ•°çš„è°ƒç”¨æ—¶é—´ï¼š <ul><li>componentDidMount çš„æ—¶å€™ä¼šè°ƒç”¨è¯¥å‡½æ•° <ul><li>åœ¨ componentDidMount äº‹ä»¶ä¸­å¯ä»¥ä½¿ç”¨ ref</li></ul></li><li>å¦‚æœ ref çš„å€¼å‘ç”Ÿäº†å˜åŠ¨ï¼ˆæ—§çš„å‡½æ•°è¢«æ–°çš„å‡½æ•°æ›¿ä»£ï¼‰ï¼Œåˆ†åˆ«è°ƒç”¨æ—§çš„å‡½æ•°ä»¥åŠæ–°çš„å‡½æ•°ï¼Œæ—¶é—´ç‚¹å‡ºç°åœ¨ componentDidUpdate ä¹‹å‰ <ul><li>æ—§çš„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼ é€’ nullï¼Œç§»é™¤ä¹‹å‰å‡½æ•°ç»‘å®šçš„ dom</li><li>æ–°çš„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼ é€’å¯¹è±¡ï¼Œåˆ›å»ºæ–°çš„ dom ç»‘å®š</li></ul></li><li>å¦‚æœrefæ‰€åœ¨çš„ç»„ä»¶è¢«å¸è½½ï¼Œä¼šè°ƒç”¨å‡½æ•°ï¼Œä¼ é€’ null</li></ul></li></ul></li></ul></li><li>ref æ˜¯ä¸€ä¸ª React å…³é”®å­—ï¼Œä¸æ˜¯å±æ€§</li></ul><h3 id="è°¨æ…ä½¿ç”¨ref" tabindex="-1"><a class="header-anchor" href="#è°¨æ…ä½¿ç”¨ref" aria-hidden="true">#</a> è°¨æ…ä½¿ç”¨ref</h3><p>èƒ½å¤Ÿä½¿ç”¨å±æ€§å’ŒçŠ¶æ€è¿›è¡Œæ§åˆ¶ï¼Œå°±ä¸è¦ä½¿ç”¨ refï¼Œref å®é™…ä¸Šæ˜¯åæ¨¡å¼</p><ul><li>è°ƒç”¨çœŸå®çš„ DOM å¯¹è±¡ä¸­çš„æ–¹æ³•</li><li>æŸä¸ªæ—¶å€™éœ€è¦è°ƒç”¨ç±»ç»„ä»¶çš„æ–¹æ³•</li></ul><h2 id="refè½¬å‘" tabindex="-1"><a class="header-anchor" href="#refè½¬å‘" aria-hidden="true">#</a> Refè½¬å‘</h2><h3 id="forwardrefæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#forwardrefæ–¹æ³•" aria-hidden="true">#</a> forwardRefæ–¹æ³•</h3><ul><li>å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶</li><li>å‚æ•° <ul><li>ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼Œä¸èƒ½æ˜¯ç±»ç»„ä»¶</li><li>å‡½æ•°ç»„ä»¶éœ€è¦æœ‰ç¬¬äºŒä¸ªå‚æ•°æ¥å¾—åˆ°ref</li></ul></li><li>è¿”å›å€¼ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶</li></ul><h4 id="ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#ç”¨æ³•" aria-hidden="true">#</a> ç”¨æ³•</h4><ul><li>ç»™å‡½æ•°ç»„ä»¶ç»‘å®š ref</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">FuncDefault</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            a: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token plain-text">, b: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>b<span class="token punctuation">}</span><span class="token plain-text">, c: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>c<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span>FuncDefault<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨é«˜é˜¶ç»„ä»¶ä¸­åš ref è½¬å‘</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">WithLog</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Comp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">class</span> <span class="token class-name">LogWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
        <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ—¥å¿—ç»„ä»¶åˆ›å»º&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> forwardRef<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Comp</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>forwardRef<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LogWrapper</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token attr-name">forwardRef</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> WithLog<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="context" tabindex="-1"><a class="header-anchor" href="#context" aria-hidden="true">#</a> Context</h2><p><strong>ä¸Šä¸‹æ–‡ï¼šContextï¼Œè¡¨ç¤ºåšæŸä¸€äº›äº‹æƒ…çš„ç¯å¢ƒ</strong></p><h3 id="reactä¸­çš„ä¸Šä¸‹æ–‡ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#reactä¸­çš„ä¸Šä¸‹æ–‡ç‰¹ç‚¹" aria-hidden="true">#</a> Reactä¸­çš„ä¸Šä¸‹æ–‡ç‰¹ç‚¹</h3><ul><li>å½“æŸä¸ªç»„ä»¶åˆ›å»ºäº†ä¸Šä¸‹æ–‡åï¼Œä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ï¼Œä¼šè¢«æ‰€æœ‰åä»£ç»„ä»¶å…±äº«</li><li>å¦‚æœæŸä¸ªç»„ä»¶ä¾èµ–äº†ä¸Šä¸‹æ–‡ï¼Œä¼šå¯¼è‡´è¯¥ç»„ä»¶ä¸å†çº¯ç²¹ï¼ˆå¤–éƒ¨æ•°æ®ä»…æ¥æºäºå±æ€§propsï¼‰</li><li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨äºç¬¬ä¸‰æ–¹ç»„ä»¶ï¼ˆé€šç”¨ç»„ä»¶ï¼‰</li></ul><h3 id="æ—§çš„api-ç‰ˆæœ¬-16-0" tabindex="-1"><a class="header-anchor" href="#æ—§çš„api-ç‰ˆæœ¬-16-0" aria-hidden="true">#</a> æ—§çš„API ç‰ˆæœ¬ &lt; 16.0</h3><h4 id="åˆ›å»ºä¸Šä¸‹æ–‡" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºä¸Šä¸‹æ–‡" aria-hidden="true">#</a> åˆ›å»ºä¸Šä¸‹æ–‡</h4><p>åªæœ‰ç±»ç»„ä»¶æ‰å¯ä»¥åˆ›å»ºä¸Šä¸‹æ–‡</p><ul><li>ç»™ç±»ç»„ä»¶ä¹¦å†™é™æ€å±æ€§ childContextTypesï¼Œä½¿ç”¨è¯¥å±æ€§å¯¹ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ç±»å‹è¿›è¡Œçº¦æŸ</li><li>æ·»åŠ å®ä¾‹æ–¹æ³• getChildContextï¼Œè¯¥æ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œå³ä¸ºä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ï¼Œè¯¥æ•°æ®å¿…é¡»æ»¡è¶³ç±»å‹çº¦æŸ <ul><li>è¯¥æ–¹æ³•ä¼šåœ¨æ¯æ¬¡renderä¹‹åè¿è¡Œã€‚</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>   <span class="token keyword">static</span> childContextTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// é™æ€å±æ€§ï¼Œçº¦æŸä¸Šä¸‹æ–‡çš„æ•°æ®ç±»å‹</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token function">getChildContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å®ä¾‹æ–¹æ³•ï¼Œå¾—åˆ°ä¸Šä¸‹æ–‡çš„æ•°æ®</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">&#39;2&#39;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®" aria-hidden="true">#</a> ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®</h4><p>è¦æ±‚ï¼šå¦‚æœè¦ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ï¼Œç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªé™æ€å±æ€§ contextTypesï¼Œè¯¥å±æ€§æè¿°äº†éœ€è¦è·å–çš„ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ç±»å‹</p><ul><li>å¯ä»¥åœ¨ç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­ï¼Œé€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ï¼Œè·å–ä¸Šä¸‹æ–‡æ•°æ®</li><li><strong>ä»ç»„ä»¶çš„contextå±æ€§ä¸­è·å–</strong></li><li>åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œé€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ï¼Œè·å–ä¸Šä¸‹æ–‡æ•°æ®</li><li>ç±»ä¼¼ä¸ä½œç”¨åŸŸé“¾ï¼Œé‡‡å–å°±è¿‘åŸåˆ™ï¼Œä¸Šä¸‹æ–‡å±æ€§åç›¸è¿‘å–æœ€è¿‘çš„å€¼</li></ul><h4 id="ä¸Šä¸‹æ–‡çš„æ•°æ®å˜åŒ–" tabindex="-1"><a class="header-anchor" href="#ä¸Šä¸‹æ–‡çš„æ•°æ®å˜åŒ–" aria-hidden="true">#</a> ä¸Šä¸‹æ–‡çš„æ•°æ®å˜åŒ–</h4><ul><li>ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ä¸å¯ä»¥ç›´æ¥å˜åŒ–ï¼Œæœ€ç»ˆéƒ½æ˜¯é€šè¿‡çŠ¶æ€æ”¹å˜</li><li>åœ¨ä¸Šä¸‹æ–‡ä¸­åŠ å…¥ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå¯ä»¥ç”¨äºåä»£ç»„ä»¶æ›´æ”¹ä¸Šä¸‹æ–‡çš„æ•°æ® <ul><li>åä»£ç»„ä»¶è°ƒç”¨ä¸Šä¸‹æ–‡ä¸­çš„å‡½æ•°æ›´æ”¹ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ï¼Œä¹Ÿæ˜¯ä¿®æ”¹çˆ¶ç»„ä»¶çš„çŠ¶æ€æ¥æ”¹å˜çš„</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&#39;prop-types&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">GetFuncOldContext</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                GetFuncOldContext è·å–çš„ä¸Šä¸‹æ–‡æ•°æ®
                a: </span><span class="token punctuation">{</span>context<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token punctuation">{</span><span class="token comment">/* a: 1 */</span><span class="token punctuation">}</span><span class="token plain-text">
                c: </span><span class="token punctuation">{</span>context<span class="token punctuation">.</span>c<span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token punctuation">{</span><span class="token comment">/* c: 2 */</span><span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
GetFuncOldContext<span class="token punctuation">.</span>contextTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// å‡½æ•°ç»„ä»¶è°ƒç”¨ contextTypes çš„æ–¹æ³•</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
    <span class="token literal-property property">c</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">GetOldClassContext</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> contextTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// çº¦æŸè¦è·å–çš„ä¸Šä¸‹æ–‡çš„æ•°æ®ç±»å‹ï¼Œçº¦æŸè°èƒ½è·å–è°ï¼Œé˜²æ­¢æ»¥ç”¨</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> childContextTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// é™æ€å±æ€§ï¼Œçº¦æŸä¸Šä¸‹æ–‡çš„æ•°æ®ç±»å‹</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span> <span class="token comment">// å¯ä»¥é‡å†™ï¼Œä½†ç±»å‹ä¸€å®šè¦ä¸€æ ·ï¼Œä¸”åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­è·å–çš„çˆ¶çº§çš„aä»ç„¶æ˜¯çˆ¶çº§çš„</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token function">getChildContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å®ä¾‹æ–¹æ³•ï¼Œå¾—åˆ°ä¸Šä¸‹æ–‡çš„æ•°æ®</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>c<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// constructor(props, context) {</span>
    <span class="token comment">//     super(props);</span>
    <span class="token comment">//     console.log(context) // { a: 1 }</span>
    <span class="token comment">// }</span>
    <span class="token comment">// constructor(props, context) { // å¯ä»¥ä¸å†™</span>
    <span class="token comment">//     super(props, context);</span>
    <span class="token comment">//     console.log(this.context) // { a: 1 }</span>
    <span class="token comment">// }</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    GetOldClassContextè·å–çš„ä¸Šä¸‹æ–‡æ•°æ®
                    a: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token punctuation">{</span><span class="token comment">/* a: 1 */</span><span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">GetFuncOldContext</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">OldContext</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> contextTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// çº¦æŸè¦è·å–çš„ä¸Šä¸‹æ–‡çš„æ•°æ®ç±»å‹ï¼Œçº¦æŸè°èƒ½è·å–è°ï¼Œé˜²æ­¢æ»¥ç”¨</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> childContextTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// é™æ€å±æ€§ï¼Œçº¦æŸä¸Šä¸‹æ–‡çš„æ•°æ®ç±»å‹</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">&#39;2&#39;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getChildContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å®ä¾‹æ–¹æ³•ï¼Œå¾—åˆ°ä¸Šä¸‹æ–‡çš„æ•°æ®</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>a<span class="token punctuation">,</span>
            <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>b
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    OldContextè·å–çš„ä¸Šä¸‹æ–‡æ•°æ®
                    c: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>c<span class="token punctuation">}</span><span class="token plain-text">  </span><span class="token punctuation">{</span><span class="token comment">/* è·å–ä¸åˆ° cï¼Œçˆ¶ä¸èƒ½è·å–å­çš„ä¸Šä¸‹æ–‡æ•°æ® */</span><span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">GetOldClassContext</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> OldContext<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–°ç‰ˆapi-ç‰ˆæœ¬-16-0" tabindex="-1"><a class="header-anchor" href="#æ–°ç‰ˆapi-ç‰ˆæœ¬-16-0" aria-hidden="true">#</a> æ–°ç‰ˆAPI ç‰ˆæœ¬ &gt; 16.0</h3><p>æ—§ç‰ˆAPIå­˜åœ¨ä¸¥é‡çš„æ•ˆç‡é—®é¢˜ï¼Œå¹¶ä¸”å®¹æ˜“å¯¼è‡´æ»¥ç”¨</p><h4 id="åˆ›å»ºä¸Šä¸‹æ–‡-1" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºä¸Šä¸‹æ–‡-1" aria-hidden="true">#</a> åˆ›å»ºä¸Šä¸‹æ–‡</h4><p>ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªç‹¬ç«‹äºç»„ä»¶çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡<strong>é€šè¿‡ React.createContext(é»˜è®¤å€¼) åˆ›å»º</strong>ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡</p><ul><li>Providerå±æ€§ï¼šä¸Šä¸‹æ–‡ç”Ÿäº§è€… <ul><li>ä¸€ä¸ªç»„ä»¶ï¼Œè¯¥ç»„ä»¶ä¼šåˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œè¯¥ç»„ä»¶æœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œé€šè¿‡è¯¥å±æ€§ï¼Œå¯ä»¥ä¸ºå…¶æ•°æ®èµ‹å€¼ <ul><li>å¯ä»¥ä¸º value èµ‹å€¼ä¸º state ä¸­çš„ä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œä¸ä¿®æ”¹å¯¹è±¡å¼•ç”¨åœ°å€æ—¶ï¼Œå¯ä»¥åœ¨ä¸Šä¸‹æ–‡æ•°æ®æ”¹å˜çš„æ—¶å€™è¿›å…¥ shouldComponentUpdate æ¥åšä¼˜åŒ–</li></ul></li><li>åŒä¸€ä¸ªProviderï¼Œä¸è¦ç”¨åˆ°å¤šä¸ªç»„ä»¶ä¸­ï¼Œå¦‚æœéœ€è¦åœ¨å…¶ä»–ç»„ä»¶ä¸­ä½¿ç”¨è¯¥æ•°æ®ï¼Œåº”è¯¥è€ƒè™‘å°†æ•°æ®æå‡åˆ°æ›´é«˜çš„å±‚æ¬¡ï¼Œæˆ–è€…ä½¿ç”¨ **React.createContext() **é‡æ–°åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡</li></ul></li><li>Consumerå±æ€§ï¼šä¸Šä¸‹æ–‡çš„æ¶ˆè´¹è€… <ul><li>ä¸€ä¸ªç»„ä»¶ï¼Œç”¨æ¥è·å–ä¸Šä¸‹æ–‡</li></ul></li></ul><h4 id="ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®-1" aria-hidden="true">#</a> ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®</h4><ul><li>åœ¨ç±»ç»„ä»¶ä¸­ï¼Œç›´æ¥ä½¿ç”¨ this.context è·å–ä¸Šä¸‹æ–‡æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Consumer æ¥è·å– <ul><li>è¦æ±‚ï¼šå¿…é¡»æ‹¥æœ‰é™æ€å±æ€§ contextType , åº”èµ‹å€¼ä¸ºåˆ›å»ºçš„ä¸Šä¸‹æ–‡å¯¹è±¡</li></ul></li><li>åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œéœ€è¦ä½¿ç”¨ Consumer æ¥è·å–ä¸Šä¸‹æ–‡æ•°æ® <ul><li>Consumeræ˜¯ä¸€ä¸ªç»„ä»¶</li><li>å®ƒçš„å­èŠ‚ç‚¹ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå®ƒçš„props.childrenéœ€è¦ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼‰</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">FuncNewContext</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            FuncNewContext
            æ¥è‡ªä¸Šä¸‹æ–‡çš„æ•°æ®
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ctx.Consumer</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> // è·å–ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ï¼Œå­èŠ‚ç‚¹éœ€è¦ä¼ ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°å°±æ˜¯ä¸Šä¸‹æ–‡çš„æ•°æ®å¯¹è±¡
                    </span><span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">a: </span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token plain-text">, b: </span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>b<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ctx.Consumer</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ClassNewContext</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ClassNewContext</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> contextType <span class="token operator">=</span> ctx<span class="token punctuation">;</span> <span class="token comment">// è·å–ä¸Šä¸‹æ–‡çš„æ•°æ®ï¼Œæ”¾å¦‚ this.context é‡Œ</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                ClassNewContext
                æ¥è‡ªä¸Šä¸‹æ–‡çš„æ•°æ®ï¼ša: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token plain-text">, b: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>b<span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ctx.Consumer</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">// è·å–ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ï¼Œå­èŠ‚ç‚¹éœ€è¦ä¼ ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°å°±æ˜¯ä¸Šä¸‹æ–‡çš„æ•°æ®å¯¹è±¡
                    </span><span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">a: </span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token plain-text">, b: </span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>b<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ctx.Consumer</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">NewContext</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token string">&#39;f&#39;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ctx.Provider</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> // è¿›è¡Œä¸Šä¸‹æ–‡çš„èµ‹å€¼ï¼Œå¦‚æœèµ‹å€¼ä¸º state ä¸­çš„å¯¹è±¡å¼•ç”¨(æ¯”å¦‚ this.state.c)ï¼Œä¸ä¿®æ”¹cæ—¶ï¼Œå¯ä»¥é¿å…å¼ºåˆ¶æ¸²æŸ“
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FuncNewContext</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ctx.Provider</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> NewContext<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ³¨æ„" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„" aria-hidden="true">#</a> æ³¨æ„</h4><p>å¦‚æœï¼Œä¸Šä¸‹æ–‡æä¾›è€…ï¼ˆContext.Providerï¼‰ä¸­çš„valueå±æ€§å‘ç”Ÿå˜åŒ–(Object.isæ¯”è¾ƒ)ï¼Œä¼šå¯¼è‡´è¯¥ä¸Šä¸‹æ–‡æä¾›çš„æ‰€æœ‰åä»£å…ƒç´ å…¨éƒ¨é‡æ–°æ¸²æŸ“ï¼ˆå¼ºåˆ¶æ¸²æŸ“ï¼‰ï¼Œæ— è®ºè¯¥å­å…ƒç´ æ˜¯å¦æœ‰ä¼˜åŒ–ï¼ˆæ— è®º shouldComponentUpdate å‡½æ•°è¿”å›ä»€ä¹ˆç»“æœï¼‰</p><h3 id="ä¸Šä¸‹æ–‡çš„åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ä¸Šä¸‹æ–‡çš„åº”ç”¨åœºæ™¯" aria-hidden="true">#</a> ä¸Šä¸‹æ–‡çš„åº”ç”¨åœºæ™¯</h3><p>ä¸€èˆ¬åœ¨æˆ‘ä»¬è‡ªå·±å¼€å‘ç¼–å†™ä¸€å¥—ç»„ä»¶ï¼ˆæœ‰å¤šä¸ªç»„ä»¶ï¼‰ï¼Œè¿™äº›ç»„ä»¶ä¹‹é—´éœ€è¦ç›¸äº’é…åˆæ‰èƒ½æœ€ç»ˆå®ŒæˆåŠŸèƒ½ï¼Œæ‰ä¼šç”¨åˆ°ä¸Šä¸‹æ–‡ï¼Œç”¨åˆ«äººçš„ç»„ä»¶çš„æ—¶å€™ä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬è¦å¼€å‘ä¸€å¥—è¡¨å•ç»„ä»¶ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">datas</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>datas<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–è¡¨å•ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆå¯¹è±¡ï¼‰</span>
            <span class="token comment">/*
                {
                    loginId:xxxx,
                    loginPwd:xxxx
                }
            */</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
               è´¦å·ï¼š </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Input</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loginId<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
               å¯†ç ï¼š </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Input</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loginPwd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æäº¤</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="purecomponent-çº¯ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#purecomponent-çº¯ç»„ä»¶" aria-hidden="true">#</a> PureComponent çº¯ç»„ä»¶</h2><ul><li>çº¯ç»„ä»¶ï¼Œåªåœ¨éœ€è¦é‡æ–°æ¸²æŸ“çš„æ—¶å€™é‡æ–°æ¸²æŸ“ï¼Œç”¨äºé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ï¼ˆè¿è¡Œ render å‡½æ•°ï¼‰ï¼Œä»è€Œæé«˜æ•ˆç‡</li><li>ä¼˜åŒ–ï¼šå¦‚æœä¸€ä¸ªç»„ä»¶çš„å±æ€§å’ŒçŠ¶æ€éƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶æ˜¯æ²¡æœ‰å¿…è¦çš„</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState<span class="token punctuation">,</span> nextContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token function">ObjectEqual</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> nextProps<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">ObjectEqual</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> nextState<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ================</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ObjectEqual</span><span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> obj1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>obj1<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">,</span> obj2<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>PureComponent æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå¦‚æœæŸä¸ªç»„ä»¶ç»§æ‰¿è‡ªè¯¥ç»„ä»¶ï¼Œåˆ™è¯¥ç»„ä»¶çš„ shouldComponentUpdate ä¼šè¿›è¡Œä¼˜åŒ–ï¼Œå¯¹å±æ€§å’ŒçŠ¶æ€è¿›è¡Œæµ…æ¯”è¾ƒï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™ä¸ä¼šé‡æ–°æ¸²æŸ“</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>PureComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ClassDefault</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span> <span class="token comment">// ç»§æ‰¿ PureComponent å°±è¡Œ</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
           
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> ClassDefault<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ³¨æ„-1" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-1" aria-hidden="true">#</a> æ³¨æ„</h3><ul><li>ä¸ºäº†æ•ˆç‡ï¼Œèƒ½ç”¨ PureComponent å°½é‡ç”¨</li><li>PureComponent è¿›è¡Œçš„æ˜¯æµ…æ¯”è¾ƒ <ul><li>è¦æ±‚ä¸è¦æ”¹åŠ¨ä¹‹å‰çš„çŠ¶æ€ï¼Œæ°¸è¿œæ˜¯ä½¿ç”¨æ–°çš„çŠ¶æ€è¦†ç›–ä¹‹å‰çš„çŠ¶æ€ï¼Œä¿è¯æ¯æ¬¡éƒ½æ˜¯æ›´æ–°çš„çŠ¶æ€ï¼ˆImmutableï¼Œä¸å¯å˜å¯¹è±¡ï¼‰ <ul><li>å¯¹è±¡å¯ä»¥è¿™æ ·èµ‹å€¼ <code>this.setState({ obj: { ...this.state.obj, b: 50 } }</code></li><li>è¿™æ · obj å†…çš„ b å±æ€§å°±ä¼šè¢«é‡æ–°èµ‹å€¼ï¼Œå…¶ä»–å±æ€§ä¸å˜</li><li>æˆ–è€…ä½¿ç”¨<code>Object.assign({}, this.state.obj, { b: 50 })</code></li><li>Immutable.js ï¼šä¸€ä¸ªç¬¬ä¸‰æ–¹ js åº“ï¼Œä¸“é—¨ç”¨äºåˆ¶ä½œä¸å¯å˜å¯¹è±¡</li></ul></li></ul></li></ul><h2 id="react-memo-ç»„ä»¶-å†…ç½®é«˜é˜¶å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#react-memo-ç»„ä»¶-å†…ç½®é«˜é˜¶å‡½æ•°" aria-hidden="true">#</a> React.memo(ç»„ä»¶) å†…ç½®é«˜é˜¶å‡½æ•°</h2><ul><li>å‡½æ•°ç»„ä»¶ä¼˜åŒ–ä½¿ç”¨è¯¥å‡½æ•°å¤„ç†ä¸€ä¸‹å°±å¥½äº†ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªç±»ç»„ä»¶ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é«˜é˜¶ç»„ä»¶</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">FuncDefault</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>FuncDefault<span class="token punctuation">)</span> <span class="token comment">// å¤„ç†ä¸€ä¸‹å°±å¥½</span>
<span class="token comment">// =======</span>
<span class="token keyword">function</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token parameter">FuncComp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// memo æ¨¡æ‹Ÿ</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">Memo</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FuncComp</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">// or return &lt;&gt; {FuncComp(this.props)} &lt;/&gt;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="render-props-é‡å¤ä»£ç ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#render-props-é‡å¤ä»£ç ä¼˜åŒ–" aria-hidden="true">#</a> render props é‡å¤ä»£ç ä¼˜åŒ–</h2><p>æœ‰æ—¶å€™ï¼ŒæŸäº›ç»„ä»¶çš„å„ç§åŠŸèƒ½åŠå…¶å¤„ç†é€»è¾‘å‡ ä¹å®Œå…¨ç›¸åŒï¼Œåªæ˜¯æ˜¾ç¤ºçš„ç•Œé¢ä¸ä¸€æ ·ï¼Œå»ºè®®ä¸‹é¢çš„æ–¹å¼è®¤é€‰å…¶ä¸€æ¥è§£å†³é‡å¤ä»£ç çš„é—®é¢˜ï¼ˆæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼‰</p><ul><li>render props <ul><li>æŸä¸ªç»„ä»¶ï¼Œéœ€è¦æŸä¸ªå±æ€§</li><li>è¯¥å±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ç”¨äºæ¸²æŸ“</li><li>å‡½æ•°çš„å‚æ•°ä¼šä¼ é€’ä¸ºéœ€è¦çš„æ•°æ®</li><li>æ³¨æ„çº¯ç»„ä»¶çš„å±æ€§ï¼ˆå°½é‡é¿å…æ¯æ¬¡ä¼ é€’çš„render propsçš„åœ°å€ä¸ä¸€è‡´ï¼‰</li><li>é€šå¸¸è¯¥å±æ€§çš„åå­—å«åšrender</li></ul></li><li>HOC é«˜é˜¶ç»„ä»¶ <ul><li>æ›´åŠ å…·æœ‰é€šç”¨æ€§</li></ul></li></ul><h2 id="portals-æ’æ§½" tabindex="-1"><a class="header-anchor" href="#portals-æ’æ§½" aria-hidden="true">#</a> Portals æ’æ§½</h2><ul><li>æ’æ§½ï¼šå°†ä¸€ä¸ªReactå…ƒç´ æ¸²æŸ“åˆ°æŒ‡å®šçš„DOMå®¹å™¨ä¸­ <ul><li>ä¹Ÿå°±æ˜¯å¯ä»¥ä¸æ¸²æŸ“åˆ°é»˜è®¤çš„ #root div ä¸­ï¼Œä½ æŒ‡å®šå“ªä¸ªå°±æ¸²æŸ“åˆ°å“ªä¸ªé‡Œ</li><li>ä½†æ˜¯ä¼šæœ‰äº‹ä»¶å†’æ³¡é—®é¢˜ï¼Œéœ€è¦æ³¨æ„</li></ul></li><li>ReactDOM.createPortal(Reactå…ƒç´ , çœŸå®çš„DOMå®¹å™¨)ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªReactå…ƒç´ </li></ul><h3 id="æ³¨æ„äº‹ä»¶å†’æ³¡" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹ä»¶å†’æ³¡" aria-hidden="true">#</a> æ³¨æ„äº‹ä»¶å†’æ³¡</h3><ul><li>Reactä¸­çš„äº‹ä»¶æ˜¯åŒ…è£…è¿‡çš„</li><li>å®ƒçš„äº‹ä»¶å†’æ³¡æ˜¯æ ¹æ®è™šæ‹ŸDOMæ ‘æ¥å†’æ³¡çš„ï¼Œä¸çœŸå®çš„DOMæ ‘æ— å…³</li></ul><h2 id="é”™è¯¯è¾¹ç•Œ" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯è¾¹ç•Œ" aria-hidden="true">#</a> é”™è¯¯è¾¹ç•Œ</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè‹¥ä¸€ä¸ªç»„ä»¶åœ¨<strong>æ¸²æŸ“æœŸé—´</strong>ï¼ˆrenderï¼‰å‘ç”Ÿé”™è¯¯ï¼Œä¼šå¯¼è‡´æ•´ä¸ªç»„ä»¶æ ‘å…¨éƒ¨è¢«å¸è½½</p><h3 id="é”™è¯¯è¾¹ç•Œ-éœ€è¦è‡ªå·±å†™" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯è¾¹ç•Œ-éœ€è¦è‡ªå·±å†™" aria-hidden="true">#</a> é”™è¯¯è¾¹ç•Œ éœ€è¦è‡ªå·±å†™</h3><p>æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œ<strong>è¯¥ç»„ä»¶ä¼šæ•è·åˆ°æ¸²æŸ“æœŸé—´ï¼ˆrenderï¼‰å­ç»„ä»¶å‘ç”Ÿçš„é”™è¯¯</strong>ï¼Œ<strong>å¹¶æœ‰èƒ½åŠ›é˜»æ­¢é”™è¯¯ç»§ç»­ä¼ æ’­</strong></p><h3 id="è®©æŸä¸ªç»„ä»¶æ•è·é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#è®©æŸä¸ªç»„ä»¶æ•è·é”™è¯¯" aria-hidden="true">#</a> è®©æŸä¸ªç»„ä»¶æ•è·é”™è¯¯</h3><ul><li>ç¼–å†™ç”Ÿå‘½å‘¨æœŸå‡½æ•° getDerivedStateFromError <ul><li>é™æ€å‡½æ•°</li><li>è¿è¡Œæ—¶é—´ç‚¹ï¼šæ¸²æŸ“å­ç»„ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿé”™è¯¯ä¹‹åï¼Œåœ¨æ›´æ–°é¡µé¢ä¹‹å‰</li><li><strong>æ³¨æ„ï¼šåªæœ‰å­ç»„ä»¶å‘ç”Ÿé”™è¯¯ï¼Œæ‰ä¼šè¿è¡Œè¯¥å‡½æ•°</strong></li><li>è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒReactä¼šä½¿ç”¨è¯¥å¯¹è±¡çš„å±æ€§è¦†ç›–æ‰å½“å‰ç»„ä»¶çš„state</li><li>å‚æ•°ï¼šé”™è¯¯å¯¹è±¡</li><li>é€šå¸¸ï¼Œè¯¥å‡½æ•°ç”¨äºæ”¹å˜çŠ¶æ€</li></ul></li><li>ç¼–å†™ç”Ÿå‘½å‘¨æœŸå‡½æ•° componentDidCatch <ul><li>å®ä¾‹æ–¹æ³•</li><li>è¿è¡Œæ—¶é—´ç‚¹ï¼šæ¸²æŸ“å­ç»„ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿé”™è¯¯ï¼Œæ›´æ–°é¡µé¢ä¹‹åï¼Œç”±äºå…¶è¿è¡Œæ—¶é—´ç‚¹æ¯”è¾ƒé åï¼Œå› æ­¤ä¸å¤ªä¼šåœ¨è¯¥å‡½æ•°ä¸­æ”¹å˜çŠ¶æ€</li><li>é€šå¸¸ï¼Œè¯¥å‡½æ•°ç”¨äºè®°å½•é”™è¯¯æ¶ˆæ¯</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>PureComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ErrorBound</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">hasError</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">getDerivedStateFromError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ•è·é”™è¯¯ä¿¡æ¯</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">hasError</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// è¦†ç›– state</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> errorInfo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ•è·é”™è¯¯ä¿¡æ¯</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è®°å½•é”™è¯¯ä¿¡æ¯&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">,</span> errorInfo<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å‘ç”Ÿé”™è¯¯äº†</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">;</span> <span class="token comment">// ç©¿è¿‡æ¥çš„ children å†…å¦‚æœå‡ºç°é”™è¯¯ï¼Œä¼šæ‰§è¡Œä¸Šè¾¹çš„ä»£ç </span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> ErrorBound<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ³¨æ„-2" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-2" aria-hidden="true">#</a> æ³¨æ„</h3><p>æŸäº›é”™è¯¯ï¼Œé”™è¯¯è¾¹ç•Œç»„ä»¶æ— æ³•æ•è·</p><ul><li>è‡ªèº«çš„é”™è¯¯</li><li>å¼‚æ­¥çš„é”™è¯¯</li><li>äº‹ä»¶ä¸­çš„é”™è¯¯</li><li>ä»¥ä¸Šé”™è¯¯è‡ªè¡Œä½¿ç”¨ <code>try{} cacth(e)</code>å¤„ç†</li></ul><p>æ€»ç»“ï¼šä»…å¤„ç†æ¸²æŸ“å­ç»„ä»¶æœŸé—´çš„åŒæ­¥é”™è¯¯</p><h2 id="reactä¸­çš„äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#reactä¸­çš„äº‹ä»¶" aria-hidden="true">#</a> Reactä¸­çš„äº‹ä»¶</h2><p>è¿™é‡Œçš„äº‹ä»¶ï¼šReact å†…ç½®çš„ DOM ç»„ä»¶ä¸­çš„äº‹ä»¶</p><ul><li>ç»™ document æ³¨å†Œäº‹ä»¶</li><li>å‡ ä¹æ‰€æœ‰çš„å…ƒç´ çš„äº‹ä»¶å¤„ç†ï¼Œå‡åœ¨ document çš„äº‹ä»¶ä¸­å¤„ç† <ul><li>ä¸€äº›ä¸å†’æ³¡çš„äº‹ä»¶ï¼Œæ˜¯ç›´æ¥åœ¨å…ƒç´ ä¸Šç›‘å¬</li><li>ä¸€äº› document ä¸Šé¢æ²¡æœ‰çš„äº‹ä»¶ï¼Œç›´æ¥åœ¨å…ƒç´ ä¸Šç›‘å¬</li></ul></li><li>åœ¨ document çš„äº‹ä»¶å¤„ç†ï¼ŒReact ä¼šæ ¹æ®è™šæ‹Ÿ DOM æ ‘çš„å®Œæˆäº‹ä»¶å‡½æ•°çš„è°ƒç”¨</li><li>React çš„äº‹ä»¶å‚æ•°ï¼Œå¹¶éçœŸå®çš„ DOM äº‹ä»¶å‚æ•°ï¼Œæ˜¯ React åˆæˆçš„ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç±»ä¼¼äºçœŸå® DOMçš„äº‹ä»¶å‚æ•° <ul><li>stopPropagationï¼Œé˜»æ­¢äº‹ä»¶åœ¨è™šæ‹ŸDOMæ ‘ä¸­å†’æ³¡</li><li>nativeEventï¼Œå¯ä»¥å¾—åˆ°çœŸå®çš„DOMäº‹ä»¶å¯¹è±¡</li><li>ä¸ºäº†æé«˜æ‰§è¡Œæ•ˆç‡ï¼ŒReactä½¿ç”¨äº‹ä»¶å¯¹è±¡æ± æ¥å¤„ç†äº‹ä»¶å¯¹è±¡</li></ul></li></ul><h3 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> æ³¨æ„äº‹é¡¹</h3><ul><li>å¦‚æœç»™çœŸå®çš„ DOM æ³¨å†Œäº‹ä»¶ï¼Œé˜»æ­¢äº†äº‹ä»¶å†’æ³¡ï¼Œåˆ™ä¼šå¯¼è‡´ react çš„ç›¸åº”äº‹ä»¶æ— æ³•è§¦å‘</li><li>å¦‚æœç»™çœŸå®çš„ DOM æ³¨å†Œäº‹ä»¶ï¼Œäº‹ä»¶ä¼šå…ˆäºReactäº‹ä»¶è¿è¡Œ</li><li>é€šè¿‡ React çš„äº‹ä»¶ä¸­é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œæ— æ³•é˜»æ­¢çœŸå®çš„ DOM äº‹ä»¶å†’æ³¡</li><li>å¯ä»¥é€šè¿‡ nativeEvent.stopImmediatePropagation()ï¼Œé˜»æ­¢ document ä¸Šå‰©ä½™äº‹ä»¶çš„æ‰§è¡Œ</li><li>åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œä¸è¦å¼‚æ­¥çš„ä½¿ç”¨äº‹ä»¶å¯¹è±¡ï¼Œå¦‚æœä¸€å®šè¦ä½¿ç”¨ï¼Œéœ€è¦è°ƒç”¨ persist å‡½æ•°æŒä¹…ä¿ç•™å‡½æ•°</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">StopPropagation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;reactï¼šdivè¢«ç‚¹å‡»äº†&#39;</span><span class="token punctuation">)</span> <span class="token comment">// å†’æ³¡è¢«é˜»æ­¢</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;react: æŒ‰é’®è¢«ç‚¹å‡»äº†&#39;</span><span class="token punctuation">)</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">)</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// é˜»æ­¢å†’æ³¡çš„åˆ¤æ–­å‡½æ•°</span>
                e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é˜»æ­¢å†’æ³¡</span>
                <span class="token comment">// e.nativeEvent.stopImmediatePropagation() // é˜»æ­¢ document ä¸Šå‰©ä½™äº‹ä»¶çš„æ‰§è¡Œ</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æŒ‰é’®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// ä¸èƒ½è¢«é˜»æ­¢</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;çœŸå®çš„domäº‹ä»¶è¢«ï¼šid ä¸º root çš„ div è¢«ç‚¹å‡»äº†&#39;</span><span class="token punctuation">)</span>
    e<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é˜»æ­¢ document ä¸Šå‰©ä½™äº‹ä»¶çš„æ‰§è¡Œï¼Œä¸”å¯¼è‡´ react çš„ç›¸åº”äº‹ä»¶æ— æ³•è§¦å‘</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;documentè¢«ç‚¹å‡»äº†&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> StopPropagation<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ¸²æŸ“åŸç†-è¶…çº§é‡è¦-ï¸" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“åŸç†-è¶…çº§é‡è¦-ï¸" aria-hidden="true">#</a> æ¸²æŸ“åŸç†ï¼ˆè¶…çº§é‡è¦â€¼ï¸ï¼‰</h2><p>æ¸²æŸ“ï¼šç”Ÿæˆç”¨äºæ˜¾ç¤ºçš„å¯¹è±¡ï¼Œä»¥åŠå°†è¿™äº›å¯¹è±¡å½¢æˆçœŸå®çš„DOMå¯¹è±¡</p>`,189),L=n("li",null,[n("div",null,[n("h1",null,"æ ‡é¢˜")])],-1),B=n("li",null,"React èŠ‚ç‚¹ï¼šä¸“é—¨ç”¨äºæ¸²æŸ“åˆ° UI ç•Œé¢çš„å¯¹è±¡ï¼ŒReact ä¼šé€šè¿‡ React å…ƒç´ ï¼Œåˆ›å»º React èŠ‚ç‚¹ï¼ŒReactDOM ä¸€å®šæ˜¯é€šè¿‡ React èŠ‚ç‚¹æ¥è¿›è¡Œæ¸²æŸ“çš„",-1),V=n("li",null,[s("èŠ‚ç‚¹ç±»å‹ï¼š "),n("ul",null,[n("li",null,"React DOM èŠ‚ç‚¹ï¼šåˆ›å»ºè¯¥èŠ‚ç‚¹çš„ React å…ƒç´ ç±»å‹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"),n("li",null,"React ç»„ä»¶èŠ‚ç‚¹ï¼šåˆ›å»ºè¯¥èŠ‚ç‚¹çš„ React å…ƒç´ ç±»å‹æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ˜¯ä¸€ä¸ªç±»"),n("li",null,"React æ–‡æœ¬èŠ‚ç‚¹ï¼šç”±å­—ç¬¦ä¸²ã€æ•°å­—åˆ›å»ºçš„ï¼Œæ–‡æœ¬å†…å®¹"),n("li",null,"React ç©ºèŠ‚ç‚¹ï¼šç”± nullã€undefinedã€falseã€true"),n("li",null,"React æ•°ç»„èŠ‚ç‚¹ï¼šè¯¥èŠ‚ç‚¹ç”±ä¸€ä¸ªæ•°ç»„åˆ›å»º")])],-1),W=n("li",null,"çœŸå® DOMï¼šé€šè¿‡ document.createElement åˆ›å»ºçš„ dom å…ƒç´ ",-1),J=p('<p><img src="'+d+`" alt="image.png"></p><h3 id="é¦–æ¬¡æ¸²æŸ“-æ–°èŠ‚ç‚¹æ¸²æŸ“-render-è™šæ‹Ÿå…ƒç´ -ç»‘å®šçš„æ ¹ç»“ç‚¹" tabindex="-1"><a class="header-anchor" href="#é¦–æ¬¡æ¸²æŸ“-æ–°èŠ‚ç‚¹æ¸²æŸ“-render-è™šæ‹Ÿå…ƒç´ -ç»‘å®šçš„æ ¹ç»“ç‚¹" aria-hidden="true">#</a> é¦–æ¬¡æ¸²æŸ“(æ–°èŠ‚ç‚¹æ¸²æŸ“) render(è™šæ‹Ÿå…ƒç´ , ç»‘å®šçš„æ ¹ç»“ç‚¹)</h3><ol><li>é€šè¿‡å‚æ•°çš„å€¼åˆ›å»ºèŠ‚ç‚¹</li><li>æ ¹æ®ä¸åŒçš„èŠ‚ç‚¹ï¼Œåšä¸åŒçš„äº‹æƒ… <ul><li>æ–‡æœ¬èŠ‚ç‚¹ï¼šé€šè¿‡ document.createTextNode åˆ›å»ºçœŸå®çš„æ–‡æœ¬èŠ‚ç‚¹</li><li>ç©ºèŠ‚ç‚¹ï¼šä»€ä¹ˆéƒ½ä¸åš</li><li>æ•°ç»„èŠ‚ç‚¹ï¼šéå†æ•°ç»„ï¼Œå°†æ•°ç»„æ¯ä¸€é¡¹é€’å½’åˆ›å»ºèŠ‚ç‚¹ï¼ˆå›åˆ°ç¬¬1æ­¥è¿›è¡Œåå¤æ“ä½œï¼Œç›´åˆ°éå†ç»“æŸï¼‰</li><li>DOM èŠ‚ç‚¹ï¼šé€šè¿‡ document.createElement åˆ›å»ºçœŸå®çš„DOMå¯¹è±¡ï¼Œç„¶åç«‹å³è®¾ç½®è¯¥çœŸå®DOMå…ƒç´ çš„å„ç§å±æ€§ï¼Œç„¶åéå†å¯¹åº” React å…ƒç´ çš„ children å±æ€§ï¼Œé€’å½’æ“ä½œï¼ˆå›åˆ°ç¬¬1æ­¥è¿›è¡Œåå¤æ“ä½œï¼Œç›´åˆ°éå†ç»“æŸï¼‰</li><li>ç»„ä»¶èŠ‚ç‚¹ <ul><li>å‡½æ•°ç»„ä»¶ï¼šè°ƒç”¨å‡½æ•°(è¯¥å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå¯ä»¥ç”ŸæˆèŠ‚ç‚¹çš„å†…å®¹)ï¼Œå°†è¯¥å‡½æ•°çš„è¿”å›ç»“æœé€’å½’ç”ŸæˆèŠ‚ç‚¹ï¼ˆå›åˆ°ç¬¬1æ­¥è¿›è¡Œåå¤æ“ä½œï¼Œç›´åˆ°éå†ç»“æŸï¼‰</li><li>ç±»ç»„ä»¶ï¼š <ol><li>åˆ›å»ºè¯¥ç±»çš„å®ä¾‹</li><li>ç«‹å³è°ƒç”¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼šstatic getDerivedStateFromProps</li><li>è¿è¡Œè¯¥å¯¹è±¡çš„ render æ–¹æ³•ï¼Œæ‹¿åˆ°èŠ‚ç‚¹å¯¹è±¡ï¼ˆå°†è¯¥èŠ‚ç‚¹é€’å½’æ“ä½œï¼Œå›åˆ°ç¬¬1æ­¥è¿›è¡Œåå¤æ“ä½œï¼‰</li><li>å°†è¯¥ç»„ä»¶çš„ componentDidMount åŠ å…¥åˆ°æ‰§è¡Œé˜Ÿåˆ—ï¼ˆå…ˆè¿›å…ˆå‡ºï¼Œå…ˆè¿›å…ˆæ‰§è¡Œï¼‰ï¼Œå½“æ•´ä¸ªè™šæ‹Ÿ DOMæ ‘ å…¨éƒ¨æ„å»ºå®Œæ¯•ï¼Œå¹¶ä¸”å°†çœŸå®çš„DOMå¯¹è±¡åŠ å…¥åˆ°å®¹å™¨ä¸­åï¼Œæ‰§è¡Œè¯¥é˜Ÿåˆ—</li></ol></li></ul></li></ul></li><li>ç”Ÿæˆå‡ºè™šæ‹Ÿ DOM æ ‘ä¹‹åï¼Œå°†è¯¥æ ‘ä¿å­˜èµ·æ¥ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨</li><li>å°†ä¹‹å‰ç”Ÿæˆçš„çœŸå®çš„ DOM å¯¹è±¡ï¼ŒåŠ å…¥åˆ°å®¹å™¨ä¸­</li></ol><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>assaf<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        æ ‡é¢˜
        </span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ®µè½</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token keyword">undefined</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šä»£ç ç”Ÿæˆçš„è™šæ‹Ÿ DOM æ ‘ï¼š <img src="`+v+`" alt="image.png"></p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Comp1</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Comp1 </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>n<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Comp1</span></span> <span class="token attr-name">n</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šä»£ç ç”Ÿæˆçš„è™šæ‹Ÿ DOM æ ‘ï¼š <img src="`+m+`" alt="image.png"></p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Comp1</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Comp1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Comp1</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šä»£ç ç”Ÿæˆçš„è™šæ‹Ÿ DOM æ ‘ï¼š <img src="`+g+`" alt="image.png"></p><h3 id="æ›´æ–°èŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#æ›´æ–°èŠ‚ç‚¹" aria-hidden="true">#</a> æ›´æ–°èŠ‚ç‚¹</h3><h4 id="æ›´æ–°çš„åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#æ›´æ–°çš„åœºæ™¯" aria-hidden="true">#</a> æ›´æ–°çš„åœºæ™¯</h4><ul><li>é‡æ–°è°ƒç”¨ ReactDOM.render <ul><li>è§¦å‘æ ¹èŠ‚ç‚¹æ›´æ–°</li></ul></li><li>åœ¨ç±»ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ä¸­è°ƒç”¨ setState <ul><li>ä¼šå¯¼è‡´è¯¥å®ä¾‹æ‰€åœ¨çš„èŠ‚ç‚¹æ›´æ–°</li></ul></li></ul><h4 id="èŠ‚ç‚¹çš„æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#èŠ‚ç‚¹çš„æ›´æ–°" aria-hidden="true">#</a> èŠ‚ç‚¹çš„æ›´æ–°</h4><ul><li>å¦‚æœè°ƒç”¨çš„æ˜¯ ReactDOM.renderï¼Œè¿›å…¥æ ¹èŠ‚ç‚¹çš„<strong>å¯¹æ¯”ï¼ˆdiffï¼‰æ›´æ–°</strong></li><li>å¦‚æœè°ƒç”¨çš„æ˜¯ setState <ol><li>è¿è¡Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œstatic getDerivedStateFromProps</li><li>è¿è¡Œ shouldComponentUpdateï¼Œå¦‚æœè¯¥å‡½æ•°è¿”å›falseï¼Œç»ˆæ­¢å½“å‰æµç¨‹</li><li>è¿è¡Œ renderï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œè¿›å…¥è¯¥æ–°çš„èŠ‚ç‚¹çš„<strong>å¯¹æ¯”æ›´æ–°</strong></li><li>å°†ç”Ÿå‘½å‘¨æœŸå‡½æ•° getSnapshotBeforeUpdate åŠ å…¥æ‰§è¡Œé˜Ÿåˆ—ï¼Œä»¥å¾…å°†æ¥æ‰§è¡Œ</li><li>å°†ç”Ÿå‘½å‘¨æœŸå‡½æ•° componentDidUpdate åŠ å…¥æ‰§è¡Œé˜Ÿåˆ—ï¼Œä»¥å¾…å°†æ¥æ‰§è¡Œ</li></ol></li></ul><h4 id="åç»­æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#åç»­æ­¥éª¤" aria-hidden="true">#</a> åç»­æ­¥éª¤</h4><ol><li>æ›´æ–°è™šæ‹Ÿ DOM æ ‘</li><li>å®ŒæˆçœŸå®çš„DOMæ›´æ–°</li><li>ä¾æ¬¡è°ƒç”¨æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ componentDidMount</li><li>ä¾æ¬¡è°ƒç”¨æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ getSnapshotBeforeUpdate</li><li>ä¾æ¬¡è°ƒç”¨æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ componentDidUpdate</li><li>ä¾æ¬¡è°ƒç”¨æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ componentWillUnmount</li></ol><h3 id="å¯¹æ¯”æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#å¯¹æ¯”æ›´æ–°" aria-hidden="true">#</a> å¯¹æ¯”æ›´æ–°</h3><p>å°†æ–°äº§ç”Ÿçš„èŠ‚ç‚¹ï¼Œå¯¹æ¯”ä¹‹å‰è™šæ‹Ÿ DOM ä¸­çš„èŠ‚ç‚¹ï¼Œå‘ç°å·®å¼‚ï¼Œå®Œæˆæ›´æ–°</p><h4 id="å¯¹æ¯”ä¹‹å‰-dom-æ ‘ä¸­å“ªä¸ªèŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#å¯¹æ¯”ä¹‹å‰-dom-æ ‘ä¸­å“ªä¸ªèŠ‚ç‚¹" aria-hidden="true">#</a> å¯¹æ¯”ä¹‹å‰ DOM æ ‘ä¸­å“ªä¸ªèŠ‚ç‚¹</h4><ul><li>React ä¸ºäº†æé«˜å¯¹æ¯”æ•ˆç‡ï¼Œåšå‡ºä»¥ä¸‹å‡è®¾ <ul><li>å‡è®¾èŠ‚ç‚¹ä¸ä¼šå‡ºç°å±‚æ¬¡çš„ç§»åŠ¨ï¼ˆå¯¹æ¯”æ—¶ï¼Œç›´æ¥æ‰¾åˆ°æ—§æ ‘ä¸­å¯¹åº”ä½ç½®çš„èŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼‰</li><li>ä¸åŒçš„èŠ‚ç‚¹ç±»å‹ä¼šç”Ÿæˆä¸åŒçš„ç»“æ„ <ul><li>ç›¸åŒçš„èŠ‚ç‚¹ç±»å‹ï¼šèŠ‚ç‚¹æœ¬èº«ç±»å‹ç›¸åŒï¼Œå¦‚æœæ˜¯ç”±Reactå…ƒç´ ç”Ÿæˆï¼Œtypeå€¼è¿˜å¿…é¡»ä¸€è‡´</li><li>å…¶ä»–çš„ï¼Œéƒ½å±äºä¸ç›¸åŒçš„èŠ‚ç‚¹ç±»å‹</li></ul></li><li>å¤šä¸ªå…„å¼Ÿé€šè¿‡å”¯ä¸€æ ‡è¯†ï¼ˆkeyï¼‰æ¥ç¡®å®šå¯¹æ¯”çš„æ–°èŠ‚ç‚¹ <ul><li><strong>key å€¼çš„ä½œç”¨ï¼šç”¨äºé€šè¿‡æ—§èŠ‚ç‚¹ï¼Œå¯»æ‰¾å¯¹åº”çš„æ–°èŠ‚ç‚¹ï¼Œå¦‚æœæŸä¸ªæ—§èŠ‚ç‚¹æœ‰ key å€¼ï¼Œåˆ™å…¶æ›´æ–°æ—¶ï¼Œä¼šå¯»æ‰¾ç›¸åŒå±‚çº§ä¸­çš„ç›¸åŒ key å€¼çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œå¯¹æ¯”ï¼Œå°±æ˜¯ç”¨æ¥ç¡®å®šå¯¹æ¯”ç›®æ ‡çš„</strong></li><li><strong>key å€¼åº”è¯¥åœ¨ä¸€ä¸ªèŒƒå›´å†…å”¯ä¸€ï¼ˆå…„å¼ŸèŠ‚ç‚¹ä¸­ï¼‰ï¼Œå¹¶ä¸”åº”è¯¥ä¿æŒç¨³å®š</strong></li><li><strong>key å€¼å¯ä»¥ç»‘å®šåˆ°ä»»ä½• React å…ƒç´ å’Œç»„ä»¶ä¸Š</strong></li></ul></li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ ‡é¢˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Comp</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>comp<span class="token punctuation">&#39;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isVisible <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isVisible<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ˜¾ç¤º/éšè—</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Comp</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>comp<span class="token punctuation">&#39;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isVisible <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isVisible<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ˜¾ç¤º/éšè—</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ‰¾åˆ°äº†å¯¹æ¯”çš„ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#æ‰¾åˆ°äº†å¯¹æ¯”çš„ç›®æ ‡" aria-hidden="true">#</a> æ‰¾åˆ°äº†å¯¹æ¯”çš„ç›®æ ‡</h4><p>åˆ¤æ–­<strong>èŠ‚ç‚¹ç±»å‹</strong>æ˜¯å¦ä¸€è‡´</p><ul><li><strong>ä¸€è‡´</strong><ul><li>æ ¹æ®ä¸åŒçš„èŠ‚ç‚¹ç±»å‹ï¼Œåšä¸åŒçš„äº‹æƒ…</li><li>ç©ºèŠ‚ç‚¹ï¼šä¸åšä»»ä½•äº‹æƒ…</li><li>DOM èŠ‚ç‚¹ <ol><li>ç›´æ¥é‡ç”¨ä¹‹å‰çš„çœŸå® DOM å¯¹è±¡</li><li>å°†å…¶å±æ€§çš„å˜åŒ–è®°å½•ä¸‹æ¥ï¼Œä»¥å¾…å°†æ¥ç»Ÿä¸€å®Œæˆæ›´æ–°ï¼ˆç°åœ¨ä¸ä¼šçœŸæ­£çš„å˜åŒ–ï¼‰</li><li>éå†è¯¥æ–°çš„ React å…ƒç´ çš„å­å…ƒç´ ï¼Œé€’å½’å¯¹æ¯”æ›´æ–°</li></ol></li><li>æ–‡æœ¬èŠ‚ç‚¹ <ol><li>ç›´æ¥é‡ç”¨ä¹‹å‰çš„çœŸå® DOM å¯¹è±¡</li><li>å°†æ–°çš„æ–‡æœ¬å˜åŒ–è®°å½•ä¸‹æ¥ï¼Œå°†æ¥ç»Ÿä¸€å®Œæˆæ›´æ–°</li></ol></li><li>ç»„ä»¶èŠ‚ç‚¹ <ul><li>å‡½æ•°ç»„ä»¶ <ol><li>ç›´æ¥é‡æ–°è°ƒç”¨å‡½æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼Œè¿›å…¥é€’å½’å¯¹æ¯”æ›´æ–°</li></ol></li><li>ç±»ç»„ä»¶ <ol><li>ç›´æ¥é‡ç”¨ä¹‹å‰çš„å®ä¾‹</li><li>è°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³• getDerivedStateFromProps</li><li>è°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³• shouldComponentUpdateï¼Œè‹¥è¯¥æ–¹æ³•è¿”å› falseï¼Œç»ˆæ­¢</li><li>è¿è¡Œ renderï¼Œå¾—åˆ°æ–°çš„èŠ‚ç‚¹å¯¹è±¡ï¼Œè¿›å…¥é€’å½’å¯¹æ¯”æ›´æ–°</li><li>å°†è¯¥å¯¹è±¡çš„ getSnapshotBeforeUpdate åŠ å…¥é˜Ÿåˆ—</li><li>å°†è¯¥å¯¹è±¡çš„ componentDidUpdate åŠ å…¥é˜Ÿåˆ—</li></ol></li></ul></li><li>æ•°ç»„èŠ‚ç‚¹ <ol><li>éå†æ•°ç»„è¿›è¡Œé€’å½’å¯¹æ¯”æ›´æ–°</li></ol></li></ul></li><li><strong>ä¸ä¸€è‡´</strong></li></ul><p>æ•´ä½“ä¸Šï¼Œå¸è½½æ—§çš„èŠ‚ç‚¹ï¼Œå…¨æ–°åˆ›å»ºæ–°çš„èŠ‚ç‚¹</p><ul><li><strong>å…ˆåˆ›å»ºæ–°èŠ‚ç‚¹</strong><ul><li>è¿›å…¥æ–°èŠ‚ç‚¹çš„æŒ‚è½½æµç¨‹</li></ul></li><li><strong>å†å¸è½½æ—§èŠ‚ç‚¹</strong><ul><li><strong>æ–‡æœ¬èŠ‚ç‚¹ã€DOM èŠ‚ç‚¹ã€æ•°ç»„èŠ‚ç‚¹ã€ç©ºèŠ‚ç‚¹ã€å‡½æ•°ç»„ä»¶èŠ‚ç‚¹</strong><ol><li>ç›´æ¥æ”¾å¼ƒè¯¥èŠ‚ç‚¹ï¼Œå¦‚æœèŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œé€’å½’å¸è½½èŠ‚ç‚¹</li></ol></li><li><strong>ç±»ç»„ä»¶èŠ‚ç‚¹</strong><ol><li>ç›´æ¥æ”¾å¼ƒè¯¥èŠ‚ç‚¹</li><li>è°ƒç”¨è¯¥èŠ‚ç‚¹çš„ componentWillUnMount å‡½æ•°</li><li>é€’å½’å¸è½½å­èŠ‚ç‚¹</li></ol></li></ul></li></ul><h4 id="æ²¡æœ‰æ‰¾åˆ°å¯¹æ¯”çš„ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#æ²¡æœ‰æ‰¾åˆ°å¯¹æ¯”çš„ç›®æ ‡" aria-hidden="true">#</a> æ²¡æœ‰æ‰¾åˆ°å¯¹æ¯”çš„ç›®æ ‡</h4><p>æ–°çš„ DOM æ ‘ä¸­æœ‰èŠ‚ç‚¹è¢«åˆ é™¤æˆ–è€…æ–°çš„ DOM æ ‘ä¸­æœ‰èŠ‚ç‚¹æ·»åŠ </p><ul><li>åˆ›å»ºæ–°åŠ å…¥çš„èŠ‚ç‚¹</li><li>å¸è½½å¤šä½™çš„æ—§èŠ‚ç‚¹</li></ul><h2 id="å·¥å…·" tabindex="-1"><a class="header-anchor" href="#å·¥å…·" aria-hidden="true">#</a> å·¥å…·</h2><h3 id="ä¸¥æ ¼æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ä¸¥æ ¼æ¨¡å¼" aria-hidden="true">#</a> ä¸¥æ ¼æ¨¡å¼</h3><h4 id="strictmode-react-strictmode" tabindex="-1"><a class="header-anchor" href="#strictmode-react-strictmode" aria-hidden="true">#</a> StrictMode <code>React.StrictMode</code></h4><p>æœ¬è´¨æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè¯¥ç»„ä»¶ä¸è¿›è¡ŒUIæ¸²æŸ“ï¼ˆåƒç©ºæ ‡ç­¾ï¼šReact.Fragment &lt;&gt; &lt;/&gt;ï¼‰ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼Œåœ¨æ¸²æŸ“å†…éƒ¨ç»„ä»¶æ—¶ï¼Œå‘ç°ä¸åˆé€‚çš„ä»£ç ã€‚</p><ul><li>è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ</li><li>å…³äºä½¿ç”¨è¿‡æ—¶å­—ç¬¦ä¸² ref API çš„è­¦å‘Š</li><li>å…³äºä½¿ç”¨åºŸå¼ƒçš„ findDOMNode æ–¹æ³•çš„è­¦å‘Š</li><li>æ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨ <ul><li>Reactè¦æ±‚ï¼Œå‰¯ä½œç”¨ä»£ç ä»…èƒ½å‡ºç°åœ¨ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ <ul><li>ComponentDidMount</li><li>ComponentDidUpdate</li><li>ComponentWillUnMount</li></ul></li></ul></li></ul><p>**å‰¯ä½œç”¨ï¼š**ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œåšäº†ä¸€äº›ä¼šå½±å“å‡½æ•°å¤–éƒ¨æ•°æ®çš„äº‹æƒ…ï¼Œä¾‹å¦‚ï¼š</p><ul><li>å¼‚æ­¥å¤„ç†</li><li>æ”¹å˜å‚æ•°å€¼</li><li>æ”¹å˜çŠ¶æ€ï¼ŒsetState</li><li>æœ¬åœ°å­˜å‚¨</li><li>æ”¹å˜å‡½æ•°å¤–éƒ¨çš„å˜é‡ï¼Œé—­åŒ…ç­‰</li></ul><p><strong>ç›¸åçš„ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨ï¼Œåˆ™å¯ä»¥è®¤ä¸ºè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªçº¯å‡½æ•°</strong> åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè™½ç„¶ä¸èƒ½ç›‘æ§åˆ°å…·ä½“çš„å‰¯ä½œç”¨ä»£ç ï¼Œä½†å®ƒä¼šå°†ä¸èƒ½å…·æœ‰å‰¯ä½œç”¨çš„å‡½æ•°è°ƒç”¨ä¸¤éï¼Œä»¥ä¾¿å‘ç°é—®é¢˜ï¼ˆè¿™ç§æƒ…å†µï¼Œä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹æœ‰æ•ˆï¼‰</p><ul><li>æ£€æµ‹è¿‡æ—¶çš„ context API</li></ul><h3 id="profiler" tabindex="-1"><a class="header-anchor" href="#profiler" aria-hidden="true">#</a> Profiler</h3><p>æ€§èƒ½åˆ†æå·¥å…·ï¼Œæµè§ˆå™¨æ’ä»¶ åˆ†ææŸä¸€æ¬¡æˆ–å¤šæ¬¡æäº¤ï¼ˆæ›´æ–°ï¼‰ï¼Œæ¶‰åŠåˆ°çš„ç»„ä»¶çš„æ¸²æŸ“æ—¶é—´</p><ul><li>ç«ç„°å›¾ï¼šå¾—åˆ°æŸä¸€æ¬¡æäº¤ï¼Œæ¯ä¸ªç»„ä»¶æ€»çš„æ¸²æŸ“æ—¶é—´ä»¥åŠè‡ªèº«çš„æ¸²æŸ“æ—¶é—´</li><li>æ’åºå›¾ï¼šå¾—åˆ°æŸä¸€æ¬¡æäº¤ï¼Œæ¯ä¸ªç»„ä»¶è‡ªèº«æ¸²æŸ“æ—¶é—´çš„æ’åº</li><li>ç»„ä»¶å›¾ï¼šæŸä¸€ä¸ªç»„ä»¶ï¼Œåœ¨å¤šæ¬¡æäº¤ä¸­ï¼Œè‡ªèº«æ¸²æŸ“èŠ±è´¹çš„æ—¶é—´</li></ul><p>ç‚¹å‡»å½•åˆ¶è¿›è¡Œå½•åˆ¶ï¼Œç„¶åè¿›è¡Œæ“ä½œï¼Œæ“ä½œå®Œå†ç»“æŸå½•åˆ¶ï¼ŒæŸ¥çœ‹æ•ˆç‡ <img src="`+b+`" alt="image.png"></p><h2 id="hook" tabindex="-1"><a class="header-anchor" href="#hook" aria-hidden="true">#</a> HOOK</h2><p>HOOKæ˜¯React16.8.0ä¹‹åå‡ºç° ç»„ä»¶ï¼šæ— çŠ¶æ€ç»„ä»¶ï¼ˆå‡½æ•°ç»„ä»¶ï¼‰ã€ç±»ç»„ä»¶ ç±»ç»„ä»¶ä¸­çš„éº»çƒ¦ï¼š</p><ul><li>thisæŒ‡å‘é—®é¢˜</li><li>ç¹ççš„ç”Ÿå‘½å‘¨æœŸ</li><li>å…¶ä»–é—®é¢˜</li></ul><p>HOOKä¸“é—¨ç”¨äºå¢å¼ºå‡½æ•°ç»„ä»¶çš„åŠŸèƒ½ï¼ˆHOOKåœ¨ç±»ç»„ä»¶ä¸­æ˜¯ä¸èƒ½ä½¿ç”¨çš„ï¼‰ï¼Œä½¿ä¹‹ç†è®ºä¸Šå¯ä»¥æˆä¸ºç±»ç»„ä»¶çš„æ›¿ä»£å“ **å®˜æ–¹å¼ºè°ƒï¼š**æ²¡æœ‰å¿…è¦æ›´æ”¹å·²ç»å®Œæˆçš„ç±»ç»„ä»¶ï¼Œå®˜æ–¹ç›®å‰æ²¡æœ‰è®¡åˆ’å–æ¶ˆç±»ç»„ä»¶ï¼Œåªæ˜¯é¼“åŠ±ä½¿ç”¨å‡½æ•°ç»„ä»¶ <strong>HOOKï¼ˆé’©å­ï¼‰æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°(å‘½åä¸Šæ€»æ˜¯ä»¥useå¼€å¤´)ï¼Œè¯¥å‡½æ•°å¯ä»¥æŒ‚è½½ä»»ä½•åŠŸèƒ½ï¼Œä¼šåœ¨é€‚å½“çš„æ—¶å€™æ‰§è¡Œè¿™äº›åŠŸèƒ½</strong> HOOKç§ç±»ï¼š</p><ul><li>useState</li><li>useEffect</li><li>å…¶ä»–...</li></ul><h3 id="state-hook" tabindex="-1"><a class="header-anchor" href="#state-hook" aria-hidden="true">#</a> State Hook</h3><p>State Hook æ˜¯ä¸€ä¸ªåœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çš„å‡½æ•°ï¼ˆuseStateï¼‰ï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€</p><h4 id="usestate" tabindex="-1"><a class="header-anchor" href="#usestate" aria-hidden="true">#</a> useState</h4><ul><li>å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°çš„å€¼è¡¨ç¤ºçŠ¶æ€çš„é»˜è®¤å€¼</li><li><strong>å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„ä¸€å®šåŒ…å«ä¸¤é¡¹</strong><ul><li><strong>ç¬¬ä¸€é¡¹ï¼šå½“å‰çŠ¶æ€çš„å€¼</strong></li><li><strong>ç¬¬äºŒé¡¹ï¼šæ”¹å˜çŠ¶æ€çš„å‡½æ•°ï¼Œå‚æ•°æ˜¯æ”¹å˜çš„å€¼</strong></li></ul></li></ul><p><strong>ä¸€ä¸ªå‡½æ•°ç»„ä»¶ä¸­å¯ä»¥æœ‰å¤šä¸ªçŠ¶æ€ï¼Œè¿™ç§åšæ³•éå¸¸æœ‰åˆ©äºæ¨ªå‘åˆ‡åˆ†å…³æ³¨ç‚¹</strong></p><ul><li>æ¯ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ªçŠ¶æ€æ•°ç»„ï¼Œè¯¥çŠ¶æ€æ•°ç»„æ˜¯è·ŸèŠ‚ç‚¹ç»‘å®šçš„</li><li>æ¯æ¬¡è°ƒç”¨ useState éƒ½ä¼šæ£€æŸ¥çŠ¶æ€æ•°ç»„ä¸­è¯¥çŠ¶æ€æ˜¯å¦å­˜åœ¨ï¼Œå¦‚è°ƒç”¨ N æ¬¡</li><li>ä¸å­˜åœ¨ <ul><li>ä½¿ç”¨é»˜è®¤å€¼åˆ›å»ºä¸€ä¸ªçŠ¶æ€</li><li>å°†è¯¥çŠ¶æ€åŠ å…¥åˆ°é»˜è®¤çŠ¶æ€æ•°ç»„ä¸­ï¼Œä¸‹æ ‡ä¸º N</li></ul></li><li>å­˜åœ¨ <ul><li>å¿½ç•¥æ‰é»˜è®¤å€¼</li><li>ç›´æ¥å¾—åˆ°çŠ¶æ€å€¼</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">TestOneHook</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// const arr = useState(0); // ä½¿ç”¨ä¸€ä¸ªçŠ¶æ€ï¼Œè¯¥çŠ¶æ€çš„é»˜è®¤å€¼æ˜¯0</span>
    <span class="token comment">// const n = arr[0]; // å¾—åˆ°çŠ¶æ€çš„å€¼</span>
    <span class="token comment">// const setN = arr[1]; // å¾—åˆ°ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ç”¨äºæ”¹å˜çŠ¶æ€</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>n<span class="token punctuation">,</span> setN<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨ä¸€ä¸ªçŠ¶æ€ï¼Œè¯¥é»˜è®¤å€¼æ˜¯0</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>visible<span class="token punctuation">,</span> setVisible<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨ä¸€ä¸ªçŠ¶æ€ï¼Œè¯¥é»˜è®¤å€¼æ˜¯true</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">display</span><span class="token operator">:</span> visible <span class="token operator">?</span> <span class="token string">&#39;block&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;none&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">setN</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">-</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span>n<span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">setN</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token operator">!</span>visible<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ˜¾ç¤º/éšè—</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> TestOneHook<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ³¨æ„-3" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-3" aria-hidden="true">#</a> æ³¨æ„</h4><ul><li>useState æœ€å¥½å†™åˆ°å‡½æ•°çš„èµ·å§‹ä½ç½®ï¼Œä¾¿äºé˜…è¯»</li><li>useState ä¸¥ç¦å‡ºç°åœ¨ä»£ç å—ï¼ˆåˆ¤æ–­ã€å¾ªç¯ï¼‰ä¸­</li><li>useState è¿”å›çš„å‡½æ•°ï¼ˆæ•°ç»„çš„ç¬¬äºŒé¡¹ï¼‰ï¼Œå¼•ç”¨ä¸å˜ï¼ˆèŠ‚çº¦å†…å­˜ç©ºé—´ï¼‰</li><li>ä½¿ç”¨å‡½æ•°æ”¹å˜æ•°æ®ï¼Œè‹¥æ•°æ®å’Œä¹‹å‰çš„æ•°æ®å®Œå…¨ç›¸ç­‰ï¼ˆä½¿ç”¨ Object.is æ¯”è¾ƒï¼‰ï¼Œä¸ä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“ï¼Œä»¥è¾¾åˆ°ä¼˜åŒ–æ•ˆç‡çš„ç›®çš„</li><li>ä½¿ç”¨å‡½æ•°æ”¹å˜æ•°æ®ï¼Œä¼ å…¥çš„å€¼ä¸ä¼šå’ŒåŸæ¥çš„æ•°æ®è¿›è¡Œåˆå¹¶ï¼Œè€Œæ˜¯ç›´æ¥æ›¿æ¢</li><li>å¦‚æœè¦å®ç°å¼ºåˆ¶åˆ·æ–°ç»„ä»¶ <ul><li>ç±»ç»„ä»¶ï¼šä½¿ç”¨ forceUpdate å‡½æ•° <ul><li><code>this.forceUpdate() // å¼ºåˆ¶é‡æ–°æ¸²æŸ“</code></li></ul></li><li>å‡½æ•°ç»„ä»¶ï¼šä½¿ç”¨ä¸€ä¸ªçŠ¶æ€ä¸ºç©ºå¯¹è±¡çš„ useState <ul><li><code>const [, setN] = useState({}) // setN({}) æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯å¯¹è±¡åœ°å€å¼•ç”¨çš„ä¿®æ”¹ï¼Œä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“</code></li></ul></li></ul></li><li><strong>å¦‚æœæŸäº›çŠ¶æ€ä¹‹é—´æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œåº”è¯¥åˆ†åŒ–ä¸ºä¸åŒçš„çŠ¶æ€ï¼Œè€Œä¸è¦åˆå¹¶æˆä¸€ä¸ªå¯¹è±¡</strong></li><li>å’Œç±»ç»„ä»¶çš„çŠ¶æ€ä¸€æ ·ï¼Œå‡½æ•°ç»„ä»¶ä¸­æ”¹å˜çŠ¶æ€å¯èƒ½æ˜¯å¼‚æ­¥çš„ï¼ˆåœ¨ DOM äº‹ä»¶ä¸­ï¼‰ï¼Œå¤šä¸ªçŠ¶æ€å˜åŒ–ä¼šåˆå¹¶ä»¥æé«˜æ•ˆç‡ï¼Œæ­¤æ—¶ï¼Œä¸èƒ½ä¿¡ä»»ä¹‹å‰çš„çŠ¶æ€ï¼Œè€Œåº”è¯¥ä½¿ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼æ”¹å˜çŠ¶æ€ã€‚å¦‚æœçŠ¶æ€å˜åŒ–è¦ä½¿ç”¨åˆ°ä¹‹å‰çš„çŠ¶æ€ï¼Œå°½é‡ä¼ é€’å‡½æ•°ã€‚</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// setN(n + 1) // ä¸ä¼šç«‹å³æ”¹å˜ï¼Œäº‹ä»¶è¿è¡Œä¹‹åä¸€èµ·æ”¹å˜</span>
    <span class="token comment">// setN(n + 1) // æ­¤æ—¶ï¼Œ nçš„å€¼ä»ç„¶æ˜¯0</span>
    <span class="token function">setN</span><span class="token punctuation">(</span><span class="token parameter">prevN</span> <span class="token operator">=&gt;</span> prevN <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// ä¼ å…¥çš„å‡½æ•°ï¼Œåœ¨äº‹ä»¶å®Œæˆä¹‹åç»Ÿä¸€è¿è¡Œ</span>
    <span class="token function">setN</span><span class="token punctuation">(</span><span class="token parameter">prevN</span> <span class="token operator">=&gt;</span> prevN <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="effect-hook" tabindex="-1"><a class="header-anchor" href="#effect-hook" aria-hidden="true">#</a> Effect Hook</h3><ul><li>Effect Hookï¼šç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­å¤„ç†å‰¯ä½œç”¨</li></ul><p>å‰¯ä½œç”¨ï¼š</p><ul><li>ajaxè¯·æ±‚</li><li>è®¡æ—¶å™¨</li><li>å…¶ä»–å¼‚æ­¥æ“ä½œ</li><li>æ›´æ”¹çœŸå®DOMå¯¹è±¡</li><li>æœ¬åœ°å­˜å‚¨</li><li>å…¶ä»–ä¼šå¯¹å¤–éƒ¨äº§ç”Ÿå½±å“çš„æ“ä½œ</li><li>å‡½æ•°ï¼šuseEffectï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ¥æ”¶çš„å‡½æ•°å°±æ˜¯éœ€è¦è¿›è¡Œå‰¯ä½œç”¨æ“ä½œçš„å‡½æ•°</li></ul><h4 id="æ³¨æ„-4" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-4" aria-hidden="true">#</a> æ³¨æ„</h4><ul><li>å‰¯ä½œç”¨å‡½æ•°çš„è¿è¡Œæ—¶é—´ç‚¹ï¼Œæ˜¯åœ¨é¡µé¢å®ŒæˆçœŸå®çš„UIæ¸²æŸ“ä¹‹åã€‚å› æ­¤å®ƒçš„æ‰§è¡Œæ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”ä¸ä¼šé˜»å¡æµè§ˆå™¨ <ul><li>ä¸ç±»ç»„ä»¶ä¸­ componentDidMount å’Œ componentDidUpdate çš„åŒºåˆ« <ul><li>componentDidMount å’Œ componentDidUpdateï¼Œæ›´æ”¹äº†çœŸå®DOMåé©¬ä¸Šè¿è¡Œï¼Œä½†æ˜¯ç”¨æˆ·è¿˜æ²¡æœ‰çœ‹åˆ° UI æ›´æ–°ï¼ŒåŒæ­¥çš„</li></ul></li><li>useEffect ä¸­çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œæ›´æ”¹äº†çœŸå® DOMï¼Œå¹¶ä¸”ç”¨æˆ·å·²ç»çœ‹åˆ°äº† UI æ›´æ–°åæ‰æ‰§è¡Œï¼Œå¼‚æ­¥çš„</li></ul></li><li>æ¯ä¸ªå‡½æ•°ç»„ä»¶ä¸­ï¼Œå¯ä»¥å¤šæ¬¡ä½¿ç”¨useEffectï¼Œä½†ä¸è¦æ”¾å…¥åˆ¤æ–­æˆ–å¾ªç¯ç­‰ä»£ç å—ä¸­ <ul><li>åŸç†å‚çœ‹ useState</li></ul></li><li>useEffect ä¸­çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œå¯ä»¥æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å«åšæ¸…ç†å‡½æ•° <ul><li>è¯¥æ¸…ç†å‡½æ•°è¿è¡Œæ—¶é—´ç‚¹ï¼Œåœ¨æ¯æ¬¡è¿è¡Œå‰¯ä½œç”¨å‡½æ•°ä¹‹å‰</li><li>é¦–æ¬¡æ¸²æŸ“ç»„ä»¶ä¸ä¼šè¿è¡Œ</li><li>ç»„ä»¶è¢«é”€æ¯æ—¶ä¸€å®šä¼šè¿è¡Œ</li></ul></li><li>useEffect å‡½æ•°ï¼Œå¯ä»¥ä¼ é€’ç¬¬äºŒä¸ªå‚æ•° <ul><li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„</li><li>æ•°ç»„ä¸­è®°å½•è¯¥å‰¯ä½œç”¨çš„ä¾èµ–æ•°æ®</li><li>å½“ç»„ä»¶é‡æ–°æ¸²æŸ“åï¼Œåªæœ‰ä¾èµ–æ•°æ®ä¸ä¸Šä¸€æ¬¡ä¸ä¸€æ ·æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå‰¯ä½œç”¨</li><li>æ‰€ä»¥ï¼Œå½“ä¼ é€’äº†ä¾èµ–æ•°æ®ä¹‹åï¼Œå¦‚æœæ•°æ®æ²¡æœ‰å‘ç”Ÿå˜åŒ– <ul><li>å‰¯ä½œç”¨å‡½æ•°ä»…åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“åè¿è¡Œ</li><li>æ¸…ç†å‡½æ•°ä»…åœ¨å¸è½½ç»„ä»¶åè¿è¡Œ</li></ul></li></ul></li><li>å‰¯ä½œç”¨å‡½æ•°ä¸­ï¼Œå¦‚æœä½¿ç”¨äº†å‡½æ•°ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ï¼Œåˆ™ç”±äºé—­åŒ…çš„å½±å“ï¼Œä¼šå¯¼è‡´å‰¯ä½œç”¨å‡½æ•°ä¸­å˜é‡ä¸ä¼šå®æ—¶å˜åŒ–</li><li>å‰¯ä½œç”¨å‡½æ•°åœ¨æ¯æ¬¡æ³¨å†Œæ—¶ï¼Œä¼šè¦†ç›–æ‰ä¹‹å‰çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œå› æ­¤ï¼Œå°½é‡ä¿æŒå‰¯ä½œç”¨å‡½æ•°ç¨³å®šï¼Œå¦åˆ™æ§åˆ¶èµ·æ¥ä¼šæ¯”è¾ƒå¤æ‚</li></ul><h3 id="è‡ªå®šä¹‰hook" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰hook" aria-hidden="true">#</a> è‡ªå®šä¹‰Hook</h3><p>è‡ªå®šä¹‰ Hookï¼šå°†ä¸€äº›å¸¸ç”¨çš„ã€è·¨è¶Šå¤šä¸ªç»„ä»¶çš„ Hook åŠŸèƒ½ï¼ŒæŠ½ç¦»å‡ºå»å½¢æˆä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°±æ˜¯è‡ªå®šä¹‰ Hookï¼Œè‡ªå®šä¹‰ Hookï¼Œç”±äºå…¶å†…éƒ¨éœ€è¦ä½¿ç”¨ Hook åŠŸèƒ½ï¼Œæ‰€ä»¥å®ƒæœ¬èº«ä¹Ÿéœ€è¦æŒ‰ç…§ Hook çš„è§„åˆ™å®ç°ï¼š</p><ul><li>å‡½æ•°åå¿…é¡»ä»¥ use å¼€å¤´</li><li>è°ƒç”¨è‡ªå®šä¹‰ Hook å‡½æ•°æ—¶ï¼Œåº”è¯¥æ”¾åˆ°é¡¶å±‚</li></ul><p>ä¾‹å¦‚ï¼š</p><ul><li>å¾ˆå¤šç»„ä»¶éƒ½éœ€è¦åœ¨ç¬¬ä¸€æ¬¡åŠ è½½å®Œæˆåï¼Œè·å–æ‰€æœ‰å­¦ç”Ÿæ•°æ®</li><li>å¾ˆå¤šç»„ä»¶éƒ½éœ€è¦åœ¨ç¬¬ä¸€æ¬¡åŠ è½½å®Œæˆåï¼Œå¯åŠ¨ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œç„¶ååœ¨ç»„ä»¶é”€æ¯æ—¶å¸è½½</li></ul><p><strong>ä½¿ç”¨ Hook çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰ä¸¥æ ¼æŒ‰ç…§ Hook çš„è§„åˆ™è¿›è¡Œï¼Œeslint çš„ä¸€ä¸ªæ’ä»¶ï¼ˆeslint-plugin-react-hooksï¼‰ä¼šæŠ¥å‡ºè­¦å‘Š</strong></p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getAllStudents <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api&#39;</span>
<span class="token comment">/**
 * å½“ç»„ä»¶åŠ è½½å®Œæˆåï¼ŒæŒ‰é¡µè·å–æ‰€æœ‰å­¦ç”Ÿæ•°æ®
 * @param page é¡µæ•°
 * @param limit æ¯é¡µæ•°æ®é•¿åº¦
 * @constructor
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">UseStudentHook</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">page <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> limit <span class="token operator">=</span> <span class="token number">10</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span> students<span class="token punctuation">,</span> setStudents <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">getAllStudents</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> limit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setStudents</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>page<span class="token punctuation">,</span> limit<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> students<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> UseStudentHook<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="reducer-hook" tabindex="-1"><a class="header-anchor" href="#reducer-hook" aria-hidden="true">#</a> Reducer Hook</h3><h4 id="flux-facebook-å‡ºå“çš„ä¸€ä¸ªæ•°æ®æµæ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#flux-facebook-å‡ºå“çš„ä¸€ä¸ªæ•°æ®æµæ¡†æ¶" aria-hidden="true">#</a> Fluxï¼šFacebook å‡ºå“çš„ä¸€ä¸ªæ•°æ®æµæ¡†æ¶</h4><ul><li>è§„å®šäº†æ•°æ®æ˜¯å•å‘æµåŠ¨çš„</li><li>æ•°æ®å­˜å‚¨åœ¨æ•°æ®ä»“åº“ä¸­ï¼ˆç›®å‰ï¼Œå¯ä»¥è®¤ä¸º state å°±æ˜¯ä¸€ä¸ªå­˜å‚¨æ•°æ®çš„ä»“åº“ï¼‰</li><li>action æ˜¯æ”¹å˜æ•°æ®çš„å”¯ä¸€åŸå› ï¼ˆæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œaction æœ‰ä¸¤ä¸ªå±æ€§ï¼‰ <ul><li>typeï¼šå­—ç¬¦ä¸²ï¼ŒåŠ¨ä½œçš„ç±»å‹ï¼Œæè¿°å¹²ä»€ä¹ˆ</li><li>payloadï¼šä»»æ„ç±»å‹ï¼ŒåŠ¨ä½œå‘ç”Ÿåçš„é™„åŠ ä¿¡æ¯ <ul><li>ä¾‹å¦‚ï¼Œå¦‚æœæ˜¯æ·»åŠ ä¸€ä¸ªå­¦ç”Ÿï¼Œaction å¯ä»¥æè¿°ä¸ºï¼š <ul><li>{ type:&quot;addStudent&quot;, payload: {å­¦ç”Ÿå¯¹è±¡çš„å„ç§ä¿¡æ¯} }</li></ul></li><li>ä¾‹å¦‚ï¼Œå¦‚æœè¦åˆ é™¤ä¸€ä¸ªå­¦ç”Ÿï¼Œaction å¯ä»¥æè¿°ä¸ºï¼š <ul><li>{ type:&quot;deleteStudent&quot;, payload: å­¦ç”Ÿid }</li></ul></li></ul></li></ul></li><li>å…·ä½“æ”¹å˜æ•°æ®çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å«åš reducer <ul><li>è¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•° <ul><li>stateï¼šè¡¨ç¤ºå½“å‰æ•°æ®ä»“åº“ä¸­çš„æ•°æ®</li><li>actionï¼šæè¿°äº†å¦‚ä½•å»æ”¹å˜æ•°æ®ï¼Œä»¥åŠæ”¹å˜æ•°æ®çš„ä¸€äº›é™„åŠ ä¿¡æ¯</li></ul></li><li>è¯¥å‡½æ•°å¿…é¡»æœ‰ä¸€ä¸ªè¿”å›ç»“æœï¼Œç”¨äºè¡¨ç¤ºæ•°æ®ä»“åº“å˜åŒ–ä¹‹åçš„æ•°æ® <ul><li>Flux è¦æ±‚ï¼Œå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œå¦‚æœè¿”å›å¯¹è±¡ï¼Œå¿…é¡»åˆ›å»ºæ–°çš„å¯¹è±¡</li></ul></li><li>reducer å¿…é¡»æ˜¯çº¯å‡½æ•°ï¼Œä¸èƒ½æœ‰ä»»ä½•å‰¯ä½œç”¨</li><li>å¦‚æœè¦è§¦å‘ reducerï¼Œä¸å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œè€Œæ˜¯åº”è¯¥è°ƒç”¨ä¸€ä¸ªè¾…åŠ©å‡½æ•° dispatch <ul><li>è¯¥å‡½æ•°ä»…æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼šaction</li><li>è¯¥å‡½æ•°ä¼šé—´æ¥å»è°ƒç”¨ reducerï¼Œä»¥è¾¾åˆ°æ”¹å˜æ•°æ®çš„ç›®çš„</li></ul></li></ul></li><li>Reactæä¾›äº† useReducerï¼Œç›´æ¥å¼•ç”¨å³å¯<code>import { useReducer } from &#39;react&#39;;</code></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * é€šç”¨çš„useReducerå‡½æ•°
 * @param {function} reducer reducerå‡½æ•°ï¼Œæ ‡å‡†æ ¼å¼
 * @param {any} initialState åˆå§‹çŠ¶æ€
 * @param {function} initFunc ç”¨äºè®¡ç®—åˆå§‹å€¼çš„å‡½æ•°
 * @returns {[state,dispatch]}
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">useReducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">,</span> initFunc</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initFunc <span class="token operator">?</span> <span class="token function">initFunc</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span> <span class="token operator">:</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setState</span><span class="token punctuation">(</span>newState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> useReducer<span class="token punctuation">;</span>
<span class="token comment">// ====================</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&#39;increase&#39;</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&#39;decrease&#39;</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispath<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;increase&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="context-hook" tabindex="-1"><a class="header-anchor" href="#context-hook" aria-hidden="true">#</a> Context Hook</h3><p>ç”¨äºè·å–ä¸Šä¸‹æ–‡æ•°æ®</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä»¥å‰çš„è·å–ä¸Šä¸‹æ–‡çš„æ–¹æ³•</span>
<span class="token comment">// const Test = () =&gt; {</span>
<span class="token comment">//     return &lt;ctx.Consumer&gt;</span>
<span class="token comment">//         { value =&gt; &lt;h1&gt;Testï¼Œä¸Šä¸‹æ–‡çš„å€¼ï¼š{value}&lt;/h1&gt; }</span>
<span class="token comment">//     &lt;/ctx.Consumer&gt;</span>
<span class="token comment">// }</span>
<span class="token comment">// ä½¿ç”¨ useContext è·å–ä¸Šä¸‹æ–‡</span>
<span class="token keyword">const</span> <span class="token function-variable function">Test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Testï¼Œä¸Šä¸‹æ–‡çš„å€¼ï¼š</span><span class="token punctuation">{</span> value <span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">UseContextTest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ctx.Provider</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>abc<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Test</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ctx.Provider</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> UseContextTest<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="callback-hook" tabindex="-1"><a class="header-anchor" href="#callback-hook" aria-hidden="true">#</a> Callback Hook</h3><p>å‡½æ•°åï¼šuseCallback</p><ul><li>ç”¨äºå¾—åˆ°ä¸€ä¸ªå›ºå®šå¼•ç”¨å€¼çš„å‡½æ•°ï¼Œé€šå¸¸ç”¨å®ƒè¿›è¡Œæ€§èƒ½ä¼˜åŒ–</li><li>è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼š <ol><li>å‡½æ•°ï¼ŒuseCallbackä¼šå›ºå®šè¯¥å‡½æ•°çš„å¼•ç”¨ï¼Œåªè¦ä¾èµ–é¡¹æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™å§‹ç»ˆè¿”å›ä¹‹å‰å‡½æ•°çš„åœ°å€</li><li>æ•°ç»„ï¼Œè®°å½•ä¾èµ–é¡¹</li></ol></li><li>è¯¥å‡½æ•°è¿”å›ï¼šå¼•ç”¨ç›¸å¯¹å›ºå®šçš„å‡½æ•°åœ°å€</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Test Render&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜æ–‡æœ¬</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Parent Render&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>txt<span class="token punctuation">,</span> setTxt<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>n<span class="token punctuation">,</span> setN<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> handleClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTxt</span><span class="token punctuation">(</span>txt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>txt<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleClickN</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setN</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* å‡½æ•°çš„åœ°å€æ¯æ¬¡æ¸²æŸ“éƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯¼è‡´äº†å­ç»„ä»¶è·Ÿç€é‡æ–°æ¸²æŸ“ï¼Œè‹¥å­ç»„ä»¶æ˜¯ç»è¿‡ä¼˜åŒ–çš„ç»„ä»¶ï¼Œåˆ™å¯èƒ½å¯¼è‡´ä¼˜åŒ–å¤±æ•ˆ */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Test</span></span> <span class="token attr-name">text</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>txt<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>n<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClickN<span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Parent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="memo-hook" tabindex="-1"><a class="header-anchor" href="#memo-hook" aria-hidden="true">#</a> Memo Hook</h3><p>ç”¨äºä¿æŒä¸€äº›æ¯”è¾ƒç¨³å®šçš„æ•°æ®ï¼Œé€šå¸¸ç”¨äºæ€§èƒ½ä¼˜åŒ– <strong>å¦‚æœReactå…ƒç´ æœ¬èº«çš„å¼•ç”¨æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¸€å®šä¸ä¼šé‡æ–°æ¸²æŸ“</strong></p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useMemo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">function</span> <span class="token function">Item</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>range<span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">10000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>n<span class="token punctuation">,</span> setN<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// ä¿æŒ list ç¨³å®š</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> range<span class="token punctuation">.</span>min<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> range<span class="token punctuation">.</span>max<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Item</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> list<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>range<span class="token punctuation">.</span>min<span class="token punctuation">,</span> range<span class="token punctuation">.</span>max<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token comment">// const list = [];</span>
  <span class="token comment">// for (let i = range.min; i &lt;= range.max; i++) {</span>
  <span class="token comment">//     list.push(&lt;Item key={i} value={i}&gt;&lt;/Item&gt;)</span>
  <span class="token comment">// }</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>list<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>n<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">setN</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ref-hook" tabindex="-1"><a class="header-anchor" href="#ref-hook" aria-hidden="true">#</a> Ref Hook</h3><p>useRefå‡½æ•°ï¼š</p><ul><li>ä¸€ä¸ªå‚æ•°ï¼šé»˜è®¤å€¼</li><li>è¿”å›ä¸€ä¸ªå›ºå®šçš„å¯¹è±¡ï¼Œ{current: å€¼}</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">const</span> <span class="token function-variable function">RefHookTest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inpRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>n<span class="token punctuation">,</span> setN<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inpRef<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inpRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å¾—åˆ°inputçš„å€¼</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>n<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">setN</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> RefHookTest<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¯¥å‡½æ•°ä¸æ­¢å¯ä»¥ç”¨äºè·å¾— domï¼Œå…¶ç”Ÿæˆçš„ç¨³å®šå¯¹è±¡å¯ç”¨äºåšå…¶ä»–äº‹æƒ…</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">const</span> <span class="token function-variable function">RefHookTest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>n<span class="token punctuation">,</span> setN<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> timerRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ç”Ÿæˆä¸€ä¸ªå”¯ä¸€ä¸”ç¨³å®šçš„è®¡æ—¶å™¨å®¹å™¨</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    timerRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
      <span class="token function">setN</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timerRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>n<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> RefHookTest<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦ä¸€ç§æ–¹æ³•ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">const</span> <span class="token function-variable function">RefHookTest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>n<span class="token punctuation">,</span> setN<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> nRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {current:10}</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      nRef<span class="token punctuation">.</span>current<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token function">setN</span><span class="token punctuation">(</span>nRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>nRef<span class="token punctuation">.</span>current <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>n<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> RefHookTest<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="imperativehandle-hook" tabindex="-1"><a class="header-anchor" href="#imperativehandle-hook" aria-hidden="true">#</a> ImperativeHandle Hook</h3><ul><li>å‡½æ•°ï¼šuseImperativeHandleHook</li><li>ä¸‰ä¸ªå‚æ•° <ul><li>ç¬¬ä¸€ä¸ªæ˜¯ä¼ å€¼çš„ ref</li><li>ç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼ä¸ºä¼ é€’çš„å†…å®¹</li><li>ç¬¬ä¸‰ä¸ªæ˜¯ä¾èµ–é¡¹ï¼Œå¯ä»¥ä¸ä¼  <ul><li>å¦‚æœæœ‰å€¼ï¼Œåˆ™ç¬¬ä¸€æ¬¡è°ƒç”¨åï¼Œä¼šè¿›è¡Œç¼“å­˜ï¼Œåªæœ‰ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è°ƒç”¨å‡½æ•°</li></ul></li></ul></li><li>å‡½æ•°é€šè¿‡ ref ä¼ é€’æ–¹æ³•æˆ–å…¶ä»–å€¼</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> useImperativeHandle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœä¸ç»™ä¾èµ–é¡¹ï¼Œåˆ™æ¯æ¬¡è¿è¡Œå‡½æ•°ç»„ä»¶éƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•</span>
    <span class="token comment">// å¦‚æœä½¿ç”¨äº†ä¾èµ–é¡¹ï¼Œåˆ™ç¬¬ä¸€æ¬¡è°ƒç”¨åï¼Œä¼šè¿›è¡Œç¼“å­˜ï¼Œåªæœ‰ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è°ƒç”¨å‡½æ•°</span>
    <span class="token comment">// ç›¸å½“äºç»™ ref.current = 1</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Test Component Called&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Test Component</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> TestWrapper <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span>Test<span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">UseImperativeHandleHookTest</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> testRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TestWrapper</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>testRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          testRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// console.log(testRef)</span>
          <span class="token comment">// forceUpdate({})</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ç‚¹å‡»è°ƒç”¨Testç»„ä»¶çš„methodæ–¹æ³•</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> UseImperativeHandleHookTest<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="layouteffect-hook" tabindex="-1"><a class="header-anchor" href="#layouteffect-hook" aria-hidden="true">#</a> LayoutEffect Hook</h3><ul><li>useEffectï¼šæµè§ˆå™¨æ¸²æŸ“å®Œæˆåï¼Œç”¨æˆ·çœ‹åˆ°æ–°çš„æ¸²æŸ“ç»“æœä¹‹åè¿è¡Œ</li><li>useLayoutEffectHookï¼šå®Œæˆäº†DOMæ”¹åŠ¨ï¼Œä½†è¿˜æ²¡æœ‰å‘ˆç°ç»™ç”¨æˆ·çš„æ—¶å€™è¿è¡Œ</li><li>åº”è¯¥å°½é‡ä½¿ç”¨ useEffectï¼Œå› ä¸ºå®ƒä¸ä¼šå¯¼è‡´æ¸²æŸ“é˜»å¡ï¼Œå¦‚æœå‡ºç°äº†é—®é¢˜ï¼Œå†è€ƒè™‘ä½¿ç”¨ useLayoutEffectHook</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useLayoutEffect<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">function</span> <span class="token function">UseLayoutEffectHookTest</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>n<span class="token punctuation">,</span> setN<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> h1Ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// useEffect(() =&gt; { // ä¼šé—ªçƒä¸€ä¸‹</span>
  <span class="token comment">//     h1Ref.current.innerText = Math.random().toFixed(2);</span>
  <span class="token comment">// })</span>
  <span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// å¾ˆæµç•…</span>
    h1Ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span>innerText <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>h1Ref<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>n<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">setN</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> UseLayoutEffectHookTest<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="debugvalue-hook" tabindex="-1"><a class="header-anchor" href="#debugvalue-hook" aria-hidden="true">#</a> DebugValue Hook</h3><ul><li>useDebugValueï¼šç”¨äºå°†è‡ªå®šä¹‰ Hook çš„å…³è”æ•°æ®æ˜¾ç¤ºåˆ°è°ƒè¯•æ </li><li>å¦‚æœåˆ›å»ºçš„è‡ªå®šä¹‰ Hook é€šç”¨æ€§æ¯”è¾ƒé«˜ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ useDebugValue æ–¹ä¾¿è°ƒè¯•</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useDebugValue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">function</span> <span class="token function">useTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>students<span class="token punctuation">,</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">useDebugValue</span><span class="token punctuation">(</span><span class="token string">&quot;å­¦ç”Ÿé›†åˆ&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> students<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;effect&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">useTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+h+'" alt="image.png"></p><h1 id="reactåŠ¨ç”»" tabindex="-1"><a class="header-anchor" href="#reactåŠ¨ç”»" aria-hidden="true">#</a> ReactåŠ¨ç”»</h1>',103),X={href:"https://reactcommunity.org/react-transition-group/",target:"_blank",rel:"noopener noreferrer"},G=p(`<div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Transition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-transition-group&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span>
<span class="token keyword">const</span> duration <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>inProp<span class="token punctuation">,</span> setInProp<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Transition</span></span> <span class="token attr-name">in</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inProp<span class="token punctuation">}</span></span> <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>duration<span class="token punctuation">}</span></span>
        <span class="token attr-name">addEndListener</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;transitionend&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è¿‡æ¸¡ç»“æŸäº†&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">once</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>state<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            I&#39;m a fade Transition!
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Transition</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setInProp</span><span class="token punctuation">(</span><span class="token operator">!</span>inProp<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        Click to Toggle
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ==========</span>
div<span class="token punctuation">{</span>
    <span class="token literal-property property">transition</span><span class="token operator">:</span> 2000ms<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>exited<span class="token punctuation">,</span> <span class="token punctuation">.</span>exiting<span class="token punctuation">{</span>
    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>entered<span class="token punctuation">,</span><span class="token punctuation">.</span>entering<span class="token punctuation">{</span>
    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="csstransition" tabindex="-1"><a class="header-anchor" href="#csstransition" aria-hidden="true">#</a> CSSTransition</h2><p><strong>å½“è¿›å…¥æ—¶ï¼Œå‘ç”Ÿï¼š</strong></p><ol><li>ä¸ºCSSTransitionå†…éƒ¨çš„DOMæ ¹å…ƒç´ ï¼ˆåç»­ç»Ÿä¸€ç§°ä¹‹ä¸ºDOMå…ƒç´ ï¼‰æ·»åŠ æ ·å¼enter</li><li>åœ¨ä¸€ä¸‹å¸§(enteræ ·å¼å·²ç»å®Œå…¨åº”ç”¨åˆ°äº†å…ƒç´ )ï¼Œç«‹å³ä¸ºè¯¥å…ƒç´ æ·»åŠ æ ·å¼enter-active</li><li>å½“timeoutç»“æŸåï¼Œå»æ‰ä¹‹å‰çš„æ ·å¼ï¼Œæ·»åŠ æ ·å¼enter-done</li></ol><p><strong>å½“é€€å‡ºæ—¶ï¼Œå‘ç”Ÿï¼š</strong></p><ol><li>ä¸ºCSSTransitionå†…éƒ¨çš„DOMæ ¹å…ƒç´ ï¼ˆåç»­ç»Ÿä¸€ç§°ä¹‹ä¸ºDOMå…ƒç´ ï¼‰æ·»åŠ æ ·å¼exit</li><li>åœ¨ä¸€ä¸‹å¸§(exitæ ·å¼å·²ç»å®Œå…¨åº”ç”¨åˆ°äº†å…ƒç´ )ï¼Œç«‹å³ä¸ºè¯¥å…ƒç´ æ·»åŠ æ ·å¼exit-active</li><li>å½“timeoutç»“æŸåï¼Œå»æ‰ä¹‹å‰çš„æ ·å¼ï¼Œæ·»åŠ æ ·å¼exit-done</li></ol><p><strong>è®¾ç½®classNameså±æ€§ï¼Œå¯ä»¥æŒ‡å®šç±»æ ·å¼çš„åç§°</strong></p><ol><li>å­—ç¬¦ä¸²ï¼šä¸ºç±»æ ·å¼æ·»åŠ å‰ç¼€</li><li>å¯¹è±¡ï¼šä¸ºæ¯ä¸ªç±»æ ·å¼æŒ‡å®šå…·ä½“çš„åç§°ï¼ˆéå‰ç¼€ï¼‰</li></ol>`,8),K={href:"https://animate.style/",target:"_blank",rel:"noopener noreferrer"},$=n("strong",null,"Animate.css",-1),z=p(`<h2 id="switchtransition" tabindex="-1"><a class="header-anchor" href="#switchtransition" aria-hidden="true">#</a> SwitchTransition</h2><p>ç”¨äºæœ‰ç§©åºçš„åˆ‡æ¢å†…éƒ¨ç»„ä»¶ <strong>é»˜è®¤æƒ…å†µä¸‹ï¼šout-in</strong></p><ol><li>å½“keyå€¼æ”¹å˜æ—¶ï¼Œä¼šå°†ä¹‹å‰çš„DOMæ ¹å…ƒç´ æ·»åŠ é€€å‡ºæ ·å¼ï¼ˆexit,exit-active)</li><li>é€€å‡ºå®Œæˆåï¼Œå°†è¯¥DOMå…ƒç´ ç§»é™¤</li><li>é‡æ–°æ¸²æŸ“å†…éƒ¨DOMå…ƒç´ </li><li>ä¸ºæ–°æ¸²æŸ“çš„DOMæ ¹å…ƒç´ æ·»åŠ è¿›å…¥æ ·å¼(enter, enter-active, enter-done)</li></ol><p><strong>in-out:</strong></p><ol><li>é‡æ–°æ¸²æŸ“å†…éƒ¨DOMå…ƒç´ ï¼Œä¿ç•™ä¹‹å‰çš„å…ƒç´ </li><li>ä¸ºæ–°æ¸²æŸ“çš„DOMæ ¹å…ƒç´ æ·»åŠ è¿›å…¥æ ·å¼(enter, enter-active, enter-done)</li><li>å°†ä¹‹å‰çš„DOMæ ¹å…ƒç´ æ·»åŠ é€€å‡ºæ ·å¼ï¼ˆexit,exit-active)</li><li>é€€å‡ºå®Œæˆåï¼Œå°†è¯¥DOMå…ƒç´ ç§»é™¤</li></ol><p><strong>è¯¥åº“å¯»æ‰¾domå…ƒç´ çš„æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨å·²ç»è¿‡æ—¶çš„APIï¼šfindDomNodeï¼Œè¯¥æ–¹æ³•å¯ä»¥æ‰¾åˆ°æŸä¸ªç»„ä»¶ä¸‹çš„DOMæ ¹å…ƒç´ </strong></p><h2 id="transitiongroup" tabindex="-1"><a class="header-anchor" href="#transitiongroup" aria-hidden="true">#</a> TransitionGroup</h2><p>è¯¥ç»„ä»¶çš„childrenï¼Œæ¥æ”¶å¤šä¸ªTransitionæˆ–CSSTransitionç»„ä»¶ï¼Œè¯¥ç»„ä»¶ç”¨äºæ ¹æ®è¿™äº›å­ç»„ä»¶çš„keyå€¼ï¼Œæ§åˆ¶ä»–ä»¬çš„è¿›å…¥å’Œé€€å‡ºçŠ¶æ€</p><h2 id="åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨" aria-hidden="true">#</a> åº”ç”¨</h2><h3 id="æ·¡å…¥æ·¡å‡ºç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#æ·¡å…¥æ·¡å‡ºç»„ä»¶" aria-hidden="true">#</a> æ·¡å…¥æ·¡å‡ºç»„ä»¶</h3><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CSSTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-transition-group&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./index.css&quot;</span>
FadeTransition<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">500</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">FadeTransition</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">addTransition</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    node<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">opacity </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>props<span class="token punctuation">.</span>timeout<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">removeTransition</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    node<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">onEnter</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addTransition<span class="token punctuation">}</span></span>
      <span class="token attr-name">onEntered</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> isAppear</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">removeTransition</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
        props<span class="token punctuation">.</span>onEntered <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span><span class="token function">onEntered</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> isAppear<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token attr-name">onExit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addTransition<span class="token punctuation">}</span></span>
      <span class="token attr-name">onExited</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">removeTransition</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
        props<span class="token punctuation">.</span>onExited <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span><span class="token function">onExited</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// =============</span>
<span class="token punctuation">.</span>fade<span class="token operator">-</span>exit<span class="token operator">-</span>done<span class="token punctuation">,</span> <span class="token punctuation">.</span>fade<span class="token operator">-</span>enter<span class="token punctuation">,</span> <span class="token punctuation">.</span>fade<span class="token operator">-</span>exit<span class="token operator">-</span>active<span class="token punctuation">,</span> <span class="token punctuation">.</span>fade<span class="token operator">-</span>appear<span class="token punctuation">{</span>
    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>fade<span class="token operator">-</span>enter<span class="token operator">-</span>active<span class="token punctuation">,</span> <span class="token punctuation">.</span>fade<span class="token operator">-</span>appear<span class="token operator">-</span>active<span class="token punctuation">{</span>
    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> FadeTransition <span class="token keyword">from</span> <span class="token string">&quot;./FadeTransition&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> TransitionGroup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-transition-group&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> v4 <span class="token keyword">as</span> uuidv4 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;uuid&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">tasks</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;ä»»åŠ¡1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;ä»»åŠ¡2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;ä»»åŠ¡3&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TransitionGroup</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ul<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FadeTransition</span></span> <span class="token attr-name">appear</span> <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">500</span><span class="token punctuation">}</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>t<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>t<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">tasks</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> it<span class="token punctuation">.</span>id <span class="token operator">!==</span> t<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
                  <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">åˆ é™¤</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">FadeTransition</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TransitionGroup</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      &lt;button onClick=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> name <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·è¾“å…¥ä»»åŠ¡åç§°&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">tasks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>tasks<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name <span class="token punctuation">}</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">&gt;æ·»åŠ </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="react-router" tabindex="-1"><a class="header-anchor" href="#react-router" aria-hidden="true">#</a> React Router</h1><h2 id="è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±" aria-hidden="true">#</a> è·¯ç”±</h2><ul><li>æ— è®ºæ˜¯ä½¿ç”¨Vueï¼Œè¿˜æ˜¯Reactï¼Œå¼€å‘çš„å•é¡µåº”ç”¨ç¨‹åºï¼Œå¯èƒ½åªæ˜¯æŸä¸ªç«™ç‚¹ï¼ˆåŸŸåï¼‰çš„ä¸€éƒ¨åˆ†ï¼ˆæŸä¸€ä¸ªåŠŸèƒ½å—ï¼‰</li><li>ä¸€ä¸ªå•é¡µåº”ç”¨é‡Œï¼Œå¯èƒ½ä¼šåˆ’åˆ†ä¸ºå¤šä¸ªé¡µé¢ï¼ˆå‡ ä¹å®Œå…¨ä¸åŒçš„é¡µé¢æ•ˆæœï¼‰ï¼ˆç»„ä»¶ï¼‰</li></ul><p><img src="`+y+'" alt="image.png"></p><ul><li>å¦‚æœè¦åœ¨å•é¡µåº”ç”¨ä¸­å®Œæˆç»„ä»¶çš„åˆ‡æ¢ï¼Œéœ€è¦å®ç°ä¸‹é¢ä¸¤ä¸ªåŠŸèƒ½ï¼š <ul><li>æ ¹æ®ä¸åŒçš„é¡µé¢åœ°å€ï¼Œå±•ç¤ºä¸åŒçš„ç»„ä»¶ï¼ˆæ ¸å¿ƒï¼‰</li><li>å®Œæˆæ— åˆ·æ–°çš„åœ°å€åˆ‡æ¢</li></ul></li></ul><p><strong>æˆ‘ä»¬æŠŠå®ç°äº†ä»¥ä¸Šä¸¤ä¸ªåŠŸèƒ½çš„æ’ä»¶ï¼Œç§°ä¹‹ä¸ºè·¯ç”±</strong></p>',18),Y={id:"react-router-1",tabindex:"-1"},Q=n("a",{class:"header-anchor",href:"#react-router-1","aria-hidden":"true"},"#",-1),Z={href:"https://react-guide.github.io/react-router-cn/",target:"_blank",rel:"noopener noreferrer"},nn=n("ul",null,[n("li",null,"react-routerï¼šè·¯ç”±æ ¸å¿ƒåº“ï¼ŒåŒ…å«è¯¸å¤šå’Œè·¯ç”±åŠŸèƒ½ç›¸å…³çš„æ ¸å¿ƒä»£ç "),n("li",null,[s("react-router-domï¼šåˆ©ç”¨è·¯ç”±æ ¸å¿ƒåº“ï¼Œç»“åˆå®é™…çš„é¡µé¢ï¼Œå®ç°è·Ÿé¡µé¢è·¯ç”±å¯†åˆ‡ç›¸å…³çš„åŠŸèƒ½ "),n("ul",null,[n("li",null,"å­¦ä¹ çš„æ˜¯ v5.0.1 ç‰ˆæœ¬ï¼ŒåæœŸå­¦ä¹ V6ç‰ˆæœ¬"),n("li",null,"å¦‚æœæ˜¯åœ¨é¡µé¢ä¸­å®ç°è·¯ç”±ï¼Œéœ€è¦å®‰è£…react-router-domåº“")])])],-1),sn=n("h2",{id:"è·¯ç”±çš„ä¸¤ç§æ¨¡å¼",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#è·¯ç”±çš„ä¸¤ç§æ¨¡å¼","aria-hidden":"true"},"#"),s(" è·¯ç”±çš„ä¸¤ç§æ¨¡å¼")],-1),an=n("ul",null,[n("li",null,"è·¯ç”±ï¼šæ ¹æ®ä¸åŒçš„é¡µé¢åœ°å€ï¼Œå±•ç¤ºä¸åŒçš„ç»„ä»¶"),n("li",null,"urlåœ°å€ç»„æˆ")],-1),tn={href:"https://gitee.com/link?target=https%3A%2F%2Fwww.react.com%3A443%2Fnews%2F1-2-1.html%3Fa%3D1%26b%3D2%23abcdefg",target:"_blank",rel:"noopener noreferrer"},pn=p('<ul><li>åè®®å(schema)ï¼šhttps</li><li>ä¸»æœºå(host)ï¼šwww.react.com <ul><li>ipåœ°å€</li><li>é¢„è®¾å€¼ï¼šlocalhost</li><li>åŸŸå</li><li>å±€åŸŸç½‘ä¸­ç”µè„‘åç§°</li></ul></li><li>ç«¯å£å·(port)ï¼š443 <ul><li>å¦‚æœåè®®æ˜¯httpï¼Œç«¯å£å·æ˜¯80ï¼Œåˆ™å¯ä»¥çœç•¥ç«¯å£å·</li><li>å¦‚æœåè®®æ˜¯httpsï¼Œç«¯å£å·æ˜¯443ï¼Œåˆ™å¯ä»¥çœç•¥ç«¯å£å·</li></ul></li><li>è®¿é—®è·¯å¾„(path)ï¼š/news/1-2-1.html</li><li>åœ°å€å‚æ•°(search/query)ï¼š?a=1&amp;b=2 <ul><li>é™„å¸¦çš„æ•°æ®</li><li>æ ¼å¼ï¼šå±æ€§å=å±æ€§å€¼&amp;å±æ€§å=å±æ€§å€¼....</li></ul></li><li>å“ˆå¸Œ(hash/é”šç‚¹) <ul><li>é™„å¸¦çš„æ•°æ®</li><li>&#39;#&#39;: sharp ç¬¦å·ï¼Œå« sharpï¼ŒC#ï¼šC sharp</li></ul></li></ul><h3 id="hash-router-å“ˆå¸Œè·¯ç”±" tabindex="-1"><a class="header-anchor" href="#hash-router-å“ˆå¸Œè·¯ç”±" aria-hidden="true">#</a> Hash Router å“ˆå¸Œè·¯ç”±</h3><ul><li>æ ¹æ®urlåœ°å€ä¸­çš„å“ˆå¸Œå€¼æ¥ç¡®å®šæ˜¾ç¤ºçš„ç»„ä»¶ <ul><li>hashçš„å˜åŒ–ï¼Œä¸ä¼šå¯¼è‡´é¡µé¢åˆ·æ–°</li><li>è¿™ç§æ¨¡å¼çš„å…¼å®¹æ€§æœ€å¥½ï¼Œå¾ˆæ—©çš„æµè§ˆå™¨éƒ½èƒ½æ”¯æŒï¼ˆä¹å‡ å¹´çš„éƒ½èƒ½æ”¯æŒï¼‰</li></ul></li></ul><h3 id="borswer-history-router-æµè§ˆå™¨å†å²è®°å½•è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#borswer-history-router-æµè§ˆå™¨å†å²è®°å½•è·¯ç”±" aria-hidden="true">#</a> Borswer History Router æµè§ˆå™¨å†å²è®°å½•è·¯ç”±</h3><ul><li>HTML5å‡ºç°åï¼Œæ–°å¢äº†History Apiï¼Œä»æ­¤ä»¥åï¼Œæµè§ˆå™¨æ‹¥æœ‰äº†æ”¹å˜è·¯å¾„è€Œä¸åˆ·æ–°é¡µé¢çš„æ–¹å¼ <ul><li>æ— åˆ·æ–°çš„æ”¹å˜å½“å‰åœ°å€ï¼Œä¸€èˆ¬ç”¨äºé”šé“¾æ¥</li><li>Historyè¡¨ç¤ºæµè§ˆå™¨çš„å†å²è®°å½•ï¼Œå®ƒä½¿ç”¨æ ˆçš„æ–¹å¼å­˜å‚¨</li><li>æŒ‡é’ˆæŒ‡å‘å½“å‰è®¿é—®çš„è·¯å¾„ï¼Œé€šè¿‡æŒ‡é’ˆç§»åŠ¨è®¿é—®ä¸åŒçš„è·¯å¾„</li></ul></li></ul><p><img src="'+f+`" alt="image.png"></p><ul><li>history.lengthï¼šè·å–æ ˆä¸­æ•°æ®é‡</li><li>history.pushStateï¼šå‘å½“å‰å†å²è®°å½•æ ˆä¸­åŠ å…¥ä¸€æ¡æ–°çš„è®°å½• <ol><li>å‚æ•°1ï¼šé™„åŠ çš„æ•°æ®ï¼Œè‡ªå®šä¹‰çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ä»»ä½•ç±»å‹</li><li>å‚æ•°2ï¼šé¡µé¢æ ‡é¢˜ï¼Œç›®å‰å¤§éƒ¨åˆ†æµè§ˆå™¨ä¸æ”¯æŒ</li><li>å‚æ•°3ï¼šæ–°çš„åœ°å€</li></ol></li><li>history.replaceStateï¼šå°†å½“å‰æŒ‡é’ˆæŒ‡å‘çš„å†å²è®°å½•ï¼Œæ›¿æ¢ä¸ºæŸä¸ªè®°å½• <ol><li>å‚æ•°1ï¼šé™„åŠ çš„æ•°æ®ï¼Œè‡ªå®šä¹‰çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ä»»ä½•ç±»å‹</li><li>å‚æ•°2ï¼šé¡µé¢æ ‡é¢˜ï¼Œç›®å‰å¤§éƒ¨åˆ†æµè§ˆå™¨ä¸æ”¯æŒ</li><li>å‚æ•°3ï¼šæ–°çš„åœ°å€</li></ol></li></ul><p><strong>æ ¹æ®é¡µé¢çš„è·¯å¾„å†³å®šæ¸²æŸ“å“ªä¸ªç»„ä»¶</strong></p><h2 id="è·¯ç”±ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±ç»„ä»¶" aria-hidden="true">#</a> è·¯ç”±ç»„ä»¶</h2><p>React-Router ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªé‡è¦ç»„ä»¶</p><h2 id="routerç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#routerç»„ä»¶" aria-hidden="true">#</a> Routerç»„ä»¶</h2><p>å®ƒæœ¬èº«ä¸åšä»»ä½•å±•ç¤ºï¼Œä»…æä¾›è·¯ç”±æ¨¡å¼é…ç½®ï¼Œå¦å¤–ï¼Œè¯¥ç»„ä»¶ä¼šäº§ç”Ÿä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œä¸Šä¸‹æ–‡ä¸­ä¼šæä¾›ä¸€äº›å®ç”¨çš„å¯¹è±¡å’Œæ–¹æ³•ï¼Œä¾›å…¶ä»–ç›¸å…³ç»„ä»¶ä½¿ç”¨</p><ul><li>HashRouterï¼šè¯¥ç»„ä»¶ï¼Œä½¿ç”¨hashæ¨¡å¼åŒ¹é…</li><li>BrowserRouterï¼šè¯¥ç»„ä»¶ï¼Œä½¿ç”¨BrowserHistoryæ¨¡å¼åŒ¹é…</li><li>ä¸€èˆ¬ä½¿ç”¨ Router ä½œä¸ºåˆ«å</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Routes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>é€šå¸¸æƒ…å†µä¸‹ï¼ŒRouterç»„ä»¶åªæœ‰ä¸€ä¸ªï¼Œå°†è¯¥ç»„ä»¶åŒ…è£¹æ•´ä¸ªé¡µé¢</strong></p><h3 id="routeç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#routeç»„ä»¶" aria-hidden="true">#</a> Routeç»„ä»¶</h3><p>æ ¹æ®ä¸åŒçš„åœ°å€ï¼Œå±•ç¤ºä¸åŒçš„ç»„ä»¶ é‡è¦å±æ€§ï¼š</p>`,17),en=n("li",null,[s("pathï¼šåŒ¹é…çš„è·¯å¾„ "),n("ul",null,[n("li",null,"é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼Œå¯ä»¥è®¾ç½® sensitive å±æ€§ä¸º trueï¼Œæ¥åŒºåˆ†å¤§å°å†™"),n("li",null,"é»˜è®¤æƒ…å†µä¸‹ï¼ŒåªåŒ¹é…åˆå§‹ç›®å½•ï¼Œå¦‚æœè¦ç²¾ç¡®åŒ¹é…ï¼Œé…ç½® exact å±æ€§ä¸º true"),n("li",null,"å¦‚æœä¸å†™pathï¼Œåˆ™ä¼šåŒ¹é…ä»»æ„è·¯å¾„"),n("li",null,[s("å¯ä»¥æ˜¯æ•°ç»„"),n("code",null,"path = ['/news', '/news/a']")])])],-1),on=n("li",null,[s("renderï¼š"),n("code",null,"render = { (values) => { return ä¸€ä¸ªReactå…ƒç´  } }")],-1),cn=n("li",null,null,-1),ln=p(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> Redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> loginInfo <span class="token keyword">from</span> <span class="token string">&quot;./loginInfo&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">ProtectedRoute</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Component<span class="token punctuation">,</span> children<span class="token punctuation">,</span> render<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Route <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span>
                  render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">values</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                      <span class="token keyword">if</span> <span class="token punctuation">(</span>loginInfo<span class="token punctuation">.</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                          <span class="token comment">//å¯ä»¥æ­£å¸¸å±•ç¤ºé¡µé¢</span>
                          <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token operator">/</span><span class="token operator">&gt;</span>
                      <span class="token punctuation">}</span>
                      <span class="token keyword">else</span> <span class="token punctuation">{</span>
                          <span class="token comment">// return &lt;Redirect to={{</span>
                          <span class="token comment">//     pathname: &quot;/login&quot;,</span>
                          <span class="token comment">//     search: &quot;?returnurl=&quot; + values.location.pathname</span>
                          <span class="token comment">// }} /&gt;</span>
                          <span class="token comment">//  è¿”å›é‡å®šå‘ç»„ä»¶ Redirect</span>
                          <span class="token keyword">return</span> <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                              <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span>
                              <span class="token literal-property property">state</span><span class="token operator">:</span> values<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname
                          <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                      <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Routeç»„ä»¶å¯ä»¥å†™å­å…ƒç´ ï¼Œchildrenï¼š</p><ul><li>ä¼ é€’Reactå…ƒç´ ï¼Œæ— è®ºæ˜¯å¦åŒ¹é…ï¼Œä¸€å®šä¼šæ˜¾ç¤º childrenï¼Œå¹¶ä¸”ä¼šå¿½ç•¥ component å±æ€§</li><li>ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æœ‰å¤šä¸ªå‚æ•°ï¼Œè¿™äº›å‚æ•°æ¥è‡ªäºä¸Šä¸‹æ–‡ï¼Œè¯¥å‡½æ•°è¿”å› react å…ƒç´ ï¼Œåˆ™ä¸€å®šä¼šæ˜¾ç¤ºè¿”å›çš„å…ƒç´ ï¼Œå¹¶ä¸”å¿½ç•¥ component å±æ€§</li><li>å¦‚æœä½¿ç”¨äº†Switchç»„ä»¶ï¼Œä¸”æ²¡æœ‰åŒ¹é…ä¸Šï¼Œå°±ä¸ä¼šæ˜¾ç¤ºå­å…ƒç´ </li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route exact sensitive path<span class="token operator">=</span><span class="token string">&quot;/a&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">A</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>å¿…å®šä¼šçœ‹åˆ°çš„å†…å®¹<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Routeç»„ä»¶å¯ä»¥å†™åˆ°ä»»æ„çš„åœ°æ–¹ï¼Œåªè¦ä¿è¯å®ƒæ˜¯Routerç»„ä»¶çš„åä»£å…ƒç´ </strong><strong>v6ç‰ˆæœ¬ä¸­Routeç»„ä»¶å¿…é¡»åŒ…è£¹åœ¨Routeså†…</strong></p><h3 id="switchç»„ä»¶-react-router-dom-v6ç‰ˆæœ¬æ¢äº†åå­—å¹¶æ›´æ–°äº†åŠŸèƒ½-å«routes" tabindex="-1"><a class="header-anchor" href="#switchç»„ä»¶-react-router-dom-v6ç‰ˆæœ¬æ¢äº†åå­—å¹¶æ›´æ–°äº†åŠŸèƒ½-å«routes" aria-hidden="true">#</a> Switchç»„ä»¶ï¼ˆreact-router-dom v6ç‰ˆæœ¬æ¢äº†åå­—å¹¶æ›´æ–°äº†åŠŸèƒ½ï¼Œå«Routesï¼‰</h3><ul><li>å†™åˆ°Switchç»„ä»¶ä¸­çš„Routeç»„ä»¶ï¼Œå½“åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªRouteåï¼Œä¼šç«‹å³åœæ­¢åŒ¹é…</li><li>ç”±äºSwitchç»„ä»¶ä¼šå¾ªç¯æ‰€æœ‰å­å…ƒç´ ï¼Œç„¶åè®©æ¯ä¸ªå­å…ƒç´ å»å®ŒæˆåŒ¹é…ï¼Œè‹¥åŒ¹é…åˆ°ï¼Œåˆ™æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼Œç„¶ååœæ­¢å¾ªç¯ <ul><li>å› æ­¤ï¼Œä¸èƒ½åœ¨Switchçš„å­å…ƒç´ ä¸­ä½¿ç”¨é™¤Routeå¤–çš„å…¶ä»–ç»„ä»¶</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ç»„ä»¶A</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ç»„ä»¶B</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ç»„ä»¶C</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/abc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">D</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ç»„ä»¶D</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Router</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/*åŠ äº†SwitchåŒ¹é…ä¸ä¸Šè·¯å¾„å°±ä¸ä¼šæ¸²æŸ“å­å…ƒç´ äº†*/</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">sensitive</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">A</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å¿…å®šä¼šçœ‹åˆ°çš„å†…å®¹</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/a/b<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">B</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">C</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Router</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è·¯ç”±ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±ä¿¡æ¯" aria-hidden="true">#</a> è·¯ç”±ä¿¡æ¯</h2><ul><li>Routeç»„ä»¶ä¼šåˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”ï¼Œå‘ä¸Šä¸‹æ–‡ä¸­æ³¨å…¥ä¸€äº›ä¿¡æ¯ï¼Œä¸Šä¸‹æ–‡ä¸­æœ‰ä¸‰ä¸ªå¯¹è±¡ï¼šhistoryã€locationã€match</li><li>è¯¥ä¸Šä¸‹æ–‡å¯¹å¼€å‘è€…æ˜¯éšè—çš„ï¼ŒRouteç»„ä»¶è‹¥åŒ¹é…åˆ°äº†åœ°å€ï¼Œåˆ™ä¼šå°†è¿™äº›ä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯ä½œä¸ºå±æ€§ä¼ å…¥å¯¹åº”çš„ç»„ä»¶</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>ç»„ä»¶<span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;çŠ¶æ€æ•°æ®&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>è·³è½¬åˆ°<span class="token operator">/</span>b<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>ç»„ä»¶<span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
            è·å–çŠ¶æ€æ•°æ®ï¼š<span class="token punctuation">{</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>è·³è½¬åˆ°<span class="token operator">/</span>a<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>æ‰¾ä¸åˆ°é¡µé¢<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/a&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">A</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/b&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">B</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>NotFound<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="history" tabindex="-1"><a class="header-anchor" href="#history" aria-hidden="true">#</a> history</h3><p>å®ƒå¹¶ä¸æ˜¯window.historyå¯¹è±¡ï¼Œé€šå¸¸åˆ©ç”¨è¯¥å¯¹è±¡æ— åˆ·æ–°è·³è½¬åœ°å€</p><ul><li>**ä¸ºä»€ä¹ˆæ²¡æœ‰ç›´æ¥ä½¿ç”¨ **window.history <strong>å¯¹è±¡ï¼Ÿ</strong><ul><li>React-Routerä¸­æœ‰ä¸¤ç§æ¨¡å¼ï¼šHashã€Historyï¼Œå¦‚æœç›´æ¥ä½¿ç”¨window.historyï¼Œåªèƒ½æ”¯æŒä¸€ç§æ¨¡å¼</li><li>å½“ä½¿ç”¨windows.history.pushStateæ–¹æ³•æ—¶ï¼Œæ²¡æœ‰åŠæ³•æ”¶åˆ°ä»»ä½•é€šçŸ¥ï¼Œå°†å¯¼è‡´Reactæ— æ³•çŸ¥æ™“åœ°å€å‘ç”Ÿäº†å˜åŒ–ï¼Œç»“æœå¯¼è‡´æ— æ³•é‡æ–°æ¸²æŸ“ç»„ä»¶</li></ul></li><li>pushï¼šå°†æŸä¸ªæ–°çš„åœ°å€å…¥æ ˆï¼ˆå†å²è®°å½•æ ˆï¼‰ <ul><li>å‚æ•°1ï¼šæ–°çš„åœ°å€ <ul><li>åªèƒ½å†™ç›¸å¯¹è·¯å¾„ï¼Œæœ¬ç«™çš„åœ°å€ï¼Œä¸èƒ½å†™ç»å¯¹è·¯å¾„</li></ul></li><li>å‚æ•°2ï¼šå¯é€‰ï¼Œé™„å¸¦çš„çŠ¶æ€æ•°æ®ï¼Œä¸æ˜¯å¾ˆå¸¸ç”¨</li></ul></li><li>replaceï¼šå°†æŸä¸ªæ–°çš„åœ°å€æ›¿æ¢æ‰å½“å‰æ ˆä¸­çš„åœ°å€ï¼Œä¸pushå‚æ•°ä¸€æ ·</li><li>go: ä¸window.historyä¸€è‡´</li><li>forward: ä¸window.historyä¸€è‡´</li><li>back: ä¸window.historyä¸€è‡´</li></ul><h3 id="location" tabindex="-1"><a class="header-anchor" href="#location" aria-hidden="true">#</a> location</h3><ul><li>ä¸history.locationå®Œå…¨ä¸€è‡´ï¼Œæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ï¼Œä¸window.locationä¸åŒ</li><li>locationå¯¹è±¡ä¸­è®°å½•äº†å½“å‰åœ°å€çš„ç›¸å…³ä¿¡æ¯</li><li>æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“<code>query-string</code>ï¼Œç”¨äºè§£æåœ°å€æ ä¸­çš„æ•°æ®ï¼ˆå‚æ•°ã€hashç­‰ï¼‰ï¼Œè§£æå‡ºæ¥æ˜¯ä¸€ä¸ªå¯¹è±¡ <ul><li><code>import qs from &#39;query-string&#39;</code></li><li><code>qs.parse(props.location.search)</code></li></ul></li><li>pathnameï¼šè·¯å¾„åœ°å€</li><li>searchï¼šåœ°å€æ å‚æ•°</li><li>hash</li><li>stateï¼šé™„å¸¦çš„çŠ¶æ€æ•°æ®</li></ul><h3 id="match" tabindex="-1"><a class="header-anchor" href="#match" aria-hidden="true">#</a> match</h3><p>è¯¥å¯¹è±¡ä¸­ä¿å­˜äº†ï¼Œè·¯ç”±è§„åˆ™åŒ¹é…çš„ç›¸å…³ä¿¡æ¯</p><ul><li>isExactï¼šäº‹å®ä¸Šï¼Œå½“å‰çš„è·¯å¾„å’Œè·¯ç”±é…ç½®çš„è·¯å¾„æ˜¯å¦æ˜¯ç²¾ç¡®åŒ¹é…çš„</li><li>paramsï¼šè·å–è·¯å¾„è§„åˆ™ä¸­å¯¹åº”çš„æ•°æ®</li><li>pathï¼šä½¿ç”¨çš„è·¯å¾„è§„åˆ™</li><li>urlï¼šçœŸæ­£çš„è·¯å¾„</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">&quot;query-string&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>location<span class="token punctuation">)</span>
    <span class="token keyword">const</span> query <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> hash <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>ç»„ä»¶<span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
            è®¿é—®åœ°å€ï¼š<span class="token punctuation">{</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
            <span class="token literal-property property">åœ°å€å‚æ•°ï¼ša</span><span class="token operator">:</span><span class="token punctuation">{</span>query<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token punctuation">{</span>query<span class="token punctuation">.</span>b<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span><span class="token punctuation">{</span>query<span class="token punctuation">.</span>c<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
            <span class="token literal-property property">hash</span><span class="token operator">:</span> d<span class="token operator">:</span><span class="token punctuation">{</span>hash<span class="token punctuation">.</span>d<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">f</span><span class="token operator">:</span><span class="token punctuation">{</span>hash<span class="token punctuation">.</span>f<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>æ‰¾ä¸åˆ°é¡µé¢<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/a&quot;</span> exact component<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">A</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>NotFound<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// http://localhost:3000/a?a=12&amp;b=32&amp;c=90#d=12&amp;f=123</span>
<span class="token comment">// è®¿é—®åœ°å€ï¼š/a</span>
<span class="token comment">// åœ°å€å‚æ•°ï¼ša:12, b:32, c:90</span>
<span class="token comment">// hash: d:12, f:123</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®é™…ä¸Šï¼Œåœ¨ä¹¦å†™Routeç»„ä»¶çš„pathå±æ€§æ—¶ï¼Œå¯ä»¥ä¹¦å†™ä¸€ä¸ª<code>string pattern</code>ï¼ˆå­—ç¬¦ä¸²æ­£åˆ™ï¼Œç±»ä¼¼æ­£åˆ™ä½†ä¸æ˜¯æ­£åˆ™ï¼‰ <strong>react-routerä½¿ç”¨äº†ç¬¬ä¸‰æ–¹åº“å¤„ç†paramsçš„æ•°æ®ï¼šPath-to-RegExpï¼Œè¯¥åº“çš„ä½œç”¨æ˜¯ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²æ­£åˆ™è½¬æ¢æˆä¸€ä¸ªçœŸæ­£çš„æ­£åˆ™è¡¨è¾¾å¼</strong></p>`,21),un=n("li",null,"ä½¿ç”¨stateï¼šåœ¨pushé¡µé¢æ—¶ï¼ŒåŠ å…¥stateï¼Œä¸å¸¸è§",-1),rn=n("li",null,[n("strong",null,"åˆ©ç”¨searchï¼šæŠŠæ•°æ®å¡«å†™åˆ°åœ°å€æ ä¸­çš„ ? åï¼Œå¸¸è§")],-1),kn=n("li",null,"åˆ©ç”¨hashï¼šæŠŠæ•°æ®å¡«å†™åˆ°hashåï¼Œä¸å¸¸è§",-1),dn=n("strong",null,"paramsï¼šæŠŠæ•°æ®å¡«å†™åˆ°è·¯å¾„ä¸­ï¼Œæœ€å¸¸è§",-1),vn={href:"https://www.npmjs.com/package/path-to-regexp",target:"_blank",rel:"noopener noreferrer"},mn=n("strong",null,"Path-to-RegExp",-1),gn=p(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">function</span> <span class="token function">News</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>æ˜¾ç¤º<span class="token punctuation">{</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>year<span class="token punctuation">}</span>å¹´<span class="token punctuation">{</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>month<span class="token punctuation">}</span>æœˆ<span class="token punctuation">{</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>day<span class="token punctuation">}</span>æ—¥çš„æ–°é—»<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>æ‰¾ä¸åˆ°é¡µé¢<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/news/:year(\\d+)/:month(\\d+)/:day(\\d+)/*&quot;</span> exact component<span class="token operator">=</span><span class="token punctuation">{</span>News<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>NotFound<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// http://localhost:3000/news/2012/2/12/a</span>
<span class="token comment">// props: {</span>
<span class="token comment">//     history: {</span>
<span class="token comment">//         length: 5,</span>
<span class="token comment">//         action: &quot;POP&quot;,</span>
<span class="token comment">//         location: {</span>
<span class="token comment">//             pathname: &quot;/news/2012/2/12/a&quot;,</span>
<span class="token comment">//             search: &quot;&quot;,</span>
<span class="token comment">//             hash: &quot;&quot;</span>
<span class="token comment">//         }</span>
<span class="token comment">//     },</span>
<span class="token comment">//     location: {</span>
<span class="token comment">//         pathname: &quot;/news/2012/2/12/a&quot;,</span>
<span class="token comment">//         search: &quot;&quot;,</span>
<span class="token comment">//         hash: &quot;&quot;,</span>
<span class="token comment">//         state: undefined</span>
<span class="token comment">//     },</span>
<span class="token comment">//     match: {</span>
<span class="token comment">//         path: &quot;/news/:year(\\\\d+)/:month(\\\\d+)/:day(\\\\d+)/*&quot;,</span>
<span class="token comment">//         url: &quot;/news/2012/2/12/a&quot;,</span>
<span class="token comment">//         isExact: true,</span>
<span class="token comment">//         params: {</span>
<span class="token comment">//             0: &quot;a&quot;,</span>
<span class="token comment">//             year: &quot;2012&quot;,</span>
<span class="token comment">//             month: &quot;2&quot;,</span>
<span class="token comment">//             day: &quot;12&quot;</span>
<span class="token comment">//         }</span>
<span class="token comment">//     },</span>
<span class="token comment">//		 staticContext: undefined</span>
<span class="token comment">// }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="éè·¯ç”±ç»„ä»¶è·å–è·¯ç”±ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#éè·¯ç”±ç»„ä»¶è·å–è·¯ç”±ä¿¡æ¯" aria-hidden="true">#</a> éè·¯ç”±ç»„ä»¶è·å–è·¯ç”±ä¿¡æ¯</h3><p>æŸäº›ç»„ä»¶ï¼Œå¹¶æ²¡æœ‰ç›´æ¥æ”¾åˆ°Routeä¸­ï¼Œè€Œæ˜¯åµŒå¥—åœ¨å…¶ä»–æ™®é€šç»„ä»¶ä¸­ï¼Œå› æ­¤ï¼Œå®ƒçš„propsä¸­æ²¡æœ‰è·¯ç”±ä¿¡æ¯ï¼Œå¦‚æœè¿™äº›ç»„ä»¶éœ€è¦è·å–åˆ°è·¯ç”±ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>å°†è·¯ç”±ä¿¡æ¯ä»çˆ¶ç»„ä»¶ä¸€å±‚ä¸€å±‚ä¼ é€’åˆ°å­ç»„ä»¶</li><li>ä½¿ç”¨react-routeræä¾›çš„é«˜é˜¶ç»„ä»¶withRouterï¼ŒåŒ…è£…è¦ä½¿ç”¨çš„ç»„ä»¶ï¼Œè¯¥é«˜é˜¶ç»„ä»¶ä¼šè¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œæ–°ç»„ä»¶ä¼šæ³¨å…¥è·¯ç”±ä¿¡æ¯</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch<span class="token punctuation">,</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">const</span> AWrapper <span class="token operator">=</span> <span class="token function">withRouter</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// function withRouter(Comp) {</span>
<span class="token comment">//     return function routerWrapper(props) {</span>
<span class="token comment">//         //è·å–ä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯</span>
<span class="token comment">//         return &lt;Comp {...props} history={ä¸Šä¸‹æ–‡ä¸­çš„history} /&gt;</span>
<span class="token comment">//     }</span>
<span class="token comment">// }</span>
<span class="token keyword">function</span> <span class="token function">News</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>æ–°é—»åˆ—è¡¨<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      	<span class="token operator">&lt;</span>AWrapper <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>ç‚¹å‡»è¿”å›<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>é¦–é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>æ‰¾ä¸åˆ°é¡µé¢<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/news&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>News<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> exact component<span class="token operator">=</span><span class="token punctuation">{</span>Index<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>NotFound<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å…¶ä»–ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–ç»„ä»¶" aria-hidden="true">#</a> å…¶ä»–ç»„ä»¶</h2><h3 id="link" tabindex="-1"><a class="header-anchor" href="#link" aria-hidden="true">#</a> Link</h3><p>ç”Ÿæˆä¸€ä¸ªæ— åˆ·æ–°è·³è½¬çš„aå…ƒç´ </p><ul><li>to <ul><li>å­—ç¬¦ä¸²ï¼šè·³è½¬çš„ç›®æ ‡åœ°å€</li><li>å¯¹è±¡ï¼š <ul><li>pathnameï¼šurlè·¯å¾„</li><li>search</li><li>hash</li><li>stateï¼šé™„åŠ çš„çŠ¶æ€ä¿¡æ¯</li></ul></li></ul></li><li>replaceï¼šboolï¼Œè¡¨ç¤ºæ˜¯å¦æ˜¯æ›¿æ¢å½“å‰åœ°å€ï¼Œé»˜è®¤æ˜¯false</li><li>innerRefï¼šå¯ä»¥å°†å†…éƒ¨çš„aå…ƒç´ çš„refé™„ç€åœ¨ä¼ é€’çš„å¯¹è±¡æˆ–å‡½æ•°å‚æ•°ä¸Š <ul><li>å‡½æ•°</li><li>refå¯¹è±¡</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// æ‰‹å†™ Link ç»„ä»¶ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨äº† router ä¸­ history</span>
<span class="token keyword">function</span> <span class="token function">TestLink</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&#39;javascript:&#39;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>to<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>TestLink<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// import TestLink from &#39;./testLink&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Link<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">function</span> <span class="token function">PageA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token constant">A</span>é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">PageB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token constant">B</span>é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">NavBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/*&lt;TestLink to=&#39;/a&#39; &gt;å»Aé¡µ&lt;/TestLink&gt;*/</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/*&lt;TestLink to=&#39;/b&#39; &gt;å»Bé¡µ&lt;/TestLink&gt;*/</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&#39;/a&#39;</span> <span class="token operator">&gt;</span>å»<span class="token constant">A</span>é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/b&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token string">&quot;#abc&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">&quot;?a=1&amp;b=2&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>å»<span class="token constant">B</span>é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>NavBar <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&#39;/a&#39;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>PageA<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&#39;/b&#39;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>PageB<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="navlink" tabindex="-1"><a class="header-anchor" href="#navlink" aria-hidden="true">#</a> NavLink</h3><p>æ˜¯ä¸€ç§ç‰¹æ®Šçš„Linkï¼ŒLinkç»„ä»¶å…·å¤‡çš„åŠŸèƒ½ï¼Œå®ƒéƒ½æœ‰ å®ƒå…·å¤‡çš„é¢å¤–åŠŸèƒ½æ˜¯ï¼šæ ¹æ®å½“å‰åœ°å€å’Œé“¾æ¥åœ°å€ï¼Œæ¥å†³å®šè¯¥é“¾æ¥çš„æ ·å¼</p><ul><li>activeClassName: åŒ¹é…æ—¶ä½¿ç”¨çš„ç±»å</li><li>activeStyle: åŒ¹é…æ—¶ä½¿ç”¨çš„å†…è”æ ·å¼</li><li>exact: æ˜¯å¦ç²¾ç¡®åŒ¹é…</li><li>sensitiveï¼šåŒ¹é…æ—¶æ˜¯å¦åŒºåˆ†å¤§å°å†™</li><li>strictï¼šæ˜¯å¦ä¸¥æ ¼åŒ¹é…æœ€åä¸€ä¸ªæ–œæ </li></ul><h3 id="redirect-react-router-dom-v6ç‰ˆæœ¬æ¢äº†åå­—å¹¶æ›´æ–°äº†åŠŸèƒ½-å«usenavigate" tabindex="-1"><a class="header-anchor" href="#redirect-react-router-dom-v6ç‰ˆæœ¬æ¢äº†åå­—å¹¶æ›´æ–°äº†åŠŸèƒ½-å«usenavigate" aria-hidden="true">#</a> Redirectï¼ˆreact-router-dom v6ç‰ˆæœ¬æ¢äº†åå­—å¹¶æ›´æ–°äº†åŠŸèƒ½ï¼Œå«useNavigateï¼‰</h3><p>é‡å®šå‘ç»„ä»¶ï¼Œå½“åŠ è½½åˆ°è¯¥ç»„ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨è·³è½¬ï¼ˆæ— åˆ·æ–°ï¼‰åˆ°å¦å¤–ä¸€ä¸ªåœ°å€</p><ul><li>toï¼šè·³è½¬çš„åœ°å€ <ul><li>å­—ç¬¦ä¸²</li><li>å¯¹è±¡</li></ul></li><li>push: é»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºè·³è½¬ä½¿ç”¨æ›¿æ¢çš„æ–¹å¼ï¼Œè®¾ç½®ä¸ºtrueåï¼Œåˆ™ä½¿ç”¨pushçš„æ–¹å¼è·³è½¬</li><li>fromï¼šå½“åŒ¹é…åˆ°fromåœ°å€è§„åˆ™æ—¶æ‰è¿›è¡Œè·³è½¬</li><li>exact: æ˜¯å¦ç²¾ç¡®åŒ¹é…from</li><li>sensitiveï¼šfromåŒ¹é…æ—¶æ˜¯å¦åŒºåˆ†å¤§å°å†™</li><li>strictï¼šfromæ˜¯å¦ä¸¥æ ¼åŒ¹é…æœ€åä¸€ä¸ªæ–œæ </li></ul><h2 id="å¯¼èˆªå®ˆå«" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªå®ˆå«" aria-hidden="true">#</a> å¯¼èˆªå®ˆå«</h2><p>å¯¼èˆªå®ˆå«ï¼šå½“ç¦»å¼€ä¸€ä¸ªé¡µé¢ï¼Œè¿›å…¥å¦ä¸€ä¸ªé¡µé¢æ—¶ï¼Œè§¦å‘çš„äº‹ä»¶</p><h3 id="historyå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#historyå¯¹è±¡" aria-hidden="true">#</a> historyå¯¹è±¡</h3><ul><li>listen: æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬åœ°å€çš„å˜åŒ–ï¼Œå½“åœ°å€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè°ƒç”¨ä¼ é€’çš„å‡½æ•° <ul><li>å‚æ•°ï¼šå‡½æ•°ï¼Œè¿è¡Œæ—¶é—´ç‚¹ï¼šå‘ç”Ÿåœ¨å³å°†è·³è½¬åˆ°æ–°é¡µé¢æ—¶ <ul><li>å‚æ•°1ï¼šlocationå¯¹è±¡ï¼Œè®°å½•å½“å‰çš„åœ°å€ä¿¡æ¯</li><li>å‚æ•°2ï¼šactionï¼Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¿›å…¥è¯¥åœ°å€çš„æ–¹å¼ <ul><li>POPï¼šå‡ºæ ˆ <ul><li>é€šè¿‡ç‚¹å‡»æµè§ˆå™¨åé€€ã€å‰è¿›</li><li>è°ƒç”¨history.go</li><li>è°ƒç”¨history.goBack</li><li>è°ƒç”¨history.goForward</li></ul></li><li>PUSHï¼šå…¥æ ˆ <ul><li>history.push</li></ul></li><li>REPLACEï¼šæ›¿æ¢ <ul><li>history.replace</li></ul></li></ul></li></ul></li><li>è¿”å›ç»“æœï¼šå‡½æ•°ï¼Œå¯ä»¥è°ƒç”¨è¯¥å‡½æ•°å–æ¶ˆç›‘å¬</li></ul></li><li>blockï¼šè®¾ç½®ä¸€ä¸ªé˜»å¡ï¼Œå¹¶åŒæ—¶è®¾ç½®é˜»å¡æ¶ˆæ¯ï¼Œå½“é¡µé¢å‘ç”Ÿè·³è½¬æ—¶ï¼Œä¼šè¿›å…¥é˜»å¡ï¼Œå¹¶å°†é˜»å¡æ¶ˆæ¯ä¼ é€’åˆ°è·¯ç”±æ ¹ç»„ä»¶çš„getUserConfirmationæ–¹æ³•ã€‚ <ul><li>å‚æ•°ï¼šä¸€ä¸ªå¿…é¡»æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯è¦è·³è½¬è·¯ç”±ä¿¡æ¯å’Œè·³è½¬æ–¹å¼ï¼Œå‡½æ•°å†…å¿…é¡»æœ‰è¿”å›å€¼</li><li>è°ƒç”¨blockè¿”å›ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºå–æ¶ˆé˜»å¡å™¨</li></ul></li></ul><h3 id="è·¯ç”±æ ¹ç»„ä»¶å µå¡è·³è½¬å±æ€§" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±æ ¹ç»„ä»¶å µå¡è·³è½¬å±æ€§" aria-hidden="true">#</a> è·¯ç”±æ ¹ç»„ä»¶å µå¡è·³è½¬å±æ€§</h3><ul><li>getUserConfirmation <ul><li>å‚æ•°ï¼šå‡½æ•° <ul><li>å‚æ•°1ï¼šé˜»å¡æ¶ˆæ¯ <ul><li>å­—ç¬¦ä¸²æ¶ˆæ¯</li><li>å‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºè¡¨ç¤ºé˜»å¡æ¶ˆæ¯ <ul><li>å‚æ•°1ï¼šlocationå¯¹è±¡</li><li>å‚æ•°2ï¼šactionå€¼</li></ul></li></ul></li><li>å‚æ•°2ï¼šå›è°ƒå‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°å¹¶ä¼ é€’trueï¼Œåˆ™è¡¨ç¤ºè¿›å…¥åˆ°æ–°é¡µé¢ï¼Œå¦åˆ™ï¼Œä¸åšä»»ä½•æ“ä½œ</li></ul></li></ul></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å†…éƒ¨å®ç°</span>
getUserConfirmation <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">callback</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¸¸è§åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#å¸¸è§åº”ç”¨" aria-hidden="true">#</a> å¸¸è§åº”ç”¨</h2><ul><li>åµŒå¥—è·¯ç”±è·¯å¾„ <ul><li>ä½¿ç”¨ match åŠ¨æ€çš„è·å–çˆ¶ç»„ä»¶ä¾èµ–çš„è·¯å¾„</li><li>å•ç‹¬è®¾ç½®é…ç½®å¯¹è±¡ï¼Œæ”¾ç½®è·¯ç”±è§„åˆ™å’Œè·¯å¾„</li></ul></li><li>æ»šåŠ¨æ¡å¤ä½ <ul><li>é«˜é˜¶ç»„ä»¶</li><li>ä½¿ç”¨useEffect</li><li>ä½¿ç”¨è‡ªå®šä¹‰çš„å¯¼èˆªå®ˆå«</li></ul></li><li>é˜»æ­¢è·³è½¬ï¼Œé¡µé¢é‰´æƒä¿æŠ¤ <ul><li>æ¯”å¦‚åˆ¤æ–­æ˜¯å¦ç™»å½•ï¼Œä¸ºç™»å½•å…ˆè·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œç™»å½•åå†è·³è½¬å›æ¥</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> Redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> loginInfo <span class="token keyword">from</span> <span class="token string">&quot;./loginInfo&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">ProtectedRoute</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Component<span class="token punctuation">,</span> children<span class="token punctuation">,</span> render<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Route <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span>
                  render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">values</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// values ä¸ºè·¯ç”±ä¿¡æ¯</span>
                      <span class="token keyword">if</span> <span class="token punctuation">(</span>loginInfo<span class="token punctuation">.</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                          <span class="token comment">//å¯ä»¥æ­£å¸¸å±•ç¤ºé¡µé¢</span>
                          <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token operator">/</span><span class="token operator">&gt;</span>
                      <span class="token punctuation">}</span>
                      <span class="token keyword">else</span> <span class="token punctuation">{</span>
                          <span class="token comment">// return &lt;Redirect to={{</span>
                          <span class="token comment">//     pathname: &quot;/login&quot;,</span>
                          <span class="token comment">//     search: &quot;?returnurl=&quot; + values.location.pathname</span>
                          <span class="token comment">// }} /&gt;</span>
                          <span class="token comment">//  è¿”å›é‡å®šå‘ç»„ä»¶ Redirect</span>
                          <span class="token keyword">return</span> <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                              <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span>
                              <span class="token literal-property property">state</span><span class="token operator">:</span> values<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname
                          <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                      <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./index.css&quot;</span>
<span class="token keyword">import</span> Page1 <span class="token keyword">from</span> <span class="token string">&quot;./Page1&quot;</span>
<span class="token keyword">import</span> Page2 <span class="token keyword">from</span> <span class="token string">&quot;./Page2&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">RouterStop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Router getUserConfirmation<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">callback</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰‹å†™é»˜è®¤getUserConfirmation</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;nav&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/page1&quot;</span><span class="token operator">&gt;</span>é¡µé¢<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;/page2&quot;</span><span class="token operator">&gt;</span>é¡µé¢<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/page1&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Page1<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/page2&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Page2<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> RouterStop<span class="token punctuation">;</span>


<span class="token comment">// page1</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Page1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>
            Page1
        <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// page2</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token comment">// import { Prompt } from &quot;react-router-dom&quot;</span>
<span class="token keyword">import</span> Prompt <span class="token keyword">from</span> <span class="token string">&quot;./Prompt&quot;</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Page2</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">val</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Prompt when<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">!==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
                        message<span class="token operator">=</span><span class="token string">&quot;åˆ«ä¹±æ¥ï¼Œä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼ŒçœŸçš„è¦è·³è½¬å—ï¼Ÿ&quot;</span>
                <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">}</span>
                          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                                  <span class="token literal-property property">val</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
                              <span class="token punctuation">}</span><span class="token punctuation">)</span>
                          <span class="token punctuation">}</span><span class="token punctuation">}</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ‰‹å†™Prompt</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>

<span class="token keyword">class</span> <span class="token class-name">Prompt</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">when</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//å½“whenä¸ºtrueçš„æ—¶å€™ï¼Œæ·»åŠ é˜»å¡</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token comment">//å½“é˜»å¡æ—¶ï¼Œè·³è½¬é¡µé¢çš„æç¤ºæ¶ˆæ¯</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token function">handleBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>when<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//æ·»åŠ é˜»å¡</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>unBlock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>unBlock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">unBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>unBlock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">unBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>Prompt<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·¯ç”±åˆ‡æ¢åŠ¨ç”»" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±åˆ‡æ¢åŠ¨ç”»" aria-hidden="true">#</a> è·¯ç”±åˆ‡æ¢åŠ¨ç”»</h3><p>ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“ï¼šreact-transition-group CSSTransitionï¼šç”¨äºä¸ºå†…éƒ¨çš„DOMå…ƒç´ æ·»åŠ ç±»æ ·å¼ï¼Œé€šè¿‡inå±æ€§å†³å®šå†…éƒ¨çš„DOMå¤„äºé€€å‡ºè¿˜æ˜¯è¿›å…¥é˜¶æ®µã€‚</p><h1 id="routeræºç å­¦ä¹ " tabindex="-1"><a class="header-anchor" href="#routeræºç å­¦ä¹ " aria-hidden="true">#</a> Routeræºç å­¦ä¹ </h1><h2 id="path-to-regexp" tabindex="-1"><a class="header-anchor" href="#path-to-regexp" aria-hidden="true">#</a> path-to-regexp</h2><p>**åˆ›å»ºä¸€ä¸ªmatchå¯¹è±¡ï¼Œ**ç¬¬ä¸‰æ–¹åº“ï¼špath-to-regexpï¼Œç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²æ­£åˆ™ï¼ˆè·¯å¾„æ­£åˆ™ï¼Œpath regexpï¼‰</p><h2 id="historyå¯¹è±¡-1" tabindex="-1"><a class="header-anchor" href="#historyå¯¹è±¡-1" aria-hidden="true">#</a> historyå¯¹è±¡</h2><p>è¯¥å¯¹è±¡æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œç”¨äºæ§åˆ¶æˆ–ç›‘å¬åœ°å€çš„å˜åŒ–ã€‚ è¯¥å¯¹è±¡<strong>ä¸æ˜¯</strong>window.historyï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ½ç¦»çš„å¯¹è±¡ï¼Œå®ƒæä¾›ç»Ÿä¸€çš„APIæ¥å£ï¼Œå°è£…äº†å…·ä½“çš„å®ç°</p><ul><li>createBrowserHistory äº§ç”Ÿçš„æ§åˆ¶æµè§ˆå™¨çœŸå®åœ°å€çš„historyå¯¹è±¡</li><li>createHashHistory äº§ç”Ÿçš„æ§åˆ¶æµè§ˆå™¨hashçš„historyå¯¹è±¡</li><li>createMemoryHistory äº§ç”Ÿçš„æ§åˆ¶å†…å­˜ä¸­åœ°å€æ•°ç»„çš„historyå¯¹è±¡</li></ul><p>historyå¯¹è±¡å…±åŒçš„ç‰¹ç‚¹ï¼šç»´æŠ¤äº†ä¸€ä¸ªåœ°å€æ ˆ ç¬¬ä¸‰æ–¹åº“ï¼šhistory <strong>ä»¥ä¸‹ä¸‰ä¸ªå‡½æ•°ï¼Œè™½ç„¶åç§°å’Œå‚æ•°ä¸åŒï¼Œä½†è¿”å›çš„å¯¹è±¡ç»“æ„(history)å®Œå…¨ä¸€è‡´</strong></p><h3 id="historyå¯¹è±¡-2" tabindex="-1"><a class="header-anchor" href="#historyå¯¹è±¡-2" aria-hidden="true">#</a> historyå¯¹è±¡</h3><ul><li>actionï¼šå½“å‰åœ°å€æ ˆï¼Œæœ€åä¸€æ¬¡æ“ä½œçš„ç±»å‹ <ul><li>å¦‚æœæ˜¯é€šè¿‡createXXXHistoryå‡½æ•°æ–°åˆ›å»ºçš„historyå¯¹è±¡ï¼Œactionå›ºå®šä¸ºPOP</li><li>å¦‚æœè°ƒç”¨äº†historyçš„pushæ–¹æ³•ï¼Œactionå˜ä¸ºPUSH</li><li>å¦‚æœè°ƒç”¨äº†historyçš„replaceæ–¹æ³•ï¼Œactionå˜ä¸ºREPLACE</li></ul></li><li>pushï¼šå‘å½“å‰åœ°å€æ ˆæŒ‡é’ˆä½ç½®ï¼Œå…¥æ ˆä¸€ä¸ªåœ°å€</li><li>replaceï¼šæ›¿æ¢æŒ‡é’ˆæŒ‡å‘çš„åœ°å€</li><li>goï¼šæ§åˆ¶å½“å‰åœ°å€æ ˆæŒ‡é’ˆåç§»ï¼Œå¦‚æœæ˜¯0ï¼Œåœ°å€ä¸å˜ï¼›å¦‚æœæ˜¯è´Ÿæ•°ï¼Œåˆ™åé€€æŒ‡å®šçš„æ­¥æ•°ï¼›å¦‚æœæ˜¯æ­£æ•°ï¼Œåˆ™å‰è¿›æŒ‡å®šçš„æ­¥æ•°ï¼›</li><li>lengthï¼šå½“å‰æ ˆä¸­çš„åœ°å€æ•°é‡</li><li>goBackï¼šç›¸å½“äºgo(-1)</li><li>goForwardï¼šç›¸å½“äºgo(1)</li><li>locationï¼šè¡¨è¾¾å½“å‰åœ°å€ä¸­çš„ä¿¡æ¯</li><li>listenï¼šå‡½æ•°ï¼Œç”¨äºç›‘å¬åœ°å€æ ˆæŒ‡é’ˆçš„å˜åŒ– <ul><li>è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‚æ•°è¡¨ç¤ºåœ°å€å˜åŒ–åè¦åšçš„äº‹æƒ… <ul><li>å‚æ•°å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°</li><li>locationï¼šè®°å½•äº†æ–°çš„åœ°å€</li><li>actionï¼šè¿›å…¥æ–°åœ°å€çš„æ–¹å¼ <ul><li>POPï¼šæŒ‡é’ˆç§»åŠ¨ï¼Œè°ƒç”¨goã€goBackã€goForwardã€ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨åé€€æŒ‰é’®</li><li>PUSHï¼šè°ƒç”¨history.push</li><li>REPLACEï¼šè°ƒç”¨history.replace</li></ul></li></ul></li><li>è¯¥å‡½æ•°æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå–æ¶ˆç›‘å¬</li></ul></li><li>blockï¼šç”¨äºè®¾ç½®ä¸€ä¸ªé˜»å¡ï¼Œå½“é¡µé¢å‘ç”Ÿè·³è½¬æ—¶ï¼Œä¼šå°†æŒ‡å®šçš„æ¶ˆæ¯ä¼ é€’åˆ°getUserConfirmationï¼Œå¹¶è°ƒç”¨getUserConfirmationå‡½æ•° <ul><li>è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºæ¶ˆæ¯å†…å®¹ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼æ˜¯æ¶ˆæ¯å†…å®¹</li><li>è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå–æ¶ˆå‡½æ•°ï¼Œè°ƒç”¨å–æ¶ˆå‡½æ•°å¯ä»¥è§£é™¤é˜»å¡</li></ul></li><li>createHrefï¼šbasename+url</li></ul><h3 id="createbrowserhistory" tabindex="-1"><a class="header-anchor" href="#createbrowserhistory" aria-hidden="true">#</a> createBrowserHistory</h3><p>åˆ›å»ºä¸€ä¸ªä½¿ç”¨æµè§ˆå™¨History Apiçš„historyå¯¹è±¡ é…ç½®å¯¹è±¡ï¼š</p><ul><li>basenameï¼šè®¾ç½®æ ¹è·¯å¾„</li><li>forceRefreshï¼šåœ°å€æ”¹å˜æ—¶æ˜¯å¦å¼ºåˆ¶åˆ·æ–°é¡µé¢</li><li>keyLengthï¼šlocationå¯¹è±¡ä½¿ç”¨çš„keyå€¼é•¿åº¦ <ul><li>åœ°å€æ ˆä¸­è®°å½•çš„å¹¶éå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ä¸€ä¸ªlocationå¯¹è±¡</li></ul></li><li>getUserConfirmationï¼šä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å½“è°ƒç”¨historyå¯¹è±¡blockå‡½æ•°åï¼Œå‘ç”Ÿé¡µé¢è·³è½¬æ—¶è¿è¡Œ</li></ul><h3 id="createhashhistory" tabindex="-1"><a class="header-anchor" href="#createhashhistory" aria-hidden="true">#</a> createHashHistory</h3><p>åˆ›å»ºä¸€ä¸ªä½¿ç”¨æµè§ˆå™¨hashçš„historyå¯¹è±¡ é…ç½®å¯¹è±¡ï¼š</p><ul><li>hashTypeï¼š#å·åç»™å®šçš„è·¯å¾„æ ¼å¼ <ul><li>hashbangï¼šè¢«chromeå¼ƒç”¨ï¼Œ#!è·¯å¾„</li><li>noslashï¼š#a/b/c</li><li>slashï¼š#/a/b/c</li></ul></li></ul><h3 id="creatememoryhistory" tabindex="-1"><a class="header-anchor" href="#creatememoryhistory" aria-hidden="true">#</a> createMemoryHistory</h3><p>åˆ›å»ºä¸€ä¸ªä½¿ç”¨å†…å­˜ä¸­çš„åœ°å€æ ˆçš„historyå¯¹è±¡ï¼Œä¸€èˆ¬ç”¨äºæ²¡æœ‰åœ°å€æ çš„ç¯å¢ƒ é…ç½®å¯¹è±¡ï¼šè¯¦è§memoryHistory.js</p><h2 id="æ‰‹å†™createbrowserhistory" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™createbrowserhistory" aria-hidden="true">#</a> æ‰‹å†™createBrowserHistory</h2><h3 id="åˆ›å»ºlocation" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºlocation" aria-hidden="true">#</a> åˆ›å»ºlocation</h3><p>stateå¤„ç†ï¼š <code>**const** historyState = window.history.state;</code></p><ul><li>å¦‚æœhistoryStateæ²¡æœ‰å€¼ï¼Œåˆ™stateä¸ºundefined</li><li>å¦‚æœhistoryStateæœ‰å€¼ <ul><li>å¦‚æœå€¼çš„ç±»å‹ä¸æ˜¯å¯¹è±¡</li><li>æ˜¯å¯¹è±¡ <ul><li>è¯¥å¯¹è±¡ä¸­æœ‰keyå±æ€§ï¼Œå°†keyå±æ€§ä½œä¸ºlocationçš„keyå±æ€§å€¼ï¼Œå¹¶ä¸”å°†historyStateå¯¹è±¡ä¸­çš„stateå±æ€§ä½œä¸ºstateå±æ€§å€¼</li><li>å¦‚æœæ²¡æœ‰keyå±æ€§ï¼Œåˆ™ç›´æ¥å°†historyStateèµ‹å€¼ç»™state</li></ul></li></ul></li></ul><h2 id="æ‰‹å†™router" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™router" aria-hidden="true">#</a> æ‰‹å†™Router</h2><h2 id="æ‰‹å†™route" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™route" aria-hidden="true">#</a> æ‰‹å†™Route</h2><h2 id="æ‰‹å†™switch" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™switch" aria-hidden="true">#</a> æ‰‹å†™Switch</h2><ul><li>Switchï¼šåŒ¹é…Routeå­å…ƒç´ ï¼Œæ¸²æŸ“ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„Route</li><li>å®ç°Switchï¼šå¾ªç¯Switchç»„ä»¶çš„childrenï¼Œä¾æ¬¡åŒ¹é…æ¯ä¸€ä¸ªRouteç»„ä»¶ï¼Œå½“åŒ¹é…åˆ°æ—¶ï¼Œç›´æ¥æ¸²æŸ“ï¼Œåœæ­¢å¾ªç¯</li></ul><h2 id="æ‰‹å†™withrouter" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™withrouter" aria-hidden="true">#</a> æ‰‹å†™withRouter</h2><p>HOCé«˜é˜¶ç»„ä»¶ï¼Œç”¨äºå°†è·¯ç”±ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ï¼Œä½œä¸ºå±æ€§æ³¨å…¥åˆ°ç»„ä»¶ä¸­</p><h2 id="æ‰‹å†™link" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™link" aria-hidden="true">#</a> æ‰‹å†™Link</h2>`,58),bn={id:"redux",tabindex:"-1"},hn=n("a",{class:"header-anchor",href:"#redux","aria-hidden":"true"},"#",-1),yn={href:"http://cn.redux.js.org/",target:"_blank",rel:"noopener noreferrer"},fn=p('<p>action reducer store</p><h2 id="mvc" tabindex="-1"><a class="header-anchor" href="#mvc" aria-hidden="true">#</a> MVC</h2><p>å®ƒæ˜¯ä¸€ä¸ªUIçš„è§£å†³æ–¹æ¡ˆï¼Œç”¨äºé™ä½UIï¼Œä»¥åŠUIå…³è”çš„æ•°æ®çš„å¤æ‚åº¦ã€‚ <strong>ä¼ ç»Ÿçš„æœåŠ¡å™¨ç«¯çš„MVC</strong><img src="'+x+'" alt="image.png"> ç¯å¢ƒï¼š</p><ul><li>æœåŠ¡ç«¯éœ€è¦å“åº”ä¸€ä¸ªå®Œæ•´çš„HTML</li><li>è¯¥HTMLä¸­åŒ…å«é¡µé¢éœ€è¦çš„æ•°æ®</li><li>æµè§ˆå™¨ä»…æ‰¿æ‹…æ¸²æŸ“é¡µé¢çš„ä½œç”¨</li></ul><p>ä»¥ä¸Šçš„è¿™ç§æ–¹å¼å«åš<strong>æœåŠ¡ç«¯æ¸²æŸ“</strong>ï¼Œå³æœåŠ¡å™¨ç«¯å°†å®Œæ•´çš„é¡µé¢ç»„è£…å¥½ä¹‹åï¼Œä¸€èµ·å‘é€ç»™å®¢æˆ·ç«¯ã€‚ æœåŠ¡å™¨ç«¯éœ€è¦å¤„ç†UIä¸­è¦ç”¨åˆ°çš„æ•°æ®ï¼Œå¹¶ä¸”è¦å°†æ•°æ®åµŒå…¥åˆ°é¡µé¢ä¸­ï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„HTMLé¡µé¢å“åº”ã€‚ ä¸ºäº†é™ä½å¤„ç†è¿™ä¸ªè¿‡ç¨‹çš„å¤æ‚åº¦ï¼Œå‡ºç°äº†MVCæ¨¡å¼ã€‚ <img src="'+w+`" alt="image.png"></p><ul><li><strong>Controller</strong>: å¤„ç†è¯·æ±‚ï¼Œç»„è£…è¿™æ¬¡è¯·æ±‚éœ€è¦çš„æ•°æ®</li><li><strong>Model</strong>ï¼šéœ€è¦ç”¨äºUIæ¸²æŸ“çš„æ•°æ®æ¨¡å‹</li><li><strong>View</strong>ï¼šè§†å›¾ï¼Œç”¨äºå°†æ¨¡å‹ç»„è£…åˆ°ç•Œé¢ä¸­</li></ul><p><strong>å‰ç«¯MVCæ¨¡å¼çš„å›°éš¾</strong> Reactè§£å†³äº† æ•°æ® -&gt; è§†å›¾ çš„é—®é¢˜</p><ol><li>å‰ç«¯çš„controllerè¦æ¯”æœåŠ¡å™¨å¤æ‚å¾ˆå¤šï¼Œå› ä¸ºå‰ç«¯ä¸­çš„controllerå¤„ç†çš„æ˜¯ç”¨æˆ·çš„æ“ä½œï¼Œè€Œç”¨æˆ·çš„æ“ä½œåœºæ™¯æ˜¯å¤æ‚çš„ã€‚</li><li>å¯¹äºé‚£äº›ç»„ä»¶åŒ–çš„æ¡†æ¶ï¼ˆæ¯”å¦‚vueã€reactï¼‰ï¼Œå®ƒä»¬ä½¿ç”¨çš„æ˜¯å•å‘æ•°æ®æµã€‚è‹¥éœ€è¦å…±äº«æ•°æ®ï¼Œåˆ™å¿…é¡»å°†æ•°æ®æå‡åˆ°é¡¶å±‚ç»„ä»¶ï¼Œç„¶åæ•°æ®å†ä¸€å±‚ä¸€å±‚ä¼ é€’ï¼Œæå…¶ç¹çã€‚ è™½ç„¶å¯ä»¥ä½¿ç”¨ä¸Šä¸‹æ–‡æ¥æä¾›å…±äº«æ•°æ®ï¼Œä½†å¯¹æ•°æ®çš„æ“ä½œéš¾ä»¥ç›‘æ§ï¼Œå®¹æ˜“å¯¼è‡´è°ƒè¯•é”™è¯¯çš„å›°éš¾ï¼Œä»¥åŠæ•°æ®è¿˜åŸçš„å›°éš¾ã€‚å¹¶ä¸”ï¼Œè‹¥å¼€å‘ä¸€ä¸ªå¤§ä¸­å‹é¡¹ç›®ï¼Œå…±äº«çš„æ•°æ®å¾ˆå¤šï¼Œä¼šå¯¼è‡´ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®å˜å¾—éå¸¸å¤æ‚ã€‚</li></ol><p>æ¯”å¦‚ï¼Œä¸Šä¸‹æ–‡ä¸­æœ‰å¦‚ä¸‹æ ¼å¼çš„æ•°æ®ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>value <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">users</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">addUser</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">u</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">deleteUser</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">u</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">updateUser</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">u</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å‰ç«¯éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#å‰ç«¯éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> å‰ç«¯éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®è§£å†³æ–¹æ¡ˆ</h2><h3 id="flux" tabindex="-1"><a class="header-anchor" href="#flux" aria-hidden="true">#</a> Flux</h3><p>Facebookæå‡ºçš„æ•°æ®è§£å†³æ–¹æ¡ˆï¼Œå®ƒçš„æœ€å¤§å†å²æ„ä¹‰ï¼Œåœ¨äºå®ƒå¼•å…¥äº†actionçš„æ¦‚å¿µ</p><ul><li>actionæ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œç”¨äºæè¿°è¦å¹²ä»€ä¹ˆã€‚<strong>actionæ˜¯è§¦å‘æ•°æ®å˜åŒ–çš„å”¯ä¸€åŸå› </strong></li><li>storeè¡¨ç¤ºæ•°æ®ä»“åº“ï¼Œç”¨äºå­˜å‚¨å…±äº«æ•°æ®ã€‚è¿˜å¯ä»¥æ ¹æ®ä¸åŒçš„actionæ›´æ”¹ä»“åº“ä¸­çš„æ•°æ®</li></ul><p>ç¤ºä¾‹ï¼š</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> loginAction <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">loginId</span><span class="token operator">:</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loginPwd</span><span class="token operator">:</span><span class="token string">&quot;123123&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> deleteAction <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;delete&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token number">1</span>  <span class="token comment">// ç”¨æˆ·idä¸º1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="redux-1" tabindex="-1"><a class="header-anchor" href="#redux-1" aria-hidden="true">#</a> Redux</h3><p>åœ¨FluxåŸºç¡€ä¸Šï¼Œå¼•å…¥äº†reducerçš„æ¦‚å¿µ reducerï¼šå¤„ç†å™¨ï¼Œç”¨äºæ ¹æ®actionæ¥å¤„ç†æ•°æ®ï¼Œå¤„ç†åçš„æ•°æ®ä¼šè¢«ä»“åº“é‡æ–°ä¿å­˜ <img src="`+R+`" alt="image.png"></p><h2 id="action" tabindex="-1"><a class="header-anchor" href="#action" aria-hidden="true">#</a> Action</h2><ul><li>actionæ˜¯ä¸€ä¸ªplain-objectï¼ˆå¹³é¢å¯¹è±¡ï¼‰ <ul><li>å®ƒçš„__proto__æŒ‡å‘Object.prototype</li></ul></li><li>é€šå¸¸ï¼Œä½¿ç”¨payloadå±æ€§è¡¨ç¤ºé™„åŠ æ•°æ®ï¼ˆæ²¡æœ‰å¼ºåˆ¶è¦æ±‚ï¼‰</li><li>actionä¸­å¿…é¡»æœ‰typeå±æ€§ï¼Œè¯¥å±æ€§ç”¨äºæè¿°æ“ä½œçš„ç±»å‹ <ul><li>ä½†æ˜¯ï¼Œæ²¡æœ‰å¯¹typeçš„ç±»å‹åšå‡ºè¦æ±‚</li></ul></li><li>åœ¨å¤§å‹é¡¹ç›®ï¼Œç”±äºæ“ä½œç±»å‹éå¸¸å¤šï¼Œä¸ºäº†é¿å…ç¡¬ç¼–ç ï¼ˆhard codeï¼‰ï¼Œä¼šå°†actionçš„ç±»å‹å­˜æ”¾åˆ°ä¸€ä¸ªæˆ–ä¸€äº›å•ç‹¬çš„æ–‡ä»¶ä¸­(æ ·æ¿ä»£ç )ã€‚</li><li>ä¸ºäº†æ–¹é¢ä¼ é€’actionï¼Œé€šå¸¸ä¼šä½¿ç”¨actionåˆ›å»ºå‡½æ•°(action creator)æ¥åˆ›å»ºaction <ul><li>actionåˆ›å»ºå‡½æ•°åº”ä¸ºæ— å‰¯ä½œç”¨çš„çº¯å‡½æ•° <ul><li>ä¸èƒ½ä»¥ä»»ä½•å½¢å¼æ”¹åŠ¨å‚æ•°</li><li>ä¸å¯ä»¥æœ‰å¼‚æ­¥</li><li>ä¸å¯ä»¥å¯¹å¤–éƒ¨ç¯å¢ƒä¸­çš„æ•°æ®é€ æˆå½±å“</li></ul></li></ul></li><li>ä¸ºäº†æ–¹ä¾¿åˆ©ç”¨actionåˆ›å»ºå‡½æ•°æ¥åˆ†å‘ï¼ˆè§¦å‘ï¼‰actionï¼Œreduxæä¾›äº†ä¸€ä¸ªå‡½æ•°bindActionCreatorsï¼Œè¯¥å‡½æ•°ç”¨äºå¢å¼ºactionåˆ›å»ºå‡½æ•°çš„åŠŸèƒ½ï¼Œä½¿å®ƒä¸ä»…å¯ä»¥åˆ›å»ºactionï¼Œå¹¶ä¸”åˆ›å»ºåä¼šè‡ªåŠ¨å®Œæˆåˆ†å‘ã€‚</li></ul><h2 id="reducer" tabindex="-1"><a class="header-anchor" href="#reducer" aria-hidden="true">#</a> Reducer</h2><p>Reduceræ˜¯ç”¨äºæ”¹å˜æ•°æ®çš„å‡½æ•°</p><ul><li>ä¸€ä¸ªæ•°æ®ä»“åº“ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªreducerï¼Œå¹¶ä¸”é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå·¥ç¨‹åªæœ‰ä¸€ä¸ªä»“åº“ï¼Œå› æ­¤ï¼Œä¸€ä¸ªç³»ç»Ÿï¼Œåªæœ‰ä¸€ä¸ªreducer</li><li>ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œé€šå¸¸ä¼šå°†reduceræ”¾åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚</li><li>reducerè¢«è°ƒç”¨çš„æ—¶æœº <ul><li>é€šè¿‡store.dispatchï¼Œåˆ†å‘äº†ä¸€ä¸ªactionï¼Œæ­¤æ—¶ï¼Œä¼šè°ƒç”¨reducer</li><li>å½“åˆ›å»ºä¸€ä¸ªstoreçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ä¸€æ¬¡reducer <ul><li>å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œç”¨reduceråˆå§‹åŒ–çŠ¶æ€</li><li>åˆ›å»ºä»“åº“æ—¶ï¼Œä¸ä¼ é€’ä»»ä½•é»˜è®¤çŠ¶æ€</li><li>å°†reducerçš„å‚æ•°stateè®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼</li></ul></li></ul></li><li>reducerå†…éƒ¨é€šå¸¸ä½¿ç”¨switchæ¥åˆ¤æ–­typeå€¼</li><li><strong>reducerå¿…é¡»æ˜¯ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„çº¯å‡½æ•°</strong><ul><li>ä¸ºä»€ä¹ˆéœ€è¦çº¯å‡½æ•° <ul><li>çº¯å‡½æ•°æœ‰åˆ©äºæµ‹è¯•å’Œè°ƒå¼</li><li>æœ‰åˆ©äºè¿˜åŸæ•°æ®</li><li>æœ‰åˆ©äºå°†æ¥å’Œreactç»“åˆæ—¶çš„ä¼˜åŒ–</li></ul></li><li>å…·ä½“è¦æ±‚ <ul><li>ä¸èƒ½æ”¹å˜å‚æ•°ï¼Œå› æ­¤è‹¥è¦è®©çŠ¶æ€å˜åŒ–ï¼Œå¿…é¡»å¾—åˆ°ä¸€ä¸ªæ–°çš„çŠ¶æ€</li><li>ä¸èƒ½æœ‰å¼‚æ­¥</li><li>ä¸èƒ½å¯¹å¤–éƒ¨ç¯å¢ƒé€ æˆå½±å“</li></ul></li></ul></li><li>ç”±äºåœ¨å¤§ä¸­å‹é¡¹ç›®ä¸­ï¼Œæ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œæ•°æ®ç»“æ„ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œå› æ­¤ï¼Œéœ€è¦å¯¹reducerè¿›è¡Œç»†åˆ†ã€‚ <ul><li>reduxæä¾›äº†æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´åŠ æ–¹ä¾¿çš„åˆå¹¶reducer</li><li>combineReducers: åˆå¹¶reducerï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„reducerï¼Œè¯¥æ–°çš„reducerç®¡ç†ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå±æ€§äº¤ç»™å¯¹åº”çš„reducerç®¡ç†ã€‚</li></ul></li></ul><h2 id="store" tabindex="-1"><a class="header-anchor" href="#store" aria-hidden="true">#</a> Store</h2><p>Storeï¼šç”¨äºä¿å­˜æ•°æ® é€šè¿‡createStoreæ–¹æ³•åˆ›å»ºçš„å¯¹è±¡ã€‚ è¯¥å¯¹è±¡çš„æˆå‘˜ï¼š</p><ul><li>dispatchï¼šåˆ†å‘ä¸€ä¸ªaction</li><li>getStateï¼šå¾—åˆ°ä»“åº“ä¸­å½“å‰çš„çŠ¶æ€</li><li>replaceReducerï¼šæ›¿æ¢æ‰å½“å‰çš„reducer</li><li>subscribeï¼šæ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨æ˜¯ä¸€ä¸ªæ— å‚å‡½æ•°ï¼Œè¯¥åˆ†å‘ä¸€ä¸ªactionä¹‹åï¼Œä¼šè¿è¡Œæ³¨å†Œçš„ç›‘å¬å™¨ã€‚è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå–æ¶ˆç›‘å¬</li></ul><h2 id="æ‰‹å†™createstore" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™createstore" aria-hidden="true">#</a> æ‰‹å†™createStore</h2><p>è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼š</p><ul><li>dispatchï¼šåˆ†å‘ä¸€ä¸ªaction</li><li>getStateï¼šå¾—åˆ°ä»“åº“ä¸­å½“å‰çš„çŠ¶æ€</li><li>subscribeï¼šæ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨æ˜¯ä¸€ä¸ªæ— å‚å‡½æ•°ï¼Œè¯¥åˆ†å‘ä¸€ä¸ªactionä¹‹åï¼Œä¼šè¿è¡Œæ³¨å†Œçš„ç›‘å¬å™¨ã€‚è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå–æ¶ˆç›‘å¬</li></ul><h2 id="æ‰‹å†™bindactioncreators" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™bindactioncreators" aria-hidden="true">#</a> æ‰‹å†™bindActionCreators</h2><h2 id="æ‰‹å†™combinereducers" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™combinereducers" aria-hidden="true">#</a> æ‰‹å†™combineReducers</h2><p>ç»„è£…reducersï¼Œè¿”å›ä¸€ä¸ªreducerï¼Œæ•°æ®ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡è¡¨ç¤ºï¼Œå¯¹è±¡çš„å±æ€§åä¸ä¼ é€’çš„å‚æ•°å¯¹è±¡ä¿æŒä¸€è‡´</p><h2 id="reduxä¸­é—´ä»¶-middleware" tabindex="-1"><a class="header-anchor" href="#reduxä¸­é—´ä»¶-middleware" aria-hidden="true">#</a> Reduxä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰</h2><p>ä¸­é—´ä»¶ï¼šç±»ä¼¼äºæ’ä»¶ï¼Œå¯ä»¥åœ¨ä¸å½±å“åŸæœ¬åŠŸèƒ½ã€å¹¶ä¸”ä¸æ”¹åŠ¨åŸæœ¬ä»£ç çš„åŸºç¡€ä¸Šï¼Œå¯¹å…¶åŠŸèƒ½è¿›è¡Œå¢å¼ºã€‚åœ¨Reduxä¸­ï¼Œä¸­é—´ä»¶ä¸»è¦ç”¨äºå¢å¼ºdispatchå‡½æ•°ã€‚ å®ç°Reduxä¸­é—´ä»¶çš„åŸºæœ¬åŸç†ï¼Œæ˜¯æ›´æ”¹ä»“åº“ä¸­çš„dispatchå‡½æ•°ã€‚ Reduxä¸­é—´ä»¶ä¹¦å†™ï¼š</p><ul><li>ä¸­é—´ä»¶æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªstoreå‚æ•°ï¼Œè¡¨ç¤ºåˆ›å»ºçš„ä»“åº“ï¼Œè¯¥ä»“åº“å¹¶éä¸€ä¸ªå®Œæ•´çš„ä»“åº“å¯¹è±¡ï¼Œä»…åŒ…å«getStateï¼Œdispatchã€‚è¯¥å‡½æ•°è¿è¡Œçš„æ—¶é—´ï¼Œæ˜¯åœ¨ä»“åº“åˆ›å»ºä¹‹åè¿è¡Œã€‚ <ul><li>ç”±äºåˆ›å»ºä»“åº“åéœ€è¦è‡ªåŠ¨è¿è¡Œè®¾ç½®çš„ä¸­é—´ä»¶å‡½æ•°ï¼Œå› æ­¤ï¼Œéœ€è¦åœ¨åˆ›å»ºä»“åº“æ—¶ï¼Œå‘Šè¯‰ä»“åº“æœ‰å“ªäº›ä¸­é—´ä»¶</li><li>éœ€è¦è°ƒç”¨applyMiddlewareå‡½æ•°ï¼Œå°†å‡½æ•°çš„è¿”å›ç»“æœä½œä¸ºcreateStoreçš„ç¬¬äºŒæˆ–ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚</li></ul></li><li>ä¸­é—´ä»¶å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªdispatchåˆ›å»ºå‡½æ•°</li><li>applyMiddlewareå‡½æ•°ï¼Œç”¨äºè®°å½•æœ‰å“ªäº›ä¸­é—´ä»¶ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå‡½æ•° <ul><li>è¯¥å‡½æ•°ç”¨äºè®°å½•åˆ›å»ºä»“åº“çš„æ–¹æ³•ï¼Œç„¶ååˆè¿”å›ä¸€ä¸ªå‡½æ•°</li></ul></li></ul><h2 id="æ‰‹å†™applymiddleware" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™applymiddleware" aria-hidden="true">#</a> æ‰‹å†™applyMiddleware</h2><p>middlewareçš„æœ¬è´¨ï¼Œæ˜¯ä¸€ä¸ªè°ƒç”¨åå¯ä»¥å¾—åˆ°dispatchåˆ›å»ºå‡½æ•°çš„å‡½æ•° composeï¼šå‡½æ•°ç»„åˆï¼Œå°†ä¸€ä¸ªæ•°ç»„ä¸­çš„å‡½æ•°è¿›è¡Œç»„åˆï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°è°ƒç”¨æ—¶ï¼Œå®é™…ä¸Šæ˜¯åå‘è°ƒç”¨ä¹‹å‰ç»„åˆçš„å‡½æ•°</p><h2 id="åˆ©ç”¨ä¸­é—´ä»¶è¿›è¡Œå‰¯ä½œç”¨å¤„ç†" tabindex="-1"><a class="header-anchor" href="#åˆ©ç”¨ä¸­é—´ä»¶è¿›è¡Œå‰¯ä½œç”¨å¤„ç†" aria-hidden="true">#</a> åˆ©ç”¨ä¸­é—´ä»¶è¿›è¡Œå‰¯ä½œç”¨å¤„ç†</h2><ul><li>redux-thunk</li></ul><p>thunkå…è®¸actionæ˜¯ä¸€ä¸ªå¸¦æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œå½“actionæ˜¯ä¸€ä¸ªå‡½æ•°è¢«åˆ†å‘æ—¶ï¼Œthunkä¼šé˜»æ­¢actionç»§ç»­å‘åç§»äº¤ã€‚ thunkä¼šå‘å‡½æ•°ä¸­ä¼ é€’ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li>dispatchï¼šæ¥è‡ªäºstore.dispatch</li><li>getStateï¼šæ¥è‡ªäºstore.getState</li><li>extraï¼šæ¥è‡ªäºç”¨æˆ·è®¾ç½®çš„é¢å¤–å‚æ•°</li><li>redux-promise</li><li>redux-saga</li></ul><h2 id="ç”¨-reudx-thunk-ç®¡ç†å­¦ç”Ÿæ•°æ®" tabindex="-1"><a class="header-anchor" href="#ç”¨-reudx-thunk-ç®¡ç†å­¦ç”Ÿæ•°æ®" aria-hidden="true">#</a> ç”¨ Reudx + thunk ç®¡ç†å­¦ç”Ÿæ•°æ®</h2><p>éœ€æ±‚ï¼šæ ¹æ®å…³é”®å­—ã€æ€§åˆ«ã€åˆ†é¡µä¿¡æ¯æŸ¥è¯¢å­¦ç”Ÿ <strong>æŸ¥è¯¢æ¡ä»¶</strong></p><ul><li>å…³é”®å­—ï¼šå­—ç¬¦ä¸²ï¼Œå¯ä¸ºç©ºå­—ç¬¦ä¸²</li><li>æ€§åˆ«ï¼š1ã€0ã€-1ï¼Œåˆ†åˆ«è¡¨ç¤ºæŸ¥è¯¢å¥³ã€ç”·ã€ä¸é™</li><li>å½“å‰é¡µç </li><li>é¡µå®¹é‡</li></ul><p><strong>æŸ¥è¯¢ç»“æœ</strong></p><ul><li>å­¦ç”Ÿæ•°ç»„</li><li>å­¦ç”Ÿæ€»æ•°</li><li>æŸ¥è¯¢çŠ¶æ€ï¼šæ˜¯å¦æ­£åœ¨æŸ¥è¯¢ä¸­</li></ul><h2 id="redux-promise" tabindex="-1"><a class="header-anchor" href="#redux-promise" aria-hidden="true">#</a> redux-promise</h2><p>å¦‚æœactionæ˜¯ä¸€ä¸ªpromiseï¼Œåˆ™ä¼šç­‰å¾…promiseå®Œæˆï¼Œå°†å®Œæˆçš„ç»“æœä½œä¸ºactionè§¦å‘ï¼Œå¦‚æœactionä¸æ˜¯ä¸€ä¸ªpromiseï¼Œåˆ™åˆ¤æ–­å…¶payloadæ˜¯å¦æ˜¯ä¸€ä¸ªpromiseï¼Œå¦‚æœæ˜¯ï¼Œç­‰å¾…promiseå®Œæˆï¼Œç„¶åå°†å¾—åˆ°çš„ç»“æœä½œä¸ºpayloadçš„å€¼è§¦å‘ã€‚</p><h2 id="è¿­ä»£å™¨å’Œå¯è¿­ä»£åè®®" tabindex="-1"><a class="header-anchor" href="#è¿­ä»£å™¨å’Œå¯è¿­ä»£åè®®" aria-hidden="true">#</a> è¿­ä»£å™¨å’Œå¯è¿­ä»£åè®®</h2><ul><li>è§£å†³å‰¯ä½œç”¨çš„ redux ä¸­é—´ä»¶ <ul><li>redux-thunkï¼šéœ€è¦æ”¹åŠ¨actionï¼Œå¯æ¥æ”¶actionæ˜¯ä¸€ä¸ªå‡½æ•°</li><li>redux-promiseï¼šéœ€è¦æ”¹åŠ¨actionï¼Œå¯æ¥æ”¶actionï¼Œæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼›æˆ–actionçš„payloadï¼Œæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡</li></ul></li><li>ä»¥ä¸Šä¸¤ä¸ªä¸­é—´ä»¶ï¼Œä¼šå¯¼è‡´actionæˆ–actionåˆ›å»ºå‡½æ•°ä¸å†çº¯å‡€</li><li>redux-sagaå°†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œå®ƒä¸ä»…å¯ä»¥ä¿æŒactionã€actionåˆ›å»ºå‡½æ•°ã€reducerçš„çº¯å‡€ï¼Œè€Œä¸”å¯ä»¥ç”¨æ¨¡å—åŒ–çš„æ–¹å¼è§£å†³å‰¯ä½œç”¨ï¼Œå¹¶ä¸”åŠŸèƒ½éå¸¸å¼ºå¤§</li><li>redux-sagaæ˜¯å»ºç«‹åœ¨ES6çš„ç”Ÿæˆå™¨åŸºç¡€ä¸Šçš„ï¼Œè¦ç†Ÿç»ƒçš„ä½¿ç”¨sagaï¼Œå¿…é¡»ç†è§£ç”Ÿæˆå™¨ï¼Œ è¦ç†è§£ç”Ÿæˆå™¨ï¼Œå¿…é¡»å…ˆç†è§£è¿­ä»£å™¨å’Œå¯è¿­ä»£åè®®ã€‚</li></ul><h3 id="è¿­ä»£" tabindex="-1"><a class="header-anchor" href="#è¿­ä»£" aria-hidden="true">#</a> è¿­ä»£</h3><p>ç±»ä¼¼äºéå† éå†ï¼šæœ‰å¤šä¸ªæ•°æ®ç»„æˆçš„é›†åˆæ•°æ®ç»“æ„ï¼ˆmapã€setã€arrayç­‰å…¶ä»–ç±»æ•°ç»„ï¼‰ï¼Œéœ€è¦ä»è¯¥ç»“æ„ä¸­ä¾æ¬¡å–å‡ºæ•°æ®è¿›è¡ŒæŸç§å¤„ç†ã€‚ è¿­ä»£ï¼šæŒ‰ç…§æŸç§é€»è¾‘ï¼Œä¾æ¬¡å–å‡ºä¸‹ä¸€ä¸ªæ•°æ®è¿›è¡Œå¤„ç†</p><h3 id="è¿­ä»£å™¨-iterator" tabindex="-1"><a class="header-anchor" href="#è¿­ä»£å™¨-iterator" aria-hidden="true">#</a> è¿­ä»£å™¨ iterator</h3><p>JSè¯­è¨€è§„å®šï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡å…·æœ‰nextæ–¹æ³•ï¼Œå¹¶ä¸”nextæ–¹æ³•æ»¡è¶³ä¸€å®šçš„çº¦æŸï¼Œåˆ™è¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆiteratorï¼‰ã€‚ nextæ–¹æ³•çš„çº¦æŸï¼šè¯¥æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è‡³å°‘å…·æœ‰ä¸¤ä¸ªå±æ€§ï¼š</p><ul><li>valueï¼šanyç±»å‹ï¼Œä¸‹ä¸€ä¸ªæ•°æ®çš„å€¼ï¼Œå¦‚æœdoneå±æ€§ä¸ºtrueï¼Œé€šå¸¸ï¼Œä¼šå°†valueè®¾ç½®ä¸ºundefined</li><li>doneï¼šboolç±»å‹ï¼Œæ˜¯å¦å·²ç»è¿­ä»£å®Œæˆ</li></ul><p>é€šè¿‡è¿­ä»£å™¨çš„nextæ–¹æ³•ï¼Œå¯ä»¥ä¾æ¬¡å–å‡ºæ•°æ®ï¼Œå¹¶å¯ä»¥æ ¹æ®è¿”å›çš„doneå±æ€§ï¼Œåˆ¤å®šæ˜¯å¦è¿­ä»£ç»“æŸã€‚</p><h4 id="è¿­ä»£å™¨åˆ›å»ºå‡½æ•°-iterator-creator" tabindex="-1"><a class="header-anchor" href="#è¿­ä»£å™¨åˆ›å»ºå‡½æ•°-iterator-creator" aria-hidden="true">#</a> è¿­ä»£å™¨åˆ›å»ºå‡½æ•° iterator creator</h4><p>å®ƒæ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°åï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œåˆ™è¯¥å‡½æ•°ç§°ä¹‹ä¸ºè¿­ä»£å™¨åˆ›å»ºå‡½æ•°ï¼Œå¯ä»¥ç®€ç§°ä½è¿­ä»£å™¨å‡½æ•°ã€‚</p><h3 id="å¯è¿­ä»£åè®®" tabindex="-1"><a class="header-anchor" href="#å¯è¿­ä»£åè®®" aria-hidden="true">#</a> å¯è¿­ä»£åè®®</h3><p>ES6ä¸­å‡ºç°äº†for-ofå¾ªç¯ï¼Œè¯¥å¾ªç¯å°±æ˜¯ç”¨äºè¿­ä»£æŸä¸ªå¯¹è±¡çš„ï¼Œå› æ­¤ï¼Œfor-ofå¾ªç¯è¦æ±‚å¯¹è±¡å¿…é¡»æ˜¯å¯è¿­ä»£çš„ï¼ˆå¯¹è±¡å¿…é¡»æ»¡è¶³å¯è¿­ä»£åè®®ï¼‰ å¯è¿­ä»£åè®®æ˜¯ç”¨äºçº¦æŸä¸€ä¸ªå¯¹è±¡çš„ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ»¡è¶³ä¸‹é¢çš„è§„èŒƒï¼Œåˆ™è¯¥å¯¹è±¡æ»¡è¶³å¯è¿­ä»£åè®®ï¼Œä¹Ÿç§°ä¹‹ä¸ºè¯¥å¯¹è±¡æ˜¯å¯ä»¥è¢«è¿­ä»£çš„ã€‚ å¯è¿­ä»£åè®®çš„çº¦æŸå¦‚ä¸‹ï¼š</p><ol><li>å¯¹è±¡å¿…é¡»æœ‰ä¸€ä¸ªçŸ¥åç¬¦å·å±æ€§ï¼ˆSymbol.iteratorï¼‰</li><li>è¯¥å±æ€§å¿…é¡»æ˜¯ä¸€ä¸ªæ— å‚çš„è¿­ä»£å™¨åˆ›å»ºå‡½æ•°</li></ol><h3 id="for-ofå¾ªç¯çš„åŸç†" tabindex="-1"><a class="header-anchor" href="#for-ofå¾ªç¯çš„åŸç†" aria-hidden="true">#</a> for-ofå¾ªç¯çš„åŸç†</h3><p>è°ƒç”¨å¯¹è±¡çš„[Symbol.iterator]æ–¹æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨ã€‚ä¸æ–­è°ƒç”¨nextæ–¹æ³•ï¼Œåªæœ‰è¿”å›çš„doneä¸ºfalseï¼Œåˆ™å°†è¿”å›çš„valueä¼ é€’ç»™å˜é‡ï¼Œç„¶åè¿›å…¥å¾ªç¯ä½“æ‰§è¡Œä¸€æ¬¡ã€‚</p><h2 id="ç”Ÿæˆå™¨-generator" tabindex="-1"><a class="header-anchor" href="#ç”Ÿæˆå™¨-generator" aria-hidden="true">#</a> ç”Ÿæˆå™¨ generator</h2><h3 id="generator" tabindex="-1"><a class="header-anchor" href="#generator" aria-hidden="true">#</a> generator</h3><p>ç”Ÿæˆå™¨ï¼šç”±æ„é€ å‡½æ•°Generatoråˆ›å»ºçš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ—¢æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒåŒæ—¶ï¼Œåˆæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆæ»¡è¶³å¯è¿­ä»£åè®®çš„å¯¹è±¡ï¼‰</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//ä¼ªä»£ç </span>
<span class="token keyword">var</span> generator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®ƒå…·æœ‰nextæ–¹æ³•</span>
<span class="token keyword">var</span> iterator <span class="token operator">=</span> generator<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> generator<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// ç”±äºå®ƒæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä½¿ç”¨for ofå¾ªç¯</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„ï¼šGeneratoræ„é€ å‡½æ•°ï¼Œä¸æä¾›ç»™å¼€å‘è€…ä½¿ç”¨ï¼Œä»…ä½œä¸ºJSå¼•æ“å†…éƒ¨ä½¿ç”¨</strong></p><h3 id="generator-function" tabindex="-1"><a class="header-anchor" href="#generator-function" aria-hidden="true">#</a> generator function</h3><p>ç”Ÿæˆå™¨å‡½æ•°ï¼ˆç”Ÿæˆå™¨åˆ›å»ºå‡½æ•°ï¼‰ï¼šè¯¥å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨ã€‚ ES6æ–°å¢äº†ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œå«åšç”Ÿæˆå™¨å‡½æ•°ï¼Œåªè¦åœ¨å‡½æ•°åä¸functionå…³é”®å­—ä¹‹é—´åŠ ä¸Šä¸€ä¸ª*å·ï¼Œåˆ™è¯¥å‡½æ•°ä¼šè‡ªåŠ¨è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ ç”Ÿæˆå™¨å‡½æ•°çš„ç‰¹ç‚¹ï¼š</p><ul><li>è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œä¼šè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œè€Œä¸æ˜¯æ‰§è¡Œå‡½æ•°ä½“ï¼ˆå› ä¸ºï¼Œç”Ÿæˆå™¨å‡½æ•°çš„å‡½æ•°ä½“æ‰§è¡Œï¼Œæ”¶åˆ°ç”Ÿæˆå™¨æ§åˆ¶ï¼‰</li><li>æ¯å½“è°ƒç”¨äº†ç”Ÿæˆå™¨çš„nextæ–¹æ³•ï¼Œç”Ÿæˆå™¨çš„å‡½æ•°ä½“ä¼šä»ä¸Šä¸€æ¬¡yieldçš„ä½ç½®ï¼ˆæˆ–å¼€å§‹ä½ç½®ï¼‰è¿è¡Œåˆ°ä¸‹ä¸€ä¸ªyield <ul><li>yieldå…³é”®å­—åªèƒ½åœ¨ç”Ÿæˆå™¨å†…éƒ¨ä½¿ç”¨ï¼Œä¸å¯ä»¥åœ¨æ™®é€šå‡½æ•°å†…éƒ¨ä½¿ç”¨</li><li>å®ƒè¡¨ç¤ºæš‚åœï¼Œå¹¶è¿”å›ä¸€ä¸ªå½“å‰è¿­ä»£çš„æ•°æ®</li><li>å¦‚æœæ²¡æœ‰ä¸‹ä¸€ä¸ªyieldï¼Œåˆ°äº†å‡½æ•°ç»“æŸï¼Œåˆ™ç”Ÿæˆå™¨çš„nextæ–¹æ³•å¾—åˆ°çš„ç»“æœä¸­çš„doneä¸ºtrue</li></ul></li><li>yieldå…³é”®å­—åé¢çš„è¡¨è¾¾å¼è¿”å›çš„æ•°æ®ï¼Œä¼šä½œä¸ºå½“å‰è¿­ä»£çš„æ•°æ®</li><li>ç”Ÿæˆå™¨å‡½æ•°çš„è¿”å›å€¼ï¼Œä¼šä½œä¸ºè¿­ä»£ç»“æŸæ—¶çš„value <ul><li>ä½†æ˜¯ï¼Œå¦‚æœåœ¨ç»“æŸè¿‡åï¼Œä»ç„¶åå¤è°ƒç”¨nextï¼Œåˆ™valueä¸ºundefined</li></ul></li><li>ç”Ÿæˆå™¨è°ƒç”¨nextçš„æ—¶å€™ï¼Œå¯ä»¥ä¼ é€’å‚æ•°ï¼Œè¯¥å‚æ•°ä¼šä½œä¸ºç”Ÿæˆå™¨å‡½æ•°ä½“ä¸Šä¸€æ¬¡yieldè¡¨è¾¾å¼çš„å€¼ã€‚ <ul><li>ç”Ÿæˆå™¨ç¬¬ä¸€æ¬¡è°ƒç”¨nextå‡½æ•°æ—¶ï¼Œä¼ é€’å‚æ•°æ²¡æœ‰ä»»ä½•æ„ä¹‰</li></ul></li><li>ç”Ÿæˆå™¨å¸¦æœ‰ä¸€ä¸ªthrowæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸nextçš„æ•ˆæœç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºï¼š <ul><li>nextæ–¹æ³•ä¼ é€’çš„å‚æ•°ä¼šè¢«è¿”å›æˆä¸€ä¸ªæ­£å¸¸å€¼</li><li>throwæ–¹æ³•ä¼ é€’çš„å‚æ•°æ˜¯ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œä¼šå¯¼è‡´ç”Ÿæˆå™¨å‡½æ•°å†…éƒ¨å‘ç”Ÿä¸€ä¸ªé”™è¯¯ã€‚</li></ul></li><li>ç”Ÿæˆå™¨å¸¦æœ‰ä¸€ä¸ªreturnæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šç›´æ¥ç»“æŸç”Ÿæˆå™¨å‡½æ•°</li><li>è‹¥éœ€è¦åœ¨ç”Ÿæˆå™¨å†…éƒ¨è°ƒç”¨å…¶ä»–ç”Ÿæˆå™¨ï¼Œæ³¨æ„ï¼šå¦‚æœç›´æ¥è°ƒç”¨ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¦‚æœåŠ å…¥<em>å·è°ƒç”¨ï¼Œåˆ™è¿›å…¥å…¶ç”Ÿæˆå™¨å†…éƒ¨æ‰§è¡Œã€‚å¦‚æœæ˜¯yield</em> å‡½æ•°()è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œåˆ™è¯¥å‡½æ•°çš„è¿”å›ç»“æœï¼Œä¸ºè¯¥è¡¨è¾¾å¼çš„ç»“æœ</li></ul><h2 id="redux-saga" tabindex="-1"><a class="header-anchor" href="#redux-saga" aria-hidden="true">#</a> redux-saga</h2>`,72),xn={href:"https://gitee.com/link?target=https%3A%2F%2Fredux-saga-in-chinese.js.org%2F",target:"_blank",rel:"noopener noreferrer"},wn=p('<ul><li>çº¯å‡€</li><li>å¼ºå¤§</li><li>çµæ´»</li></ul><p><img src="'+j+'" alt="image.png"> åœ¨sagaä»»åŠ¡ä¸­ï¼Œå¦‚æœyieldäº†ä¸€ä¸ªæ™®é€šæ•°æ®ï¼Œsagaä¸ä½œä»»ä½•å¤„ç†ï¼Œä»…ä»…å°†æ•°æ®ä¼ é€’ç»™yieldè¡¨è¾¾å¼ï¼ˆæŠŠå¾—åˆ°çš„æ•°æ®æ”¾åˆ°nextçš„å‚æ•°ä¸­ï¼‰ï¼Œå› æ­¤ï¼Œåœ¨sagaä¸­ï¼Œyieldä¸€ä¸ªæ™®é€šæ•°æ®æ²¡ä»€ä¹ˆæ„ä¹‰ã€‚ sagaéœ€è¦ä½ åœ¨yieldåé¢æ”¾ä¸Šä¸€äº›åˆé€‚çš„sagaæŒ‡ä»¤ï¼ˆsaga effectsï¼‰ï¼Œå¦‚æœæ”¾çš„æ˜¯æŒ‡ä»¤ï¼Œsagaä¸­é—´ä»¶ä¼šæ ¹æ®ä¸åŒçš„æŒ‡ä»¤è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œä»¥æ§åˆ¶æ•´ä¸ªä»»åŠ¡çš„æµç¨‹ã€‚ æ¯ä¸ªæŒ‡ä»¤æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è°ƒç”¨åï¼Œä¼šè¿”å›ä¸€ä¸ªæŒ‡ä»¤å¯¹è±¡ï¼Œsagaä¼šæ¥æ”¶åˆ°è¯¥æŒ‡ä»¤å¯¹è±¡ï¼Œè¿›è¡Œå„ç§å¤„ç†ã€‚ <strong>ä¸€æ—¦sagaä»»åŠ¡å®Œæˆï¼ˆç”Ÿæˆå™¨å‡½æ•°è¿è¡Œå®Œæˆï¼‰ï¼Œåˆ™sagaä¸­é—´ä»¶ä¸€å®šç»“æŸ</strong></p><ul><li>takeæŒ‡ä»¤ï¼šã€é˜»å¡ã€‘ç›‘å¬æŸä¸ªactionï¼Œå¦‚æœactionå‘ç”Ÿäº†ï¼Œåˆ™ä¼šè¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†ï¼ŒtakeæŒ‡ä»¤ä»…ç›‘å¬ä¸€æ¬¡ã€‚yieldå¾—åˆ°çš„æ˜¯å®Œæ•´çš„actionå¯¹è±¡</li><li>allæŒ‡ä»¤ï¼šã€é˜»å¡ã€‘è¯¥å‡½æ•°ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ”¾å…¥ç”Ÿæˆå™¨ï¼Œsagaä¼šç­‰å¾…æ‰€æœ‰çš„ç”Ÿæˆå™¨å…¨éƒ¨å®Œæˆåæ‰ä¼šè¿›ä¸€æ­¥å¤„ç†</li><li>takeEveryæŒ‡ä»¤ï¼šä¸æ–­çš„ç›‘å¬æŸä¸ªactionï¼Œå½“æŸä¸ªactionåˆ°è¾¾ä¹‹åï¼Œè¿è¡Œä¸€ä¸ªå‡½æ•°ã€‚takeEveryæ°¸è¿œä¸ä¼šç»“æŸå½“å‰çš„ç”Ÿæˆå™¨</li><li>delayæŒ‡ä»¤ï¼šã€é˜»å¡ã€‘é˜»å¡æŒ‡å®šçš„æ¯«ç§’æ•°</li><li>putæŒ‡ä»¤ï¼šç”¨äºé‡æ–°è§¦å‘actionï¼Œç›¸å½“äºdispatchä¸€ä¸ªaction</li><li>callæŒ‡ä»¤ï¼šã€å¯èƒ½é˜»å¡ã€‘ç”¨äºå‰¯ä½œç”¨ï¼ˆé€šå¸¸æ˜¯å¼‚æ­¥ï¼‰å‡½æ•°è°ƒç”¨</li><li>applyæŒ‡ä»¤ï¼šã€å¯èƒ½é˜»å¡ã€‘ç”¨äºå‰¯ä½œç”¨ï¼ˆé€šå¸¸æ˜¯å¼‚æ­¥ï¼‰å‡½æ•°è°ƒç”¨</li><li>selectæŒ‡ä»¤ï¼šç”¨äºå¾—åˆ°å½“å‰ä»“åº“ä¸­çš„æ•°æ®</li><li>cpsæŒ‡ä»¤ï¼šã€å¯èƒ½é˜»å¡ã€‘ç”¨äºè°ƒç”¨é‚£äº›ä¼ ç»Ÿçš„å›è°ƒæ–¹å¼çš„å¼‚æ­¥å‡½æ•°</li><li>forkï¼šç”¨äºå¼€å¯ä¸€ä¸ªæ–°çš„ä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡ä¸ä¼šé˜»å¡ï¼Œè¯¥å‡½æ•°éœ€è¦ä¼ é€’ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œforkè¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œç±»å‹ä¸ºTask</li><li>cancelï¼šç”¨äºå–æ¶ˆä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡ï¼Œå®é™…ä¸Šï¼Œå–æ¶ˆçš„å®ç°åŸç†ï¼Œæ˜¯åˆ©ç”¨generator.returnã€‚cancelå¯ä»¥ä¸ä¼ é€’å‚æ•°ï¼Œå¦‚æœä¸ä¼ é€’å‚æ•°ï¼Œåˆ™å–æ¶ˆå½“å‰ä»»åŠ¡çº¿ã€‚</li><li>takeLastestï¼šåŠŸèƒ½å’ŒtakeEveryä¸€è‡´ï¼Œåªä¸è¿‡ï¼Œä¼šè‡ªåŠ¨å–æ¶ˆæ‰ä¹‹å‰å¼€å¯çš„ä»»åŠ¡</li><li>cancelledï¼šåˆ¤æ–­å½“å‰ä»»åŠ¡çº¿æ˜¯å¦è¢«å–æ¶ˆæ‰äº†</li><li>raceï¼šã€é˜»å¡ã€‘ç«èµ›ï¼Œå¯ä»¥ä¼ é€’å¤šä¸ªæŒ‡ä»¤ï¼Œå½“å…¶ä¸­ä»»ä½•ä¸€ä¸ªæŒ‡ä»¤ç»“æŸåï¼Œä¼šç›´æ¥ç»“æŸï¼Œä¸Promise.raceç±»ä¼¼ã€‚è¿”å›çš„ç»“æœï¼Œæ˜¯æœ€å…ˆå®Œæˆçš„æŒ‡ä»¤ç»“æœã€‚å¹¶ä¸”ï¼Œè¯¥å‡½æ•°ä¼šè‡ªåŠ¨å–æ¶ˆå…¶ä»–çš„ä»»åŠ¡</li></ul><h3 id="æ‰‹å†™saga" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™saga" aria-hidden="true">#</a> æ‰‹å†™saga</h3><p>sagaä¸­é—´ä»¶çš„åŸç†ï¼š</p><ol><li>é¦–å…ˆå¯åŠ¨ä¸€ä¸ªä»»åŠ¡</li><li>å½“actionè§¦å‘æ—¶ï¼Œç›´æ¥å°†actionåˆ†å‘åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</li></ol><p>æºç åˆ†æï¼š</p><ol><li>runSagaï¼šä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¯åŠ¨ä¸€ä¸ªä»»åŠ¡ï¼Œä¸€ä¸ªä»»åŠ¡çš„æœ¬è´¨æ˜¯ä¸€ä¸ªgenerator functionï¼ŒrunSagaåœ¨å†…éƒ¨å¾—åˆ°è¯¥å‡½æ•°çš„generatorï¼Œå¹¶æ§åˆ¶ç”Ÿæˆå™¨çš„æ¯ä¸€æ¬¡è¿­ä»£ã€‚</li></ol><h2 id="react-redux" tabindex="-1"><a class="header-anchor" href="#react-redux" aria-hidden="true">#</a> react-redux</h2><ul><li>React: ç»„ä»¶åŒ–çš„UIç•Œé¢å¤„ç†æ–¹æ¡ˆ</li><li>React-Router: æ ¹æ®åœ°å€åŒ¹é…è·¯ç”±ï¼Œæœ€ç»ˆæ¸²æŸ“ä¸åŒçš„ç»„ä»¶</li><li>Reduxï¼šå¤„ç†æ•°æ®ä»¥åŠæ•°æ®å˜åŒ–çš„æ–¹æ¡ˆï¼ˆä¸»è¦ç”¨äºå¤„ç†å…±äº«æ•°æ®ï¼‰</li></ul><p>å¦‚æœä¸€ä¸ªç»„ä»¶ï¼Œä»…ç”¨äºæ¸²æŸ“ä¸€ä¸ªUIç•Œé¢ï¼Œè€Œæ²¡æœ‰çŠ¶æ€ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼‰ï¼Œè¯¥ç»„ä»¶å«åš<strong>å±•ç¤ºç»„ä»¶</strong> å¦‚æœä¸€ä¸ªç»„ä»¶ï¼Œä»…ç”¨äºæä¾›æ•°æ®ï¼Œæ²¡æœ‰ä»»ä½•å±äºè‡ªå·±çš„UIç•Œé¢ï¼Œåˆ™è¯¥ç»„ä»¶å«åš<strong>å®¹å™¨ç»„ä»¶</strong>ï¼Œå®¹å™¨ç»„ä»¶çº¯ç²¹æ˜¯ä¸ºäº†ç»™å…¶ä»–ç»„ä»¶æä¾›æ•°æ®ã€‚ react-reduxåº“ï¼šé“¾æ¥reduxå’Œreact</p><ul><li>Providerç»„ä»¶ï¼šæ²¡æœ‰ä»»ä½•UIç•Œé¢ï¼Œè¯¥ç»„ä»¶çš„ä½œç”¨ï¼Œæ˜¯å°†reduxçš„ä»“åº“æ”¾åˆ°ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­ã€‚</li><li>connectï¼šé«˜é˜¶ç»„ä»¶ï¼Œç”¨äºé“¾æ¥ä»“åº“å’Œç»„ä»¶çš„ <ul><li>ç»†èŠ‚ä¸€ï¼šå¦‚æœå¯¹è¿”å›çš„å®¹å™¨ç»„ä»¶åŠ ä¸Šé¢å¤–çš„å±æ€§ï¼Œåˆ™è¿™äº›å±æ€§ä¼šç›´æ¥ä¼ é€’åˆ°å±•ç¤ºç»„ä»¶</li><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šmapStateToProps: <ul><li>å‚æ•°1ï¼šæ•´ä¸ªä»“åº“çš„çŠ¶æ€</li><li>å‚æ•°2ï¼šä½¿ç”¨è€…ä¼ é€’çš„å±æ€§å¯¹è±¡</li></ul></li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼š <ul><li>æƒ…å†µ1ï¼šä¼ é€’ä¸€ä¸ªå‡½æ•° mapDispatchToProps <ul><li>å‚æ•°1ï¼šdispatchå‡½æ•°</li><li>å‚æ•°2ï¼šä½¿ç”¨è€…ä¼ é€’çš„å±æ€§å¯¹è±¡</li><li>å‡½æ•°è¿”å›çš„å¯¹è±¡ä¼šä½œä¸ºå±æ€§ä¼ é€’åˆ°å±•ç¤ºç»„ä»¶ä¸­ï¼ˆä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°å­˜åœ¨ï¼‰</li></ul></li><li>æƒ…å†µ2ï¼šä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„æ¯ä¸ªå±æ€§æ˜¯ä¸€ä¸ªactionåˆ›å»ºå‡½æ•°ï¼Œå½“äº‹ä»¶è§¦å‘æ—¶ï¼Œä¼šè‡ªåŠ¨çš„dispatchå‡½æ•°è¿”å›çš„action</li></ul></li><li>ç»†èŠ‚äºŒï¼šå¦‚æœä¸ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œé€šè¿‡connectè¿æ¥çš„ç»„ä»¶ï¼Œä¼šè‡ªåŠ¨å¾—åˆ°ä¸€ä¸ªå±æ€§ï¼šdispatchï¼Œä½¿å¾—ç»„ä»¶æœ‰èƒ½åŠ›è‡ªè¡Œè§¦å‘actionï¼Œä½†æ˜¯ï¼Œä¸æ¨èè¿™æ ·åšã€‚</li></ul></li></ul><h3 id="react-redux-å…¶ä»–api" tabindex="-1"><a class="header-anchor" href="#react-redux-å…¶ä»–api" aria-hidden="true">#</a> react-redux å…¶ä»–api</h3>',13),Rn={href:"https://gitee.com/link?target=https%3A%2F%2Freact-redux.js.org%2Fapi",target:"_blank",rel:"noopener noreferrer"},jn=p('<h4 id="connect" tabindex="-1"><a class="header-anchor" href="#connect" aria-hidden="true">#</a> connect</h4><ul><li>mergeProps: ä¸€ä¸ªå‡½æ•° <ul><li>å‚æ•°1ï¼šstatePropsï¼Œè¯¥å‚æ•°çš„å€¼æ¥è‡ªäºmapStateToPropsè¿”å›çš„å€¼</li><li>å‚æ•°2ï¼šdispatchPropsï¼Œè¯¥å‚æ•°çš„å€¼æ¥è‡ªäºmapDispatchToPropsè¿”å›çš„å€¼</li><li>å‚æ•°3ï¼šownPropsï¼Œæ¥è‡ªäºç»„ä»¶ä½¿ç”¨è€…ä¼ é€’çš„å±æ€§</li><li>è¿”å›å€¼ï¼šä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„å±æ€§æœ€ç»ˆä¼šè¢«ä¼ é€’åˆ°åŒ…è£…çš„ç»„ä»¶ä¸­ã€‚</li></ul></li><li>optionsï¼šé…ç½®å¯¹è±¡</li></ul><h4 id="connectadvanced" tabindex="-1"><a class="header-anchor" href="#connectadvanced" aria-hidden="true">#</a> connectAdvanced</h4><p>è¯¥å‡½æ•°å’Œconnectä¸€æ ·ï¼Œä¹Ÿæ˜¯ç”¨äºè¿æ¥Reactç»„ä»¶å’ŒReduxä»“åº“çš„ï¼Œåªä¸è¿‡å®ƒçš„é…ç½®æ¯”connectå°‘ä¸€äº› è¯¥å‡½æ•°éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li>selectorFactory <ul><li>å‚æ•°1ï¼šdispatch</li><li>å‚æ•°2ï¼šfactoryOptionsï¼Œé…ç½®</li><li>è¿”å›ï¼šå‡½æ•° <ul><li>å‚æ•°1ï¼šstate</li><li>å‚æ•°2ï¼šownProps</li><li>è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼šè¯¥å¯¹è±¡çš„å±æ€§æœ€ç»ˆï¼Œä¼šæˆä¸ºåŒ…è£…çš„ç»„ä»¶çš„å±æ€§</li></ul></li></ul></li><li>connectOptions</li></ul><h4 id="createprovider" tabindex="-1"><a class="header-anchor" href="#createprovider" aria-hidden="true">#</a> createProvider</h4><p>createProvider(å­—ç¬¦ä¸²key)ï¼šé€šè¿‡ä¸€ä¸ªå”¯ä¸€çš„keyå€¼åˆ›å»ºä¸€ä¸ªProviderç»„ä»¶ã€‚ <code>**var** Provider1 = createProvider(&quot;p1&quot;); **var** Provider2 = createProvider(&quot;p2&quot;);</code></p><h2 id="redux-actions" tabindex="-1"><a class="header-anchor" href="#redux-actions" aria-hidden="true">#</a> redux-actions</h2>',8),qn={href:"https://gitee.com/link?target=https%3A%2F%2Fredux-actions.js.org%2F",target:"_blank",rel:"noopener noreferrer"},Cn=p('<h3 id="createaction-s" tabindex="-1"><a class="header-anchor" href="#createaction-s" aria-hidden="true">#</a> createAction(s)</h3><h4 id="createaction" tabindex="-1"><a class="header-anchor" href="#createaction" aria-hidden="true">#</a> createAction</h4><p>è¯¥å‡½æ•°ç”¨äºå¸®åŠ©ä½ åˆ›å»ºä¸€ä¸ªactionåˆ›å»ºå‡½æ•°ï¼ˆaction creatorï¼‰</p><h4 id="createactions" tabindex="-1"><a class="header-anchor" href="#createactions" aria-hidden="true">#</a> createActions</h4><p>è¯¥å‡½æ•°ç”¨äºå¸®åŠ©ä½ åˆ›å»ºå¤šä¸ªactionåˆ›å»ºå‡½æ•°</p><h3 id="handleaction-s" tabindex="-1"><a class="header-anchor" href="#handleaction-s" aria-hidden="true">#</a> handleAction(s)</h3><h4 id="handleaction" tabindex="-1"><a class="header-anchor" href="#handleaction" aria-hidden="true">#</a> handleAction</h4><p>ç®€åŒ–é’ˆå¯¹å•ä¸ªactionç±»å‹çš„reducerå¤„ç†ï¼Œå½“å®ƒåŒ¹é…åˆ°å¯¹åº”çš„actionç±»å‹åï¼Œä¼šæ‰§è¡Œå¯¹åº”çš„å‡½æ•°</p><h4 id="handleactions" tabindex="-1"><a class="header-anchor" href="#handleactions" aria-hidden="true">#</a> handleActions</h4><p>ç®€åŒ–é’ˆå¯¹å¤šä¸ªactionç±»å‹çš„reducreå¤„ç†</p><h3 id="combineactions" tabindex="-1"><a class="header-anchor" href="#combineactions" aria-hidden="true">#</a> combineActions</h3><p>é…åˆcreateActionså’ŒhandleActionsä¸¤ä¸ªå‡½æ•°ï¼Œç”¨äºå¤„ç†å¤šä¸ªaction-typeå¯¹åº”åŒä¸€ä¸ªreducerå¤„ç†å‡½æ•°ã€‚</p><h1 id="reduxå’Œrouterçš„ç»“åˆ-connected-react-router" tabindex="-1"><a class="header-anchor" href="#reduxå’Œrouterçš„ç»“åˆ-connected-react-router" aria-hidden="true">#</a> reduxå’Œrouterçš„ç»“åˆï¼ˆconnected-react-routerï¼‰</h1><ol><li>chromeæ’ä»¶ï¼šredux-devtools</li><li>ä½¿ç”¨npmå®‰è£…ç¬¬ä¸‰æ–¹åº“ï¼šredux-devtools-extension</li></ol><p>ç”¨äºå°†reduxå’Œreact-routerè¿›è¡Œç»“åˆ æœ¬è´¨ä¸Šï¼Œrouterä¸­çš„æŸäº›æ•°æ®å¯èƒ½ä¼šè·Ÿæ•°æ®ä»“åº“ä¸­çš„æ•°æ®è¿›è¡Œè”åŠ¨ è¯¥ç»„ä»¶ä¼šå°†ä¸‹é¢çš„è·¯ç”±æ•°æ®å’Œä»“åº“ä¿æŒåŒæ­¥</p><ol><li>actionï¼šå®ƒä¸æ˜¯reduxçš„actionï¼Œå®ƒè¡¨ç¤ºå½“å‰è·¯ç”±è·³è½¬çš„æ–¹å¼ï¼ˆPUSHã€POPã€REPLACEï¼‰</li><li>locationï¼šå®ƒè®°å½•äº†å½“å‰çš„åœ°å€ä¿¡æ¯</li></ol><p>è¯¥åº“ä¸­çš„å†…å®¹ï¼š</p><h2 id="connectrouter" tabindex="-1"><a class="header-anchor" href="#connectrouter" aria-hidden="true">#</a> connectRouter</h2><p>è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨å®ƒï¼Œä¼šè¿”å›ä¸€ä¸ªç”¨äºç®¡ç†ä»“åº“ä¸­è·¯ç”±ä¿¡æ¯çš„reducerï¼Œè¯¥å‡½æ•°éœ€è¦ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªhistoryå¯¹è±¡ã€‚è¯¥å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“historyå¾—åˆ°ã€‚</p><h2 id="routermiddleware" tabindex="-1"><a class="header-anchor" href="#routermiddleware" aria-hidden="true">#</a> routerMiddleware</h2><p>è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªreduxä¸­é—´ä»¶ï¼Œç”¨äºæ‹¦æˆªä¸€äº›ç‰¹æ®Šçš„action</p><h2 id="connectedrouter" tabindex="-1"><a class="header-anchor" href="#connectedrouter" aria-hidden="true">#</a> ConnectedRouter</h2><p>è¿™æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œç”¨äºå‘ä¸Šä¸‹æ–‡æä¾›ä¸€ä¸ªhistoryå¯¹è±¡å’Œå…¶ä»–çš„è·¯ç”±ä¿¡æ¯ï¼ˆä¸react-routeræä¾›çš„ä¿¡æ¯ä¸€è‡´ï¼‰ ä¹‹æ‰€ä»¥éœ€è¦æ–°åˆ¶ä½œä¸€ä¸ªç»„ä»¶ï¼Œæ˜¯å› ä¸ºè¯¥åº“å¿…é¡»ä¿è¯æ•´ä¸ªè¿‡ç¨‹ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªhistoryå¯¹è±¡</p><h2 id="ä¸€äº›actionåˆ›å»ºå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ä¸€äº›actionåˆ›å»ºå‡½æ•°" aria-hidden="true">#</a> ä¸€äº›actionåˆ›å»ºå‡½æ•°</h2><ul><li>push</li><li>replace</li></ul><h2 id="æ‰‹å†™connected-react-router" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™connected-react-router" aria-hidden="true">#</a> æ‰‹å†™connected-react-router</h2><ul><li>connectRouterï¼šå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªreducer</li><li>routerMiddlewareï¼šå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªä¸­é—´ä»¶</li><li>ConnectedRouterï¼šç»„ä»¶ï¼Œæä¾›è·¯ç”±ä¿¡æ¯ä¸Šä¸‹æ–‡ï¼Œç±»ä¼¼äºBrowserRouterã€HashRouterã€‚ã€‚ã€‚</li><li>ä¸€äº›action-creators: <ul><li>push</li><li>replace</li></ul></li></ul><h1 id="dva" tabindex="-1"><a class="header-anchor" href="#dva" aria-hidden="true">#</a> dva</h1>',28),Sn={href:"https://gitee.com/link?target=https%3A%2F%2Fdvajs.com",target:"_blank",rel:"noopener noreferrer"},_n=n("img",{src:q,alt:"image.png"},null,-1),Pn=p('<h2 id="dvaçš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#dvaçš„ä½¿ç”¨" aria-hidden="true">#</a> dvaçš„ä½¿ç”¨</h2><ul><li>dvaé»˜è®¤å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡è°ƒç”¨è¯¥å‡½æ•°ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªdvaå¯¹è±¡</li><li>dvaå¯¹è±¡.routerï¼šè·¯ç”±æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªReactèŠ‚ç‚¹ï¼Œå°†æ¥ï¼Œåº”ç”¨ç¨‹åºå¯åŠ¨åï¼Œä¼šè‡ªåŠ¨æ¸²æŸ“è¯¥èŠ‚ç‚¹ã€‚</li><li>dvaå¯¹è±¡.start: è¯¥æ–¹æ³•ç”¨äºå¯åŠ¨dvaåº”ç”¨ç¨‹åºï¼Œå¯ä»¥è®¤ä¸ºå¯åŠ¨çš„å°±æ˜¯reactç¨‹åºï¼Œè¯¥å‡½æ•°ä¼ å…¥ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œç”¨äºé€‰ä¸­é¡µé¢ä¸­çš„æŸä¸ªdomå…ƒç´ ï¼Œreactä¼šå°†å†…å®¹æ¸²æŸ“åˆ°è¯¥å…ƒç´ å†…éƒ¨ã€‚</li><li>dvaå¯¹è±¡.model: è¯¥æ–¹æ³•ç”¨äºå®šä¹‰ä¸€ä¸ªæ¨¡å‹ï¼Œè¯¥æ¨¡å‹å¯ä»¥ç†è§£ä¸ºreduxçš„actionã€reducerã€redux-sagaå‰¯ä½œç”¨å¤„ç†çš„æ•´åˆï¼Œæ•´åˆæˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†è¯¥å¯¹è±¡ä¼ å…¥modelæ–¹æ³•å³å¯ã€‚ <ul><li>namespaceï¼šå‘½åç©ºé—´ï¼Œè¯¥å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²çš„å€¼ï¼Œä¼šè¢«ä½œä¸ºä»“åº“ä¸­çš„å±æ€§ä¿å­˜</li><li>stateï¼šè¯¥æ¨¡å‹çš„é»˜è®¤çŠ¶æ€</li><li>reducers: è¯¥å±æ€§é…ç½®ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„æ¯ä¸ªæ–¹æ³•å°±æ˜¯ä¸€ä¸ªreducerï¼Œdvaçº¦å®šï¼Œæ–¹æ³•çš„åå­—ï¼Œå°±æ˜¯åŒ¹é…çš„actionç±»å‹</li><li>effects: å¤„ç†å‰¯ä½œç”¨ï¼Œåº•å±‚æ˜¯ä½¿ç”¨redux-sagaå®ç°çš„ï¼Œè¯¥å±æ€§é…ç½®ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„æ¯éš”æ–¹æ³•å‡å¤„ç†ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œæ–¹æ³•çš„åå­—ï¼Œå°±æ˜¯åŒ¹é…çš„actionç±»å‹ã€‚ <ul><li>å‡½æ•°çš„å‚æ•°1ï¼šaction</li><li>å‚æ•°2ï¼šå°è£…å¥½çš„saga/effectså¯¹è±¡</li></ul></li><li>subscriptionsï¼šé…ç½®ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­å¯ä»¥å†™ä»»æ„æ•°é‡ä»»æ„åç§°çš„å±æ€§ï¼Œæ¯ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¼šåœ¨æ¨¡å‹åŠ å…¥åˆ°ä»“åº“ä¸­åç«‹å³è¿è¡Œã€‚</li></ul></li><li>åœ¨dvaä¸­åŒæ­¥è·¯ç”±åˆ°ä»“åº“ <ul><li>åœ¨è°ƒç”¨dvaå‡½æ•°æ—¶ï¼Œé…ç½®historyå¯¹è±¡</li><li>ä½¿ç”¨ConnectedRouteræä¾›è·¯ç”±ä¸Šä¸‹æ–‡</li></ul></li><li>é…ç½®ï¼š <ul><li>historyï¼šåŒæ­¥åˆ°ä»“åº“çš„historyå¯¹è±¡</li><li>initialStateï¼šåˆ›å»ºreduxä»“åº“æ—¶ï¼Œä½¿ç”¨çš„é»˜è®¤çŠ¶æ€</li><li>onError: å½“ä»“åº“çš„è¿è¡Œå‘ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œè¿è¡Œçš„å‡½æ•°</li><li>onAction: å¯ä»¥é…ç½®reduxä¸­é—´ä»¶ <ul><li>ä¼ å…¥ä¸€ä¸ªä¸­é—´ä»¶å¯¹è±¡</li><li>ä¼ å…¥ä¸€ä¸ªä¸­é—´ä»¶æ•°ç»„</li></ul></li><li>onStateChange: å½“ä»“åº“ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶è¿è¡Œçš„å‡½æ•°</li><li>onReducerï¼šå¯¹æ¨¡å‹ä¸­çš„reducerçš„è¿›ä¸€æ­¥å°è£…</li><li>onEffectï¼šç±»ä¼¼äºå¯¹æ¨¡å‹ä¸­çš„effectçš„è¿›ä¸€æ­¥å°è£…</li><li>extraReducersï¼šç”¨äºé…ç½®é¢å¤–çš„reducerï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•å°±æ˜¯ä¸€ä¸ªéœ€è¦åˆå¹¶çš„reducerï¼Œæ–¹æ³•åå³å±æ€§åã€‚</li><li>extraEnhancers: å®ƒæ˜¯ç”¨äºå°è£…createStoreå‡½æ•°çš„ï¼Œdvaä¼šå°†åŸæ¥çš„ä»“åº“åˆ›å»ºå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ç”¨äºåˆ›å»ºä»“åº“çš„å‡½æ•°ã€‚å‡½æ•°å¿…é¡»æ”¾ç½®åˆ°æ•°ç»„ä¸­ã€‚</li></ul></li></ul><h2 id="dvaæ’ä»¶" tabindex="-1"><a class="header-anchor" href="#dvaæ’ä»¶" aria-hidden="true">#</a> dvaæ’ä»¶</h2><p>é€šè¿‡dvaå¯¹è±¡.use(æ’ä»¶)ï¼Œæ¥ä½¿ç”¨æ’ä»¶ï¼Œæ’ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸é…ç½®å¯¹è±¡ç›¸åŒï¼Œdvaä¼šåœ¨å¯åŠ¨æ—¶ï¼Œå°†ä¼ é€’çš„æ’ä»¶å¯¹è±¡æ··åˆåˆ°é…ç½®ä¸­ã€‚</p><h3 id="dva-loading" tabindex="-1"><a class="header-anchor" href="#dva-loading" aria-hidden="true">#</a> dva-loading</h3><p>è¯¥æ’ä»¶ä¼šåœ¨ä»“åº“ä¸­åŠ å…¥ä¸€ä¸ªçŠ¶æ€ï¼Œåç§°ä¸ºloadingï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­æœ‰ä»¥ä¸‹å±æ€§</p><ul><li>globalï¼šå…¨å±€æ˜¯å¦æ­£åœ¨å¤„ç†å‰¯ä½œç”¨ï¼ˆåŠ è½½ï¼‰ï¼Œåªè¦æœ‰ä»»ä½•ä¸€ä¸ªæ¨¡å‹åœ¨å¤„ç†å‰¯ä½œç”¨ï¼Œåˆ™è¯¥å±æ€§ä¸ºtrue</li><li>modelsï¼šä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å±æ€§åä»¥åŠå±æ€§çš„å€¼ï¼Œè¡¨ç¤ºå“ªä¸ªå¯¹åº”çš„æ¨¡å‹æ˜¯å¦åœ¨å¤„ç†å‰¯ä½œç”¨ä¸­ï¼ˆåŠ è½½ä¸­ï¼‰</li><li>effectsï¼šä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å±æ€§åä»¥åŠå±æ€§çš„å€¼ï¼Œè¡¨ç¤ºæ˜¯å“ªä¸ªactionè§¦å‘äº†å‰¯ä½œç”¨</li></ul><h1 id="umijs-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#umijs-ç®€ä»‹" aria-hidden="true">#</a> umijs ç®€ä»‹</h1>',8),Tn={href:"https://gitee.com/link?target=https%3A%2F%2Fumijs.org%2F",target:"_blank",rel:"noopener noreferrer"},Dn=p('<ul><li>æ’ä»¶åŒ–</li><li>å¼€ç®±å³ç”¨</li><li>çº¦å®šå¼è·¯ç”±</li></ul><h2 id="å…¨å±€å®‰è£…umi" tabindex="-1"><a class="header-anchor" href="#å…¨å±€å®‰è£…umi" aria-hidden="true">#</a> å…¨å±€å®‰è£…umi</h2><p>æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼šumiï¼Œé€šè¿‡è¯¥å‘½ä»¤å¯ä»¥å¯¹umiå·¥ç¨‹è¿›è¡Œæ“ä½œ umiè¿˜å¯ä»¥ä½¿ç”¨å¯¹åº”çš„è„šæ‰‹æ¶</p><ul><li>dev: ä½¿ç”¨å¼€å‘æ¨¡å¼å¯åŠ¨å·¥ç¨‹</li></ul><h2 id="çº¦å®šå¼è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#çº¦å®šå¼è·¯ç”±" aria-hidden="true">#</a> çº¦å®šå¼è·¯ç”±</h2><p>umiå¯¹è·¯ç”±çš„å¤„ç†ï¼Œä¸»è¦é€šè¿‡ä¸¤ç§æ–¹å¼ï¼š</p><ol><li><strong>çº¦å®šå¼</strong>ï¼šä½¿ç”¨çº¦å®šå¥½çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œæ¥ä»£è¡¨é¡µé¢ï¼Œumiä¼šæ ¹æ®å¼€å‘è€…ä¹¦å†™çš„é¡µé¢ï¼Œç”Ÿæˆè·¯ç”±é…ç½®ã€‚</li><li>é…ç½®å¼ï¼šç›´æ¥ä¹¦å†™è·¯ç”±é…ç½®æ–‡ä»¶</li></ol><h3 id="è·¯ç”±åŒ¹é…" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±åŒ¹é…" aria-hidden="true">#</a> è·¯ç”±åŒ¹é…</h3><ul><li>umiçº¦å®šï¼Œå·¥ç¨‹ä¸­çš„pagesæ–‡ä»¶å¤¹ä¸­å­˜æ”¾çš„æ˜¯é¡µé¢ã€‚å¦‚æœå·¥ç¨‹åŒ…å«srcç›®å½•ï¼Œåˆ™src/pagesæ˜¯é¡µé¢æ–‡ä»¶å¤¹ã€‚</li><li>umiçº¦å®šï¼Œé¡µé¢çš„æ–‡ä»¶åï¼Œä»¥åŠé¡µé¢çš„æ–‡ä»¶è·¯å¾„ï¼Œæ˜¯è¯¥é¡µé¢åŒ¹é…çš„è·¯ç”±</li><li>umiçº¦å®šï¼Œå¦‚æœé¡µé¢çš„æ–‡ä»¶åæ˜¯indexï¼Œåˆ™å¯ä»¥çœç•¥æ–‡ä»¶åï¼ˆé¦–é¡µï¼‰(æ³¨æ„é¿å…æ–‡ä»¶åå’Œå½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶å¤¹åç§°ç›¸åŒ)</li><li>umiçº¦å®šï¼Œå¦‚æœsrc/layoutç›®å½•å­˜åœ¨ï¼Œåˆ™è¯¥ç›®å½•ä¸­çš„index.jsè¡¨ç¤ºçš„æ˜¯å…¨å±€çš„é€šç”¨å¸ƒå±€ï¼Œå¸ƒå±€ä¸­çš„childrenåˆ™ä¼šæ·»åŠ å…·ä½“çš„é¡µé¢ã€‚</li><li>umiçº¦å®šï¼Œå¦‚æœpagesæ–‡ä»¶å¤¹ä¸­åŒ…å«_layout.jsï¼Œåˆ™layout.jsæ‰€åœ¨çš„ç›®å½•ä»¥åŠå…¶æ‰€æœ‰çš„å­ç›®å½•ä¸­çš„é¡µé¢ï¼Œå…±ç”¨è¯¥å¸ƒå±€ã€‚</li><li>404çº¦å®šï¼Œumiçº¦å®šï¼Œpages/404.jsï¼Œè¡¨ç¤º404é¡µé¢ï¼Œå¦‚æœè·¯ç”±æ— åŒ¹é…ï¼Œåˆ™ä¼šæ¸²æŸ“è¯¥é¡µé¢ã€‚è¯¥çº¦å®šåœ¨å¼€å‘æ¨¡å¼ä¸­æ— æ•ˆï¼Œåªæœ‰éƒ¨ç½²åç”Ÿæ•ˆã€‚</li><li>ä½¿ç”¨$åç§°ï¼Œä¼šäº§ç”ŸåŠ¨æ€è·¯ç”±</li></ul><h3 id="è·¯ç”±è·³è½¬" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±è·³è½¬" aria-hidden="true">#</a> è·¯ç”±è·³è½¬</h3><ul><li>è·³è½¬é“¾æ¥ï¼š å¯¼å…¥umi/linkï¼Œumi/navlink</li><li>ä»£ç è·³è½¬ï¼š å¯¼å…¥umi/router</li></ul><p>å¯¼å…¥æ¨¡å—æ—¶ï¼Œ@è¡¨ç¤ºsrcç›®å½•</p><h3 id="è·¯ç”±ä¿¡æ¯çš„è·å–" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±ä¿¡æ¯çš„è·å–" aria-hidden="true">#</a> è·¯ç”±ä¿¡æ¯çš„è·å–</h3><p>æ‰€æœ‰çš„é¡µé¢ã€å¸ƒå±€ç»„ä»¶ï¼Œéƒ½ä¼šé€šè¿‡å±æ€§ï¼Œæ”¶åˆ°ä¸‹é¢çš„å±æ€§</p><ul><li>matchï¼šç­‰åŒäºreact-routerçš„match</li><li>historyï¼šç­‰åŒäºreact-routerçš„historyï¼ˆhistory.location.queryè¢«å°è£…æˆäº†ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨çš„æ˜¯query-stringåº“è¿›è¡Œçš„å°è£…ï¼‰</li><li>locationï¼šç­‰åŒäºreact-routerçš„locationï¼ˆlocation.queryè¢«å°è£…æˆäº†ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨çš„æ˜¯query-stringåº“è¿›è¡Œçš„å°è£…ï¼‰</li><li>routeï¼šå¯¹åº”çš„æ˜¯è·¯ç”±é…ç½®</li></ul><p>å¦‚æœéœ€è¦åœ¨æ™®é€šç»„ä»¶ä¸­è·å–è·¯ç”±ä¿¡æ¯ï¼Œåˆ™éœ€è¦ä½¿ç”¨withRouterå°è£…ï¼Œå¯ä»¥é€šè¿‡umi/withRouterå¯¼å…¥</p><h2 id="é…ç½®å¼è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#é…ç½®å¼è·¯ç”±" aria-hidden="true">#</a> é…ç½®å¼è·¯ç”±</h2><p>å½“ä½¿ç”¨äº†è·¯ç”±é…ç½®åï¼Œçº¦å®šå¼è·¯ç”±å…¨éƒ¨å¤±æ•ˆã€‚ ä¸¤ç§æ–¹å¼ä¹¦å†™umié…ç½®ï¼š</p><ol><li>ä½¿ç”¨æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶.umirc.js</li><li>ä½¿ç”¨æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶config/config.js</li></ol><p>è¿›è¡Œè·¯ç”±é…ç½®æ—¶ï¼Œæ¯ä¸ªé…ç½®å°±æ˜¯ä¸€ä¸ªåŒ¹é…è§„åˆ™ï¼Œå¹¶ä¸”ï¼Œæ¯ä¸ªé…ç½®æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„æŸäº›å±æ€§ï¼Œä¼šç›´æ¥å½¢æˆRouteç»„ä»¶çš„å±æ€§ æ³¨æ„ï¼š</p><ul><li>componenté…ç½®é¡¹ï¼Œéœ€è¦å¡«å†™é¡µé¢ç»„ä»¶çš„è·¯å¾„ï¼Œè·¯å¾„ç›¸å¯¹äºpagesæ–‡ä»¶å¤¹</li><li>å¦‚æœé…ç½®é¡¹æ²¡æœ‰exactï¼Œåˆ™ä¼šè‡ªåŠ¨æ·»åŠ exactä¸ºtrue</li><li>æ¯ä¸€ä¸ªè·¯ç”±é…ç½®ï¼Œå¯ä»¥æ·»åŠ ä»»ä½•å±æ€§</li><li>Routeså±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªç»„ä»¶è·¯å¾„ï¼Œè·¯å¾„ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼Œå½“åŒ¹é…åˆ°è·¯ç”±åï¼Œä¼šè½¬è€Œæ¸²æŸ“è¯¥å±æ€§æŒ‡å®šçš„ç»„ä»¶ï¼Œå¹¶ä¼šå°†componentç»„ä»¶ä½œä¸ºchildrenæ”¾åˆ°åŒ¹é…çš„ç»„ä»¶ä¸­</li></ul><p>è·¯ç”±é…ç½®ä¸­çš„ä¿¡æ¯ï¼ŒåŒæ ·å¯ä»¥æ”¾åˆ°çº¦å®šå¼è·¯ç”±ä¸­ï¼Œæ–¹å¼æ˜¯ï¼Œä¸ºçº¦å®šå¼è·¯ç”±æ·»åŠ ç¬¬ä¸€ä¸ªæ–‡æ¡£æ³¨é‡Šï¼ˆæ³¨é‡Šçš„æ ¼å¼çš„YAMLï¼‰ï¼Œéœ€è¦å°†æ³¨é‡Šæ”¾åˆ°æœ€å¼€å§‹çš„ä½ç½® YAMLæ ¼å¼</p><ul><li>é”®å€¼å¯¹ï¼Œå†’å·åéœ€è¦åŠ ä¸Šç©ºæ ¼</li><li>å¦‚æœæŸä¸ªå±æ€§æœ‰å¤šä¸ªé”®æˆ–å¤šä¸ªå€¼ï¼Œéœ€è¦è¿›è¡Œç¼©è¿›ï¼ˆç©ºæ ¼ï¼‰</li></ul><h2 id="ä½¿ç”¨dva" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨dva" aria-hidden="true">#</a> ä½¿ç”¨dva</h2>',24),Mn={href:"https://gitee.com/link?target=https%3A%2F%2Fumijs.org%2Fzh%2Fplugin%2Fumi-plugin-react.html",target:"_blank",rel:"noopener noreferrer"},On=p('<ol><li>å…¨å±€æ¨¡å‹ï¼šæ‰€æœ‰é¡µé¢é€šç”¨ï¼Œå·¥ç¨‹ä¸€å¼€å§‹å¯åŠ¨åï¼Œæ¨¡å‹å°±ä¼šæŒ‚è½½åˆ°ä»“åº“</li><li>å±€éƒ¨æ¨¡å‹ï¼šåªèƒ½è¢«æŸäº›é¡µé¢ä½¿ç”¨ï¼Œè®¿é—®å…·ä½“çš„é¡µé¢æ—¶æ‰ä¼šæŒ‚è½½åˆ°ä»“åº“</li></ol><h3 id="å®šä¹‰å…¨å±€æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰å…¨å±€æ¨¡å‹" aria-hidden="true">#</a> å®šä¹‰å…¨å±€æ¨¡å‹</h3><p>åœ¨src/modelsç›®å½•ä¸‹å®šä¹‰çš„jsæ–‡ä»¶éƒ½ä¼šè¢«çœ‹ä½œæ˜¯å…¨å±€æ¨¡å‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å‹çš„å‘½åç©ºé—´å’Œæ–‡ä»¶åä¸€è‡´ã€‚</p><h3 id="å®šä¹‰å±€éƒ¨æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰å±€éƒ¨æ¨¡å‹" aria-hidden="true">#</a> å®šä¹‰å±€éƒ¨æ¨¡å‹</h3><p>å±€éƒ¨æ¨¡å‹å®šä¹‰åœ¨pagesæ–‡ä»¶å¤¹æˆ–å…¶å­æ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨å“ªä¸ªæ–‡ä»¶å¤¹å®šä¹‰çš„æ¨¡å‹ï¼Œä¼šè¢«è¯¥æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰é¡µé¢ä»¥åŠå­é¡µé¢ã€ä»¥åŠè¯¥æ–‡ä»¶å¤¹çš„ç¥–å…ˆæ–‡ä»¶å¤¹ä¸­çš„é¡µé¢æ‰€å…±äº«ã€‚ å±€éƒ¨æ¨¡å‹çš„å®šä¹‰å’Œå…¨å±€æ¨¡å‹çš„çº¦å®šç±»ä¼¼ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªmodelsæ–‡ä»¶å¤¹</p><h2 id="ä½¿ç”¨æ ·å¼" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ ·å¼" aria-hidden="true">#</a> ä½¿ç”¨æ ·å¼</h2><p>è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>ä¿è¯ç±»æ ·å¼åç§°çš„å”¯ä¸€æ€§ï¼šcss-module</li><li>æ ·å¼ä»£ç çš„é‡å¤ï¼šless æˆ– sass</li></ol><h3 id="å±€éƒ¨æ ·å¼å’Œå…¨å±€æ ·å¼" tabindex="-1"><a class="header-anchor" href="#å±€éƒ¨æ ·å¼å’Œå…¨å±€æ ·å¼" aria-hidden="true">#</a> å±€éƒ¨æ ·å¼å’Œå…¨å±€æ ·å¼</h3><p>åº•å±‚ä½¿ç”¨äº†webpackçš„åŠ è½½å™¨ï¼šcss-loaderï¼ˆå†…éƒ¨åŒ…å«äº†css-moduleçš„åŠŸèƒ½ï¼‰ cssæ–‡ä»¶ -&gt; css-module -&gt; å¯¹è±¡</p><ol><li>æŸä¸ªç»„ä»¶ç‰¹æœ‰çš„æ ·å¼ï¼Œä¸ä¸å…¶ä»–ç»„ä»¶å…±äº«ï¼Œé€šå¸¸ï¼Œå°†è¯¥æ ·å¼æ–‡ä»¶ä¸ç»„ä»¶æ”¾ç½®åœ¨åŒä¸€ä¸ªç›®å½•(éå¼ºåˆ¶æ€§)(è¦ä¿è¯ç±»æ ·å¼åç§°å”¯ä¸€)</li><li>å¦‚æœæŸäº›æ ·å¼å¯èƒ½è¢«æŸäº›ç»„ä»¶å…±äº«ï¼Œè¿™æ ·çš„æ ·å¼ï¼Œé€šå¸¸æ”¾åˆ°assets/cssæ–‡ä»¶å¤¹ä¸­ã€‚(è¦ä¿è¯ç±»æ ·å¼åç§°å”¯ä¸€)</li><li>å…¨å±€æ ·å¼ï¼Œåç§°ä¸€å®šå”¯ä¸€ï¼Œä¸éœ€è¦css-moduleå¤„ç†ã€‚umijsçº¦å®šï¼Œsrc/global.cssæ ·å¼ï¼Œæ˜¯å…¨å±€æ ·å¼ï¼Œä¸ä¼šäº¤ç»™css-moduleå¤„ç†ã€‚</li></ol><h3 id="less" tabindex="-1"><a class="header-anchor" href="#less" aria-hidden="true">#</a> less</h3><p>lessä»£ç  -&gt; less-loader -&gt; cssä»£ç  -&gt; css-module -&gt; å¯¹è±¡</p><h2 id="ä»£ç†å’Œæ•°æ®æ¨¡æ‹Ÿ" tabindex="-1"><a class="header-anchor" href="#ä»£ç†å’Œæ•°æ®æ¨¡æ‹Ÿ" aria-hidden="true">#</a> ä»£ç†å’Œæ•°æ®æ¨¡æ‹Ÿ</h2><h3 id="ä»£ç†" tabindex="-1"><a class="header-anchor" href="#ä»£ç†" aria-hidden="true">#</a> ä»£ç†</h3><p>ä»£ç†ç”¨äºè§£å†³è·¨åŸŸé—®é¢˜ é…ç½®.umirc.jsä¸­çš„proxyï¼Œé…ç½®æ–¹å¼å’ŒdevServerä¸­çš„proxyé…ç½®ç›¸åŒ</p><h3 id="æ•°æ®æ¨¡æ‹Ÿ" tabindex="-1"><a class="header-anchor" href="#æ•°æ®æ¨¡æ‹Ÿ" aria-hidden="true">#</a> æ•°æ®æ¨¡æ‹Ÿ</h3><p>ç”¨äºè§£å†³å‰åç«¯ååŒå¼€å‘çš„é—®é¢˜ æ•°æ®æ¨¡æ‹Ÿå¯ä»¥è®©å‰ç«¯å¼€å‘è€…åœ¨å¼€å‘æ—¶ï¼Œæ— è§†åç«¯æ¥å£æ˜¯å¦çœŸæ­£å®Œæˆï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯æ¨¡æ‹Ÿçš„æ•°æ® umijsçº¦å®šï¼š</p><ol><li>mockæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶</li><li>src/pagesæ–‡ä»¶å¤¹ä¸­çš„_mock.jsæ–‡ä»¶</li></ol><p>ä»¥ä¸Šä¸¤ç§JSæ–‡ä»¶ï¼Œå‡ä¼šè¢«umijsè¯»å–ï¼Œå¹¶ä½œä¸ºæ•°æ®æ¨¡æ‹Ÿçš„é…ç½® å¯ä»¥è‡ªè¡Œå‘æŒ¥ï¼Œæ·»åŠ æ¨¡æ‹Ÿæ•°æ®ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬ä¼šå’Œmockjsé…åˆ</p><h2 id="é…ç½®" tabindex="-1"><a class="header-anchor" href="#é…ç½®" aria-hidden="true">#</a> é…ç½®</h2><h3 id="é¢å¤–çš„çº¦å®šæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#é¢å¤–çš„çº¦å®šæ–‡ä»¶" aria-hidden="true">#</a> é¢å¤–çš„çº¦å®šæ–‡ä»¶</h3><ul><li>src/pages/document.ejs: é¡µé¢æ¨¡æ¿æ–‡ä»¶</li><li>src/global.jsï¼šåœ¨umiæœ€å¼€å§‹å¯åŠ¨æ—¶è¿è¡Œçš„jsæ–‡ä»¶</li><li>src/app.jsï¼šä½œè¿è¡Œæ—¶é…ç½®çš„ä»£ç  <ul><li>patchRoutes: å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨umiè¯»å–å®Œæ‰€æœ‰é™æ€è·¯ç”±é…ç½®åæ‰§è¡Œ</li><li>dva <ul><li>configï¼š ç›¸å½“äºnew dva(é…ç½®)</li><li>pluginsï¼š ç›¸å½“äºdva.use(æ’ä»¶)</li></ul></li></ul></li><li>.env: é…ç½®ç¯å¢ƒå˜é‡ï¼Œè¿™äº›å˜é‡ä¼šåœ¨umiç¼–è¯‘æœŸé—´å‘æŒ¥ä½œç”¨ <ul><li>UMI_ENVï¼šumiçš„ç¯å¢ƒå˜é‡å€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„å€¼ï¼Œè¯¥å€¼ä¼šå½±å“åˆ°.umirc.js</li><li>PORT</li><li>MOCK</li></ul></li></ul><h3 id="umircé…ç½®" tabindex="-1"><a class="header-anchor" href="#umircé…ç½®" aria-hidden="true">#</a> umircé…ç½®</h3><h4 id="umié…ç½®" tabindex="-1"><a class="header-anchor" href="#umié…ç½®" aria-hidden="true">#</a> umié…ç½®</h4><p>ä¹¦å†™åœ¨.umirc.jsæ–‡ä»¶ä¸­çš„é…ç½®</p><ul><li>pluginsï¼šé…ç½®umijsçš„æ’ä»¶</li><li>routesï¼šé…ç½®è·¯ç”±ï¼ˆä¼šå¯¼è‡´çº¦å®šå¼è·¯ç”±å¤±æ•ˆï¼‰</li><li>historyï¼šhistoryå¯¹è±¡æ¨¡å¼ï¼ˆé»˜è®¤æ˜¯browserï¼‰</li><li>outputPathï¼šä½¿ç”¨umi buildåï¼Œæ‰“åŒ…çš„ç›®å½•åç§°ï¼Œé»˜è®¤./dist</li><li>base: ç›¸å½“äºä¹‹å‰BrowserRouterä¸­çš„basename</li><li>publicPath: æŒ‡å®šé™æ€èµ„æºæ‰€åœ¨çš„ç›®å½•</li><li>exportStatic: å¼€å¯è¯¥é…ç½®åï¼Œä¼šæ‰“åŒ…æˆå¤šä¸ªé™æ€é¡µé¢ï¼Œæ¯ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªè·¯ç”±ï¼Œå¼€å¯å¤šé™æ€é¡µé¢åº”ç”¨çš„å‰ææ¡ä»¶æ˜¯ï¼šæ²¡æœ‰åŠ¨æ€è·¯ç”±</li></ul><h4 id="webpacké…ç½®" tabindex="-1"><a class="header-anchor" href="#webpacké…ç½®" aria-hidden="true">#</a> webpacké…ç½®</h4><h2 id="umiè„šæ‰‹æ¶" tabindex="-1"><a class="header-anchor" href="#umiè„šæ‰‹æ¶" aria-hidden="true">#</a> umiè„šæ‰‹æ¶</h2><p>create-umi</p><h1 id="ant-design" tabindex="-1"><a class="header-anchor" href="#ant-design" aria-hidden="true">#</a> Ant Design</h1>',31),Fn={href:"https://gitee.com/link?target=https%3A%2F%2Fant.design",target:"_blank",rel:"noopener noreferrer"},Hn=n("h2",{id:"form",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#form","aria-hidden":"true"},"#"),s(" Form")],-1),An=n("ul",null,[n("li",null,"Formç»„ä»¶ï¼šä»…æä¾›æ ·å¼å’Œäº‹ä»¶"),n("li",null,[s("formå¯¹è±¡ï¼šå¤„ç†æ•°æ®éªŒè¯ã€ç”Ÿæˆã€è·å– "),n("ul",null,[n("li",null,"è·å–formå¯¹è±¡ï¼šé€šè¿‡Form.create(é…ç½®)å¾—åˆ°ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œè¯¥é«˜é˜¶ç»„ä»¶ä¼šå°†formå¯¹è±¡ä½œä¸ºå±æ€§ï¼Œæ³¨å…¥åˆ°ä¼ é€’çš„ç»„ä»¶ä¸­"),n("li",null,[s("ä½¿ç”¨formå¯¹è±¡ "),n("ul",null,[n("li",null,"getFieldDecoratorï¼šè¯¥æ–¹æ³•ç”¨äºäº§ç”Ÿä¸€ä¸ªè¡¨å•å…ƒç´ ï¼Œé€šè¿‡è¯¥æ–¹æ³•äº§ç”Ÿçš„è¡¨å•å…ƒç´ ä¼šè¢«formå¯¹è±¡æ§åˆ¶")])])])])],-1);function En(Un,In){const t=e("ExternalLinkIcon"),o=e("App"),c=e("Home");return i(),u("div",null,[S,n("blockquote",null,[n("p",null,[s("å®˜ç½‘ï¼š"),n("a",_,[s("https://react.docschina.org/"),a(t)])])]),P,n("ol",null,[T,n("li",null,[n("a",D,[s("React-Router"),a(t)]),s("ï¼šç›¸å½“äºvue-router")]),n("li",null,[n("a",M,[s("Redux"),a(t)]),s("ï¼šç›¸å½“äºVuex "),O]),n("li",null,[s("ç¬¬ä¸‰æ–¹è„šæ‰‹æ¶ï¼š"),n("a",F,[s("umi"),a(t)])]),n("li",null,[s("UIåº“ï¼š"),n("a",H,[s("Ant Design"),a(t)]),s("ï¼Œç›¸å½“äºVueçš„Element-UI æˆ– IView")]),A]),n("h2",E,[U,s(),n("a",I,[s("JSX"),a(t)])]),N,n("ul",null,[n("li",null,[s("Reactå…ƒç´ ï¼šReact Elementï¼Œé€šè¿‡ React.createElement åˆ›å»ºï¼ˆè¯­æ³•ç³–ï¼šJSXï¼‰ï¼Œä¾‹å¦‚ï¼š "),n("ul",null,[L,n("li",null,[a(o)])])]),B,V,W]),J,n("p",null,[s("Reactç¬¬ä¸‰æ–¹åŠ¨ç”»åº“ï¼š"),n("a",X,[s("react-transition-group"),a(t)]),s("ï¼Œä½¿ç”¨çš„æ—¶å€™è¯»æ–‡æ¡£")]),G,n("p",null,[s("å…³äºé¦–æ¬¡æ¸²æŸ“æ—¶çš„ç±»æ ·å¼ï¼Œappearã€apear-activeã€apear-doneï¼Œå®ƒå’Œenterçš„å”¯ä¸€åŒºåˆ«åœ¨äºå®Œæˆæ—¶ï¼Œä¼šåŒæ—¶åŠ å…¥apear-doneå’Œenter-done "),n("strong",null,[s("è¿˜å¯ä»¥ä¸ "),n("strong",null,[n("a",K,[$,a(t)])]),s(" è”ç”¨")])]),z,n("h2",Y,[Q,s(),n("a",Z,[s("React Router"),a(t)])]),nn,sn,an,n("p",null,[s("ä¾‹ï¼š"),n("a",tn,[s("https://www.react.com:443/news/1-2-1.html?a=1&b=2#abcdefg"),a(t)])]),pn,n("ul",null,[en,n("li",null,[s("componentï¼šåŒ¹é…æˆåŠŸåè¦æ˜¾ç¤ºçš„ç»„ä»¶ï¼Œå±æ€§å€¼ä¸ºèŠ±æ‹¬å·åŒ…è£¹çš„ç»„ä»¶ {Home}ï¼ˆreact-router-dom v6ç‰ˆæœ¬æ¢äº†åå­—å¹¶æ›´æ–°äº†åŠŸèƒ½ï¼Œå« elementï¼Œä¸”å±æ€§å€¼è¦å†™æˆ JSXç»„ä»¶çš„å½¢å¼ï¼Œ"),a(c),s("ï¼‰")]),on,cn]),ln,n("ul",null,[n("li",null,[s("å‘æŸä¸ªé¡µé¢ä¼ é€’æ•°æ®çš„æ–¹å¼ "),n("ul",null,[un,rn,kn,n("li",null,[dn,n("ul",null,[n("li",null,[n("strong",null,[s("ç”¨æ³•é…åˆ "),n("strong",null,[n("a",vn,[mn,a(t)])]),s(" æ–‡æ¡£")])])])])])])]),gn,n("h1",bn,[hn,s(),n("a",yn,[s("Redux"),a(t)])]),fn,n("p",null,[s("ä¸­æ–‡æ–‡æ¡£åœ°å€ï¼š"),n("a",xn,[s("https://redux-saga-in-chinese.js.org/"),a(t)])]),wn,n("p",null,[s("è¯¦æƒ…å‚è€ƒï¼š"),n("a",Rn,[s("https://react-redux.js.org/api"),a(t)])]),jn,n("p",null,[s("è¯¥åº“ç”¨äºç®€åŒ–action-typesã€action-creatorä»¥åŠreducer å®˜ç½‘æ–‡æ¡£ï¼š"),n("a",qn,[s("https://redux-actions.js.org/"),a(t)])]),Cn,n("p",null,[s("å®˜æ–¹ç½‘ç«™ï¼š"),n("a",Sn,[s("https://dvajs.com"),a(t)]),s(" dvaä¸ä»…ä»…æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œæ›´æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒä¸»è¦æ•´åˆäº†reduxçš„ç›¸å…³å†…å®¹ï¼Œè®©æˆ‘ä»¬å¤„ç†æ•°æ®æ›´åŠ å®¹æ˜“ï¼Œå®é™…ä¸Šï¼Œdvaæœ‰å¾ˆå¤šä¾èµ–ï¼šreactã€react-routerã€reduxã€redux-sagaã€react-reduxã€connected-react-routerç­‰ã€‚ "),_n]),Pn,n("p",null,[s("å®˜ç½‘ï¼š"),n("a",Tn,[s("https://umijs.org/"),a(t)])]),Dn,n("p",null,[s("å®˜æ–¹æ’ä»¶é›† umi-plugin-react æ–‡æ¡£ï¼š"),n("a",Mn,[s("https://umijs.org/zh/plugin/umi-plugin-react.html"),a(t)]),s(" dvaæ’ä»¶å’Œumiæ•´åˆåï¼Œå°†æ¨¡å‹åˆ†ä¸ºä¸¤ç§ï¼š")]),On,n("p",null,[s("å®˜ç½‘åœ°å€ï¼š"),n("a",Fn,[s("https://ant.design"),a(t)]),s(" å¯¹äºå‰ç«¯å¼€å‘è€…ï¼šantdå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªUIåº“ ç½‘ç«™ = å‰å° + åå° å‰å°ï¼šç»™ç”¨æˆ·è®¿é—®çš„é¡µé¢ï¼Œé€šå¸¸éœ€è¦è®¾è®¡å¸ˆå‚ä¸åˆ¶ä½œ åå°ï¼šç»™ç®¡ç†å‘˜ï¼ˆé€šå¸¸æ˜¯å…¬å¸å†…éƒ¨å‘˜å·¥ï¼‰ä½¿ç”¨ï¼Œé€šå¸¸è®¾è®¡å¸ˆä¸å‚ä¸åå°é¡µé¢ã€‚")]),Hn,An])}const Ln=l(C,[["render",En],["__file","reactå­¦ä¹ .html.vue"]]);export{Ln as default};
